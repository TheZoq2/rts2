<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Starburst: include/pmc.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Starburst
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('pmc_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">include/pmc.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="pmc_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef __PMC_H</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define __PMC_H</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span><span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00004"></a>00004 <span class="preprocessor"></span>
<a name="l00005"></a>00005 <span class="preprocessor">#include &lt;<a class="code" href="device_8h.html" title="Declaration of functions that gives information about the hardware platform.">sys/device.h</a>&gt;</span>
<a name="l00006"></a>00006 <span class="preprocessor">#include &lt;<a class="code" href="mc_8h.html" title="Implementation of a memory consistency model.">mc.h</a>&gt;</span>
<a name="l00007"></a>00007 <span class="preprocessor">#include &lt;<a class="code" href="rc_8h.html">rc.h</a>&gt;</span>
<a name="l00008"></a>00008 <span class="preprocessor">#include &lt;<a class="code" href="lock_8h.html">lock.h</a>&gt;</span>
<a name="l00009"></a>00009 <span class="preprocessor">#include &lt;<a class="code" href="ttypes_8h.html">ttypes.h</a>&gt;</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include &lt;<a class="code" href="kernel__types_8h.html">sys/kernel_types.h</a>&gt;</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include &lt;<a class="code" href="malloc_8h.html">malloc.h</a>&gt;</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include &lt;stdarg.h&gt;</span>
<a name="l00013"></a>00013 <span class="preprocessor">#include &lt;typeinfo&gt;</span>
<a name="l00014"></a>00014 
<a name="l00015"></a><a class="code" href="pmc_8h.html#a981322c8c0c041eb1c3bd694fcabc78b">00015</a> <span class="preprocessor">#define PMC_NS pmc</span>
<a name="l00016"></a>00016 <span class="preprocessor"></span>
<a name="l00017"></a>00017 <span class="preprocessor">#ifdef KERNEL_DEBUG</span>
<a name="l00018"></a><a class="code" href="pmc_8h.html#a781fdf450e3025107b1dfed1a9bb57ee">00018</a> <span class="preprocessor"></span><span class="preprocessor">#  define PMC_ENABLE_DEBUG</span>
<a name="l00019"></a><a class="code" href="pmc_8h.html#a82d0f4a1605aa8d4dafacd86179722b8">00019</a> <span class="preprocessor"></span><span class="preprocessor">#  define PMC_OUT_OF_SCOPE_COMPILE_ERROR</span>
<a name="l00020"></a>00020 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span>
<a name="l00022"></a>00022 <span class="preprocessor">#ifdef PMC_ENABLE_DEBUG</span>
<a name="l00023"></a><a class="code" href="pmc_8h.html#a5da066aae856e2a406d2da50cc769af2">00023</a> <span class="preprocessor"></span><span class="preprocessor">#  define PMC_ASSERT(a...) ASSERT(a)</span>
<a name="l00024"></a>00024 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00025"></a>00025 <span class="preprocessor"></span><span class="preprocessor">#  define PMC_ASSERT(...)</span>
<a name="l00026"></a>00026 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00027"></a>00027 <span class="preprocessor"></span>
<a name="l00028"></a>00028 <span class="preprocessor">#ifndef USE_DISTRIBUTED_LOCK</span>
<a name="l00029"></a>00029 <span class="preprocessor"></span><span class="preprocessor">#  define PMC_NOT_SUPPORTED</span>
<a name="l00030"></a>00030 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00031"></a><a class="code" href="pmc_8h.html#acc40e0916c917d8b641bc96c7345349a">00031</a> <span class="preprocessor"></span><span class="preprocessor">#  define PMC_SUPPORTED</span>
<a name="l00032"></a>00032 <span class="preprocessor"></span>
<a name="l00033"></a><a class="code" href="namespacePMC__NS.html">00033</a> <span class="keyword">namespace </span><a class="code" href="pmc_8h.html#a981322c8c0c041eb1c3bd694fcabc78b">PMC_NS</a> {
<a name="l00034"></a>00034     
<a name="l00035"></a><a class="code" href="classPMC__NS_1_1Error.html">00035</a>     <span class="keyword">class </span><a class="code" href="classPMC__NS_1_1Error.html">Error</a> {
<a name="l00036"></a>00036     <span class="keyword">public</span>:
<a name="l00037"></a><a class="code" href="classPMC__NS_1_1Error.html#a86568653230ba4c30e2fe6fb4f344f6a">00037</a>         <a class="code" href="classPMC__NS_1_1Error.html#abe306a737a8ce55569a7ae0b60703faa">Error</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* msg, ...) throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((noreturn,<a class="code" href="classPMC__NS_1_1Error.html#a86568653230ba4c30e2fe6fb4f344f6a">format</a>(printf,2,3))) {
<a name="l00038"></a>00038             va_list args;
<a name="l00039"></a>00039             va_start(args,msg);
<a name="l00040"></a>00040             fprintf(stderr,<span class="stringliteral">&quot;\n!! PMC error by %d@%d: &quot;</span>,<a class="code" href="syscall_8h.html#a8f8f8cfcfa6c1855a3b9d47669f39df3" title="Syscall to kGetPid().">getpid</a>(),<a class="code" href="device_8h.html#a03019be38c75a4741a5351cff1776f64">GetProcID</a>());
<a name="l00041"></a>00041             vfprintf(stderr,msg,args);
<a name="l00042"></a>00042             fprintf(stderr,<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00043"></a>00043             va_end(args);
<a name="l00044"></a>00044             <a class="code" href="api_8h.html#a5d9adee5e1e53667862704de38a532d1" title="Aborts the calling process.">abort</a>();
<a name="l00045"></a>00045         }
<a name="l00046"></a>00046     };
<a name="l00047"></a>00047 <span class="comment"></span>
<a name="l00048"></a>00048 <span class="comment">    //////////////////////////////////////////</span>
<a name="l00049"></a>00049 <span class="comment"></span>    <span class="comment">// Multi-byte location interface</span>
<a name="l00050"></a>00050 
<a name="l00051"></a>00051     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00052"></a><a class="code" href="structPMC__NS_1_1NoInit.html">00052</a>     <span class="keyword">struct </span><a class="code" href="structPMC__NS_1_1NoInit.html">NoInit</a> {
<a name="l00053"></a>00053         <span class="comment">// do not init var</span>
<a name="l00054"></a><a class="code" href="structPMC__NS_1_1NoInit.html#a788d2188acda1154cf28be56dfbf41da">00054</a>         <a class="code" href="structPMC__NS_1_1NoInit.html#a788d2188acda1154cf28be56dfbf41da">NoInit</a>() {}
<a name="l00055"></a>00055         <span class="comment">// do init var</span>
<a name="l00056"></a><a class="code" href="structPMC__NS_1_1NoInit.html#aa641b328f39b3046a46ed03d17676629">00056</a>         <a class="code" href="structPMC__NS_1_1NoInit.html#aa641b328f39b3046a46ed03d17676629">NoInit</a>(<span class="keyword">const</span> <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; val) : <a class="code" href="structPMC__NS_1_1NoInit.html#a57501766459473fb1921c8b740380d6a">var</a>(val) {}
<a name="l00057"></a><a class="code" href="structPMC__NS_1_1NoInit.html#a852c55e8c6f6af1591af10e17008e7a8">00057</a>         <a class="code" href="structPMC__NS_1_1NoInit.html#a852c55e8c6f6af1591af10e17008e7a8">operator T&amp;</a>(){<span class="keywordflow">return</span> <a class="code" href="structPMC__NS_1_1NoInit.html#a57501766459473fb1921c8b740380d6a">var</a>;}
<a name="l00058"></a><a class="code" href="structPMC__NS_1_1NoInit.html#a57501766459473fb1921c8b740380d6a">00058</a>         <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a> <a class="code" href="structPMC__NS_1_1NoInit.html#a57501766459473fb1921c8b740380d6a">var</a>;
<a name="l00059"></a>00059     };
<a name="l00060"></a>00060 
<a name="l00061"></a>00061     <span class="comment">// atomic location</span>
<a name="l00062"></a>00062     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00063"></a><a class="code" href="classPMC__NS_1_1Location.html">00063</a>     <span class="keyword">class </span><a class="code" href="classPMC__NS_1_1Location.html">Location</a> {
<a name="l00064"></a>00064     <span class="keyword">public</span>:
<a name="l00065"></a><a class="code" href="classPMC__NS_1_1Location.html#a66d2048973f8fe0f743626be1bb88610">00065</a>         <a class="code" href="classPMC__NS_1_1Location.html#a66d2048973f8fe0f743626be1bb88610">Location</a>() throw() : m_var() {}
<a name="l00066"></a>00066 
<a name="l00067"></a><a class="code" href="classPMC__NS_1_1Location.html#a7d001b3c3e60b6ee51d72232511991ff">00067</a>         <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="classPMC__NS_1_1Location.html#a7d001b3c3e60b6ee51d72232511991ff">acquire</a>() throw() {
<a name="l00068"></a>00068             <span class="keywordtype">int</span> res=<a class="code" href="lock_8h.html#a0830e5b8890672217fef1fbecd445ccc" title="Get lock (from local or remote) corresponding to address.">lck_lock</a>((<span class="keywordtype">void</span>*)<span class="keyword">this</span>);
<a name="l00069"></a>00069             <span class="keywordflow">if</span>(<a class="code" href="api_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(res&gt;0))<a class="code" href="classPMC__NS_1_1Error.html">Error</a>(<span class="stringliteral">&quot;acquire failed, error %d&quot;</span>,res);
<a name="l00070"></a>00070             <span class="keywordflow">return</span> <a class="code" href="classPMC__NS_1_1Location.html#aa3dfc51dd26cabc9da5604388987ffbf">access</a>();
<a name="l00071"></a>00071         }
<a name="l00072"></a><a class="code" href="classPMC__NS_1_1Location.html#ad71b22e09c6f5c8fa9d8a81132e80e80">00072</a>         <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1Location.html#ad71b22e09c6f5c8fa9d8a81132e80e80">release</a>(<span class="keywordtype">bool</span> cleanup=<span class="keyword">false</span>) <span class="keyword">const</span> throw() {
<a name="l00073"></a>00073             <span class="keywordtype">int</span> res=cleanup?<a class="code" href="lock_8h.html#aa1f74dde05eda1bb3e922623237cbf88" title="Unlock and give back to server When result &lt; 0: LR_LOCAL: lock was local LR_STOLEN: already stolen be...">lck_destroy</a>((<span class="keywordtype">void</span>*)<span class="keyword">this</span>):<a class="code" href="lock_8h.html#ae3852a7bac2476f13cb4a168fa0d6ae6" title="Unlock an address Does not communicate with lock daemon, unless old lock is destroyed.">lck_unlock</a>((<span class="keywordtype">void</span>*)<span class="keyword">this</span>);
<a name="l00074"></a>00074             <span class="keywordflow">if</span>(<a class="code" href="api_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(res&gt;0))<a class="code" href="classPMC__NS_1_1Error.html">Error</a>(<span class="stringliteral">&quot;release failed, error %d&quot;</span>,res);
<a name="l00075"></a>00075         }
<a name="l00076"></a>00076 
<a name="l00077"></a><a class="code" href="classPMC__NS_1_1Location.html#a467813838f4464a075c4bcd7353b9a73">00077</a>         <span class="keyword">const</span> <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a> <a class="code" href="classPMC__NS_1_1Location.html#a467813838f4464a075c4bcd7353b9a73">read</a>() <span class="keyword">const</span> throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00078"></a>00078             <span class="keywordflow">return</span> <a class="code" href="classPMC__NS_1_1Location.html#aa3dfc51dd26cabc9da5604388987ffbf">access</a>(); }
<a name="l00079"></a><a class="code" href="classPMC__NS_1_1Location.html#a06f08f1f0aceca92f5371e0bc679830e">00079</a>         <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1Location.html#a06f08f1f0aceca92f5371e0bc679830e">write</a>(<span class="keyword">const</span> <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; val) <span class="keywordflow">throw</span>() <a class="code" href="info__app_8h.html#aeab68f17dc686a2f7dc72ab2b712e464">__attribute__</a>((always_inline)) {
<a name="l00080"></a>00080             <a class="code" href="classPMC__NS_1_1Location.html#aa3dfc51dd26cabc9da5604388987ffbf">access</a>() = val; }
<a name="l00081"></a>00081 
<a name="l00082"></a><a class="code" href="classPMC__NS_1_1Location.html#a8de747ba5d658caab9f54bfc26adba07">00082</a>         <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1Location.html#a8de747ba5d658caab9f54bfc26adba07">fence</a>() throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00083"></a>00083             barrier();
<a name="l00084"></a>00084         }
<a name="l00085"></a>00085         
<a name="l00086"></a>00086         <span class="keywordtype">bool</span> <a class="code" href="classPMC__NS_1_1Location.html#adc133997e8ca5fefcf78518c520323aa">isWordType</a>() <a class="code" href="device_8h.html#a4588b12eae6951d9c976a65d6869b47f">const</a> <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline,<a class="code" href="device_8h.html#a39d092325e10e124a07dd5347d9568b1">pure</a>)) {<span class="keywordflow">return</span> <a class="code" href="classPMC__NS_1_1Location.html#aaf703c43821788c637a1ca7280840f44">IS_TYPE_SIMPLE</a>(m_var);}
<a name="l00087"></a>00087 
<a name="l00088"></a>00088     <span class="keyword">protected</span>:
<a name="l00089"></a><a class="code" href="classPMC__NS_1_1Location.html#aa3dfc51dd26cabc9da5604388987ffbf">00089</a>         <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="classPMC__NS_1_1Location.html#aa3dfc51dd26cabc9da5604388987ffbf">access</a>() throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00090"></a>00090             <span class="keywordflow">return</span> m_var; }
<a name="l00091"></a><a class="code" href="classPMC__NS_1_1Location.html#afd0eb1ac3d150160ecfb0a4508e60a53">00091</a>         <span class="keyword">const</span> <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="classPMC__NS_1_1Location.html#afd0eb1ac3d150160ecfb0a4508e60a53">access</a>() <span class="keyword">const</span> throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00092"></a>00092             <span class="keywordflow">return</span> m_var; }
<a name="l00093"></a>00093 
<a name="l00094"></a>00094     <span class="keyword">private</span>:
<a name="l00095"></a>00095         <a class="code" href="structPMC__NS_1_1NoInit.html">NoInit&lt;T&gt;</a> m_var;
<a name="l00096"></a>00096     };
<a name="l00097"></a>00097     
<a name="l00098"></a>00098     <span class="comment">// atomic multi-byte location</span>
<a name="l00099"></a>00099     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00100"></a><a class="code" href="classPMC__NS_1_1MultiLocation.html">00100</a>     <span class="keyword">class </span><a class="code" href="classPMC__NS_1_1MultiLocation.html">MultiLocation</a> : <span class="keyword">public</span> <a class="code" href="classPMC__NS_1_1Location.html">Location</a>&lt;T&gt; {
<a name="l00101"></a>00101     <span class="keyword">public</span>:
<a name="l00102"></a><a class="code" href="classPMC__NS_1_1MultiLocation.html#a34346c15667b5c58bee436990e74524b">00102</a>         <span class="keyword">typedef</span> <a class="code" href="classPMC__NS_1_1Location.html">Location&lt;T&gt;</a> <a class="code" href="classPMC__NS_1_1MultiLocation.html#a34346c15667b5c58bee436990e74524b">base</a>;
<a name="l00103"></a><a class="code" href="classPMC__NS_1_1MultiLocation.html#a5a4ddbad05690eb68cf24364f81b7c46">00103</a>         <a class="code" href="classPMC__NS_1_1MultiLocation.html#a5a4ddbad05690eb68cf24364f81b7c46">MultiLocation</a>() : <a class="code" href="classPMC__NS_1_1Location.html">base</a>() {}
<a name="l00104"></a>00104 
<a name="l00105"></a><a class="code" href="classPMC__NS_1_1MultiLocation.html#ab60f49fb8eedf427d9236547837df561">00105</a>         <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="classPMC__NS_1_1MultiLocation.html#ab60f49fb8eedf427d9236547837df561">entry_x</a>() throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00106"></a>00106             <span class="keywordflow">return</span> this-&gt;<a class="code" href="classPMC__NS_1_1Location.html#a7d001b3c3e60b6ee51d72232511991ff">acquire</a>();
<a name="l00107"></a>00107         }
<a name="l00108"></a><a class="code" href="classPMC__NS_1_1MultiLocation.html#a6671e9b9785963f08d56df4516a3d707">00108</a>         <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1MultiLocation.html#a6671e9b9785963f08d56df4516a3d707">exit_x</a>(<a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="info__app_8h.html#a735984d41155bc1032e09bece8f8d66d">data</a>,<span class="keywordtype">bool</span> did_read=<span class="keyword">true</span>,<span class="keywordtype">bool</span> did_write=<span class="keyword">true</span>,<span class="keywordtype">bool</span> cleanup=<span class="keyword">false</span>) throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00109"></a>00109             this-&gt;<a class="code" href="classPMC__NS_1_1Location.html#ad71b22e09c6f5c8fa9d8a81132e80e80">release</a>(cleanup);
<a name="l00110"></a>00110         }
<a name="l00111"></a><a class="code" href="classPMC__NS_1_1MultiLocation.html#ac7d999e91b4956d72ea9b6cb1702c8d2">00111</a>         <span class="keyword">const</span> <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="classPMC__NS_1_1MultiLocation.html#ac7d999e91b4956d72ea9b6cb1702c8d2">entry_ro</a>() throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00112"></a>00112             <span class="keywordflow">return</span> this-&gt;<a class="code" href="classPMC__NS_1_1Location.html#aa3dfc51dd26cabc9da5604388987ffbf">access</a>();
<a name="l00113"></a>00113         }
<a name="l00114"></a><a class="code" href="classPMC__NS_1_1MultiLocation.html#a65a2bae68e90a27ce5467cb072ec1f87">00114</a>         <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1MultiLocation.html#a65a2bae68e90a27ce5467cb072ec1f87">exit_ro</a>(<span class="keyword">const</span> <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="info__app_8h.html#a735984d41155bc1032e09bece8f8d66d">data</a>,<span class="keywordtype">bool</span> did_read=<span class="keyword">true</span>,<span class="keywordtype">bool</span> cleanup=<span class="keyword">false</span>) throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00115"></a>00115         }
<a name="l00116"></a><a class="code" href="classPMC__NS_1_1MultiLocation.html#a06b4bddb43da1a0c839162c7c5036d49">00116</a>         <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1MultiLocation.html#a06b4bddb43da1a0c839162c7c5036d49">flush</a>(<a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="info__app_8h.html#a735984d41155bc1032e09bece8f8d66d">data</a>,<span class="keywordtype">bool</span> did_read=<span class="keyword">true</span>,<span class="keywordtype">bool</span> did_write=<span class="keyword">true</span>) throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00117"></a>00117         }
<a name="l00118"></a>00118         <span class="keywordtype">bool</span> <a class="code" href="classPMC__NS_1_1MultiLocation.html#afe72760f243e767924538d2b445dff0d">atomic</a>() <a class="code" href="device_8h.html#a4588b12eae6951d9c976a65d6869b47f">const</a> <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline,<a class="code" href="device_8h.html#a39d092325e10e124a07dd5347d9568b1">pure</a>)) {
<a name="l00119"></a>00119             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00120"></a>00120         }
<a name="l00121"></a>00121     };
<a name="l00122"></a>00122     <span class="comment"></span>
<a name="l00123"></a>00123 <span class="comment">    //////////////////////////////////////////</span>
<a name="l00124"></a>00124 <span class="comment"></span>    <span class="comment">// Memory allocation strategies</span>
<a name="l00125"></a>00125 
<a name="l00126"></a><a class="code" href="classPMC__NS_1_1NoAlloc.html">00126</a>     <span class="keyword">class </span><a class="code" href="classPMC__NS_1_1NoAlloc.html">NoAlloc</a> {
<a name="l00127"></a>00127     <span class="keyword">public</span>:
<a name="l00128"></a><a class="code" href="classPMC__NS_1_1NoAlloc.html#a19582fb6820e86533e2d6b88a3cca91e">00128</a>         <span class="keyword">static</span> <span class="keywordtype">void</span>* <a class="code" href="classPMC__NS_1_1NoAlloc.html#a19582fb6820e86533e2d6b88a3cca91e">operator new</a>(<span class="keywordtype">size_t</span> s) <span class="keywordflow">throw</span>() <a class="code" href="info__app_8h.html#aeab68f17dc686a2f7dc72ab2b712e464">__attribute__</a>((noreturn)) {
<a name="l00129"></a>00129             <a class="code" href="classPMC__NS_1_1Error.html">Error</a>(<span class="stringliteral">&quot;Allocate this type of memory is unsupported&quot;</span>);
<a name="l00130"></a>00130         }
<a name="l00131"></a><a class="code" href="classPMC__NS_1_1NoAlloc.html#a2cf1504ab0a5e47f79d46d7d9f73715a">00131</a>         <span class="keyword">static</span> <span class="keywordtype">void</span>* <a class="code" href="classPMC__NS_1_1NoAlloc.html#a2cf1504ab0a5e47f79d46d7d9f73715a">operator new[]</a>(<span class="keywordtype">size_t</span> s) <span class="keywordflow">throw</span>() <a class="code" href="info__app_8h.html#aeab68f17dc686a2f7dc72ab2b712e464">__attribute__</a>((always_inline)) { <span class="keywordflow">return</span> <a class="code" href="classPMC__NS_1_1NoAlloc.html#a19582fb6820e86533e2d6b88a3cca91e">NoAlloc::operator new</a>(s); }
<a name="l00132"></a><a class="code" href="classPMC__NS_1_1NoAlloc.html#a48de7f6f5c38a09e2df3ac1b16d69c5c">00132</a>         <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1NoAlloc.html#a48de7f6f5c38a09e2df3ac1b16d69c5c">operator delete</a>(<span class="keywordtype">void</span>* x) <span class="keywordflow">throw</span>() <a class="code" href="info__app_8h.html#aeab68f17dc686a2f7dc72ab2b712e464">__attribute__</a>((always_inline)) {}
<a name="l00133"></a><a class="code" href="classPMC__NS_1_1NoAlloc.html#aa0f6216d3a891112a52c8f27330ec4c8">00133</a>         <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1NoAlloc.html#aa0f6216d3a891112a52c8f27330ec4c8">operator delete[]</a>(<span class="keywordtype">void</span>* x) <span class="keywordflow">throw</span>() <a class="code" href="info__app_8h.html#aeab68f17dc686a2f7dc72ab2b712e464">__attribute__</a>((always_inline)) {}
<a name="l00134"></a><a class="code" href="classPMC__NS_1_1NoAlloc.html#af99febf4e73feed8b54b1c29c2ab1912">00134</a>         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> P&gt; <span class="keyword">static</span> <span class="keywordtype">void</span>* <a class="code" href="classPMC__NS_1_1NoAlloc.html#af99febf4e73feed8b54b1c29c2ab1912">operator new</a>(<span class="keywordtype">size_t</span> s,P&amp; pool) <span class="keywordflow">throw</span>() { <span class="keywordflow">return</span> pool.alloc(s); }
<a name="l00135"></a><a class="code" href="classPMC__NS_1_1NoAlloc.html#a4d4b07daf61ee41490bc17079a562e84">00135</a>         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> P&gt; <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1NoAlloc.html#a4d4b07daf61ee41490bc17079a562e84">operator delete</a>(<span class="keywordtype">void</span>* p,P&amp; pool) <span class="keywordflow">throw</span>() { pool.free(p); }
<a name="l00136"></a>00136     };
<a name="l00137"></a>00137     
<a name="l00138"></a><a class="code" href="classPMC__NS_1_1LocalAlloc.html">00138</a>     <span class="keyword">class </span><a class="code" href="classPMC__NS_1_1LocalAlloc.html">LocalAlloc</a> {
<a name="l00139"></a>00139     <span class="keyword">public</span>:
<a name="l00140"></a><a class="code" href="classPMC__NS_1_1LocalAlloc.html#a8440ba8b8e89a56a9945b01263d64672">00140</a>         <span class="keyword">static</span> <span class="keywordtype">void</span>* <a class="code" href="classPMC__NS_1_1LocalAlloc.html#a8440ba8b8e89a56a9945b01263d64672">operator new</a>(<span class="keywordtype">size_t</span> s) <span class="keywordflow">throw</span>() {
<a name="l00141"></a>00141             <span class="keywordtype">void</span>* res=<a class="code" href="malloc_8cc.html#a62b7798461bd461da64c5f9d35feddf7">calloc</a>(1,s);
<a name="l00142"></a>00142             <span class="keywordflow">if</span>(<a class="code" href="api_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(!res))
<a name="l00143"></a>00143                 <a class="code" href="classPMC__NS_1_1Error.html">Error</a>(<span class="stringliteral">&quot;Out of memory to allocate %lu bytes&quot;</span>,s);
<a name="l00144"></a>00144             <span class="keywordflow">return</span> res;
<a name="l00145"></a>00145         }
<a name="l00146"></a><a class="code" href="classPMC__NS_1_1LocalAlloc.html#a9bc0616dc70853fc317c82fbf3cfc4d4">00146</a>         <span class="keyword">static</span> <span class="keywordtype">void</span>* <a class="code" href="classPMC__NS_1_1LocalAlloc.html#a9bc0616dc70853fc317c82fbf3cfc4d4">operator new[]</a>(<span class="keywordtype">size_t</span> s) <span class="keywordflow">throw</span>() <a class="code" href="info__app_8h.html#aeab68f17dc686a2f7dc72ab2b712e464">__attribute__</a>((always_inline)) { <span class="keywordflow">return</span> <a class="code" href="classPMC__NS_1_1LocalAlloc.html#a8440ba8b8e89a56a9945b01263d64672">LocalAlloc::operator new</a>(s); }
<a name="l00147"></a><a class="code" href="classPMC__NS_1_1LocalAlloc.html#a0864c2caf0e12ffd0fb8e6fc0141003c">00147</a>         <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1LocalAlloc.html#a0864c2caf0e12ffd0fb8e6fc0141003c">operator delete</a>(<span class="keywordtype">void</span>* x) <span class="keywordflow">throw</span>() <a class="code" href="info__app_8h.html#aeab68f17dc686a2f7dc72ab2b712e464">__attribute__</a>((always_inline)) { <a class="code" href="malloc_8cc.html#afbedc913aa4651b3c3b4b3aecd9b4711">free</a>(x); }
<a name="l00148"></a><a class="code" href="classPMC__NS_1_1LocalAlloc.html#a8009c138e580e124a1baf3d7d57bd02b">00148</a>         <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1LocalAlloc.html#a8009c138e580e124a1baf3d7d57bd02b">operator delete[]</a>(<span class="keywordtype">void</span>* x) <span class="keywordflow">throw</span>() <a class="code" href="info__app_8h.html#aeab68f17dc686a2f7dc72ab2b712e464">__attribute__</a>((always_inline)) { <a class="code" href="classPMC__NS_1_1LocalAlloc.html#a0864c2caf0e12ffd0fb8e6fc0141003c">LocalAlloc::operator delete</a>(x); }
<a name="l00149"></a><a class="code" href="classPMC__NS_1_1LocalAlloc.html#a85bd9da7b663434c7dc8d5f0eaa8947d">00149</a>         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> P&gt; <span class="keyword">static</span> <span class="keywordtype">void</span>* <a class="code" href="classPMC__NS_1_1LocalAlloc.html#a85bd9da7b663434c7dc8d5f0eaa8947d">operator new</a>(<span class="keywordtype">size_t</span> s,P&amp; pool) <span class="keywordflow">throw</span>() { <span class="keywordflow">return</span> pool.alloc(s); }
<a name="l00150"></a><a class="code" href="classPMC__NS_1_1LocalAlloc.html#ad90657a0c28da66ede8c6fa4887d20c8">00150</a>         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> P&gt; <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1LocalAlloc.html#ad90657a0c28da66ede8c6fa4887d20c8">operator delete</a>(<span class="keywordtype">void</span>* p,P&amp; pool) <span class="keywordflow">throw</span>() { pool.free(p); }
<a name="l00151"></a>00151     };
<a name="l00152"></a>00152 
<a name="l00153"></a><a class="code" href="classPMC__NS_1_1SharedAlloc.html">00153</a>     <span class="keyword">class </span><a class="code" href="classPMC__NS_1_1SharedAlloc.html">SharedAlloc</a> {
<a name="l00154"></a>00154     <span class="keyword">public</span>:
<a name="l00155"></a><a class="code" href="classPMC__NS_1_1SharedAlloc.html#af06209594687a0ed9d7b5a62ef02cb24">00155</a>         <span class="keyword">static</span> <span class="keywordtype">void</span>* <a class="code" href="classPMC__NS_1_1SharedAlloc.html#af06209594687a0ed9d7b5a62ef02cb24">operator new</a>(<span class="keywordtype">size_t</span> s) <span class="keywordflow">throw</span>() {
<a name="l00156"></a>00156             <span class="keywordtype">void</span>* res=<a class="code" href="malloc_8h.html#a09ed14bcf0bfdf3cc1e828b7857ae49d">scalloc</a>(1,s);
<a name="l00157"></a>00157             <span class="keywordflow">if</span>(<a class="code" href="api_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(!res))
<a name="l00158"></a>00158                 <a class="code" href="classPMC__NS_1_1Error.html">Error</a>(<span class="stringliteral">&quot;Out of memory to allocate %lu bytes&quot;</span>,s);
<a name="l00159"></a>00159             <span class="keywordflow">return</span> res;
<a name="l00160"></a>00160         }
<a name="l00161"></a><a class="code" href="classPMC__NS_1_1SharedAlloc.html#a5bdb0c7ba9eb848096c161cf64485285">00161</a>         <span class="keyword">static</span> <span class="keywordtype">void</span>* <a class="code" href="classPMC__NS_1_1SharedAlloc.html#a5bdb0c7ba9eb848096c161cf64485285">operator new[]</a>(<span class="keywordtype">size_t</span> s) <span class="keywordflow">throw</span>() <a class="code" href="info__app_8h.html#aeab68f17dc686a2f7dc72ab2b712e464">__attribute__</a>((always_inline)) { <span class="keywordflow">return</span> <a class="code" href="classPMC__NS_1_1SharedAlloc.html#af06209594687a0ed9d7b5a62ef02cb24">SharedAlloc::operator new</a>(s); }
<a name="l00162"></a><a class="code" href="classPMC__NS_1_1SharedAlloc.html#a9ec3ce922ea510ca91fdfa11eb912269">00162</a>         <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1SharedAlloc.html#a9ec3ce922ea510ca91fdfa11eb912269">operator delete</a>(<span class="keywordtype">void</span>* x) <span class="keywordflow">throw</span>() <a class="code" href="info__app_8h.html#aeab68f17dc686a2f7dc72ab2b712e464">__attribute__</a>((always_inline)) { <a class="code" href="malloc_8h.html#ad55071fdba0053f2d666f66049e488dd">sfree</a>(x); }
<a name="l00163"></a><a class="code" href="classPMC__NS_1_1SharedAlloc.html#acdd3df779fb1f64cf64b7d4d951c021b">00163</a>         <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1SharedAlloc.html#acdd3df779fb1f64cf64b7d4d951c021b">operator delete[]</a>(<span class="keywordtype">void</span>* x) <span class="keywordflow">throw</span>() <a class="code" href="info__app_8h.html#aeab68f17dc686a2f7dc72ab2b712e464">__attribute__</a>((always_inline)) { <a class="code" href="classPMC__NS_1_1SharedAlloc.html#a9ec3ce922ea510ca91fdfa11eb912269">SharedAlloc::operator delete</a>(x); }
<a name="l00164"></a><a class="code" href="classPMC__NS_1_1SharedAlloc.html#ad4b798a141a4e4a899536447be9f5fcc">00164</a>         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> P&gt; <span class="keyword">static</span> <span class="keywordtype">void</span>* <a class="code" href="classPMC__NS_1_1SharedAlloc.html#ad4b798a141a4e4a899536447be9f5fcc">operator new</a>(<span class="keywordtype">size_t</span> s,P&amp; pool) <span class="keywordflow">throw</span>() { <span class="keywordflow">return</span> pool.alloc(s); }
<a name="l00165"></a><a class="code" href="classPMC__NS_1_1SharedAlloc.html#a309300fada1e3108a18fe090f59993b7">00165</a>         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> P&gt; <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1SharedAlloc.html#a309300fada1e3108a18fe090f59993b7">operator delete</a>(<span class="keywordtype">void</span>* p,P&amp; pool) <span class="keywordflow">throw</span>() { pool.free(p); }
<a name="l00166"></a>00166     };
<a name="l00167"></a>00167     <span class="comment"></span>
<a name="l00168"></a>00168 <span class="comment">    //////////////////////////////////////////</span>
<a name="l00169"></a>00169 <span class="comment"></span>    <span class="comment">// Memory pools</span>
<a name="l00170"></a>00170     
<a name="l00171"></a><a class="code" href="classPMC__NS_1_1MemPool.html">00171</a>     <span class="keyword">class </span><a class="code" href="classPMC__NS_1_1MemPool.html">MemPool</a> {
<a name="l00172"></a>00172     <span class="keyword">public</span>:
<a name="l00173"></a><a class="code" href="classPMC__NS_1_1MemPool.html#aa1c06300d8d93843e1a2a18c83845f89">00173</a>         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1MemPool.html#aa1c06300d8d93843e1a2a18c83845f89">check</a>(<span class="keywordtype">size_t</span> s) <span class="keywordflow">throw</span>() {
<a name="l00174"></a>00174             <span class="keywordflow">if</span>(<a class="code" href="api_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(<span class="keyword">sizeof</span>(<a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>)!=s))
<a name="l00175"></a>00175                 <a class="code" href="classPMC__NS_1_1Error.html">Error</a>(<span class="stringliteral">&quot;Allocating incorrect amount of memory from pool: %lu bytes for %s&quot;</span>,(<span class="keywordtype">long</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)s,<span class="keyword">typeid</span>(<a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>).name());
<a name="l00176"></a>00176         }
<a name="l00177"></a><a class="code" href="classPMC__NS_1_1MemPool.html#a63134c3759eaae39e48718387f27a30e">00177</a>         <span class="keywordtype">void</span>* <a class="code" href="classPMC__NS_1_1MemPool.html#a63134c3759eaae39e48718387f27a30e">alloc</a>(<span class="keywordtype">size_t</span> s) <span class="keywordflow">throw</span>() {
<a name="l00178"></a>00178             <a class="code" href="classPMC__NS_1_1Error.html">Error</a>(<span class="stringliteral">&quot;No pool to alloc for&quot;</span>);
<a name="l00179"></a>00179             <span class="keywordflow">return</span> NULL;
<a name="l00180"></a>00180         }
<a name="l00181"></a><a class="code" href="classPMC__NS_1_1MemPool.html#a51fc541b72cf26fe57449b2a970ac978">00181</a>         <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1MemPool.html#a51fc541b72cf26fe57449b2a970ac978">free</a>(<span class="keywordtype">void</span>* s) <span class="keywordflow">throw</span>() {
<a name="l00182"></a>00182         }
<a name="l00183"></a>00183     };
<a name="l00184"></a>00184 
<a name="l00185"></a><a class="code" href="classPMC__NS_1_1SharedMemPool.html">00185</a>     <span class="keyword">class </span><a class="code" href="classPMC__NS_1_1SharedMemPool.html">SharedMemPool</a> : <a class="code" href="classPMC__NS_1_1MemPool.html">MemPool</a> {
<a name="l00186"></a>00186     <span class="keyword">public</span>:
<a name="l00187"></a><a class="code" href="classPMC__NS_1_1SharedMemPool.html#adeb8ee893c7ce7414e90ae965989db06">00187</a>         <span class="keywordtype">void</span>* <a class="code" href="classPMC__NS_1_1SharedMemPool.html#adeb8ee893c7ce7414e90ae965989db06">alloc</a>(<span class="keywordtype">size_t</span> s) <span class="keywordflow">throw</span>() {
<a name="l00188"></a>00188             <span class="keywordflow">return</span> <a class="code" href="malloc_8cc.html#a360f865e74a356080303b8ba681ff8b2">SharedAlloc::operator new</a>(s);
<a name="l00189"></a>00189         }
<a name="l00190"></a><a class="code" href="classPMC__NS_1_1SharedMemPool.html#a4782aced4a6173159719dffc7abbba18">00190</a>         <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1SharedMemPool.html#a4782aced4a6173159719dffc7abbba18">free</a>(<span class="keywordtype">void</span>* s) <span class="keywordflow">throw</span>() {
<a name="l00191"></a>00191             <a class="code" href="malloc_8cc.html#a86107594327f3a001230df9802cd4422">SharedAlloc::operator delete</a>(s);
<a name="l00192"></a>00192         }
<a name="l00193"></a>00193     };
<a name="l00194"></a>00194         <span class="comment"></span>
<a name="l00195"></a>00195 <span class="comment">    //////////////////////////////////////////</span>
<a name="l00196"></a>00196 <span class="comment"></span>    <span class="comment">// Multi-byte backends</span>
<a name="l00197"></a>00197     
<a name="l00198"></a>00198     <span class="comment">// Assuming single-threaded access</span>
<a name="l00199"></a>00199     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00200"></a><a class="code" href="classPMC__NS_1_1LocalBackend.html">00200</a>     <span class="keyword">class </span><a class="code" href="classPMC__NS_1_1LocalBackend.html">LocalBackend</a> : <span class="keyword">public</span> <a class="code" href="classPMC__NS_1_1MultiLocation.html">MultiLocation</a>&lt;T&gt;, <span class="keyword">public</span> <a class="code" href="classPMC__NS_1_1LocalAlloc.html">LocalAlloc</a> {
<a name="l00201"></a>00201     <span class="keyword">public</span>:
<a name="l00202"></a><a class="code" href="classPMC__NS_1_1LocalBackend.html#aa6d74e12c2635ed1a3d0c62365b7a0d6">00202</a>         <span class="keyword">typedef</span> <a class="code" href="classPMC__NS_1_1MultiLocation.html">MultiLocation&lt;T&gt;</a> <a class="code" href="classPMC__NS_1_1LocalBackend.html#aa6d74e12c2635ed1a3d0c62365b7a0d6">base</a>;
<a name="l00203"></a><a class="code" href="classPMC__NS_1_1LocalBackend.html#a066755ecd38604fbc79360ac9b9d2cde">00203</a>         <a class="code" href="classPMC__NS_1_1LocalBackend.html#a066755ecd38604fbc79360ac9b9d2cde">LocalBackend</a>() : <a class="code" href="classPMC__NS_1_1MultiLocation.html">MultiLocation</a>&lt;<a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&gt;() {}
<a name="l00204"></a>00204         
<a name="l00205"></a><a class="code" href="classPMC__NS_1_1LocalBackend.html#a8e527c0518f1818775eba1b715f27d45">00205</a>         <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="classPMC__NS_1_1LocalBackend.html#a8e527c0518f1818775eba1b715f27d45">acquire</a>() throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00206"></a>00206             <span class="keywordflow">return</span> this-&gt;<a class="code" href="classPMC__NS_1_1Location.html#aa3dfc51dd26cabc9da5604388987ffbf">access</a>();
<a name="l00207"></a>00207         }
<a name="l00208"></a><a class="code" href="classPMC__NS_1_1LocalBackend.html#ae9eee35ea79cad2201f574f82a1f4ffc">00208</a>         <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1LocalBackend.html#ae9eee35ea79cad2201f574f82a1f4ffc">release</a>(<span class="keywordtype">bool</span> cleanup=<span class="keyword">false</span>) throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00209"></a>00209         }
<a name="l00210"></a><a class="code" href="classPMC__NS_1_1LocalBackend.html#a4e842750a68f1cd08569470d541f336e">00210</a>         <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="classPMC__NS_1_1LocalBackend.html#a4e842750a68f1cd08569470d541f336e">entry_x</a>() throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00211"></a>00211             <span class="keywordflow">return</span> this-&gt;<a class="code" href="classPMC__NS_1_1LocalBackend.html#a8e527c0518f1818775eba1b715f27d45">acquire</a>();
<a name="l00212"></a>00212         }
<a name="l00213"></a><a class="code" href="classPMC__NS_1_1LocalBackend.html#abd0c933da9d0a5c04044a54f5408f33f">00213</a>         <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1LocalBackend.html#abd0c933da9d0a5c04044a54f5408f33f">exit_x</a>(<a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="info__app_8h.html#a735984d41155bc1032e09bece8f8d66d">data</a>,<span class="keywordtype">bool</span> did_read=<span class="keyword">true</span>,<span class="keywordtype">bool</span> did_write=<span class="keyword">true</span>,<span class="keywordtype">bool</span> cleanup=<span class="keyword">false</span>) throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00214"></a>00214             this-&gt;<a class="code" href="classPMC__NS_1_1LocalBackend.html#ae9eee35ea79cad2201f574f82a1f4ffc">release</a>();
<a name="l00215"></a>00215         }
<a name="l00216"></a><a class="code" href="classPMC__NS_1_1LocalBackend.html#af88157bd8b9af26f6f05740b7f525ced">00216</a>         <span class="keyword">const</span> <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="classPMC__NS_1_1LocalBackend.html#af88157bd8b9af26f6f05740b7f525ced">entry_ro</a>() throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00217"></a>00217             <span class="keywordflow">return</span> this-&gt;<a class="code" href="classPMC__NS_1_1Location.html#aa3dfc51dd26cabc9da5604388987ffbf">access</a>();
<a name="l00218"></a>00218         }
<a name="l00219"></a><a class="code" href="classPMC__NS_1_1LocalBackend.html#a489eba8c85c429cb90c2f87b110eff9f">00219</a>         <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1LocalBackend.html#a489eba8c85c429cb90c2f87b110eff9f">exit_ro</a>(<span class="keyword">const</span> <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="info__app_8h.html#a735984d41155bc1032e09bece8f8d66d">data</a>,<span class="keywordtype">bool</span> did_read=<span class="keyword">true</span>,<span class="keywordtype">bool</span> cleanup=<span class="keyword">false</span>) throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00220"></a>00220         }
<a name="l00221"></a>00221         <span class="keywordtype">bool</span> <a class="code" href="classPMC__NS_1_1LocalBackend.html#a91ee2d5a87d5047d8dd5c96f71466a2b">atomic</a>() <a class="code" href="device_8h.html#a4588b12eae6951d9c976a65d6869b47f">const</a> <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline,<a class="code" href="device_8h.html#a39d092325e10e124a07dd5347d9568b1">pure</a>)) {
<a name="l00222"></a>00222             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00223"></a>00223         }
<a name="l00224"></a>00224     };
<a name="l00225"></a>00225 
<a name="l00226"></a>00226     <span class="comment">// Assuming sequential consistent system (aka single core)</span>
<a name="l00227"></a>00227     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00228"></a><a class="code" href="classPMC__NS_1_1SCBackend.html">00228</a>     <span class="keyword">class </span><a class="code" href="classPMC__NS_1_1SCBackend.html">SCBackend</a> : <span class="keyword">public</span> <a class="code" href="classPMC__NS_1_1MultiLocation.html">MultiLocation</a>&lt;T&gt;, <span class="keyword">public</span> <a class="code" href="classPMC__NS_1_1SharedAlloc.html">SharedAlloc</a> {
<a name="l00229"></a>00229     <span class="keyword">public</span>:
<a name="l00230"></a><a class="code" href="classPMC__NS_1_1SCBackend.html#a6eb9a5089f062d39e4b7e6a59285a694">00230</a>         <span class="keyword">typedef</span> <a class="code" href="classPMC__NS_1_1MultiLocation.html">MultiLocation&lt;T&gt;</a> <a class="code" href="classPMC__NS_1_1SCBackend.html#a6eb9a5089f062d39e4b7e6a59285a694">base</a>;
<a name="l00231"></a><a class="code" href="classPMC__NS_1_1SCBackend.html#ab0278d70e8707638d42d79ba70ecfdd6">00231</a>         <a class="code" href="classPMC__NS_1_1SCBackend.html#ab0278d70e8707638d42d79ba70ecfdd6">SCBackend</a>() : <a class="code" href="classPMC__NS_1_1MultiLocation.html">MultiLocation</a>&lt;<a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&gt;(), m_lock(0) {}
<a name="l00232"></a>00232         
<a name="l00233"></a><a class="code" href="classPMC__NS_1_1SCBackend.html#a15d06f0b89aeed418ad44d125fab522d">00233</a>         <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="classPMC__NS_1_1SCBackend.html#a15d06f0b89aeed418ad44d125fab522d">acquire</a>() throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00234"></a>00234             <span class="keywordflow">while</span>(<a class="code" href="api_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(lcas(&amp;m_lock,0,1)==1))<a class="code" href="sched_8h.html#a4568d760dba1978cc219077a0eb0127f">Yield</a>();
<a name="l00235"></a>00235             <span class="keywordflow">return</span> this-&gt;<a class="code" href="classPMC__NS_1_1Location.html#aa3dfc51dd26cabc9da5604388987ffbf">access</a>();
<a name="l00236"></a>00236         }
<a name="l00237"></a><a class="code" href="classPMC__NS_1_1SCBackend.html#a3b5ce4c494278d376d3e5c8700114357">00237</a>         <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1SCBackend.html#a3b5ce4c494278d376d3e5c8700114357">release</a>(<span class="keywordtype">bool</span> cleanup=<span class="keyword">false</span>) throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00238"></a>00238             m_lock=0;
<a name="l00239"></a>00239         }
<a name="l00240"></a><a class="code" href="classPMC__NS_1_1SCBackend.html#ade733e8f1839d43603cc1cd8cbc61630">00240</a>         <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="classPMC__NS_1_1SCBackend.html#ade733e8f1839d43603cc1cd8cbc61630">entry_x</a>() throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00241"></a>00241             <span class="keywordflow">return</span> this-&gt;<a class="code" href="classPMC__NS_1_1SCBackend.html#a15d06f0b89aeed418ad44d125fab522d">acquire</a>();
<a name="l00242"></a>00242         }
<a name="l00243"></a><a class="code" href="classPMC__NS_1_1SCBackend.html#a549c9c4d5a683900cf80f8d43b5e0c77">00243</a>         <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1SCBackend.html#a549c9c4d5a683900cf80f8d43b5e0c77">exit_x</a>(<a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="info__app_8h.html#a735984d41155bc1032e09bece8f8d66d">data</a>,<span class="keywordtype">bool</span> did_read=<span class="keyword">true</span>,<span class="keywordtype">bool</span> did_write=<span class="keyword">true</span>,<span class="keywordtype">bool</span> cleanup=<span class="keyword">false</span>) throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00244"></a>00244             this-&gt;<a class="code" href="classPMC__NS_1_1SCBackend.html#a3b5ce4c494278d376d3e5c8700114357">release</a>();
<a name="l00245"></a>00245         }
<a name="l00246"></a><a class="code" href="classPMC__NS_1_1SCBackend.html#ae4ec242ffe8e8e930c742456ae12c611">00246</a>         <span class="keyword">const</span> <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="classPMC__NS_1_1SCBackend.html#ae4ec242ffe8e8e930c742456ae12c611">entry_ro</a>() throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00247"></a>00247             <span class="keywordflow">if</span>(!<a class="code" href="classPMC__NS_1_1SCBackend.html#ac1d8ab772de5c6f48ffad180910f40a1">atomic</a>()&amp;&amp;!<a class="code" href="classIsConst.html">IsConst&lt;T&gt;::value</a>)
<a name="l00248"></a>00248                 this-&gt;<a class="code" href="classPMC__NS_1_1SCBackend.html#a15d06f0b89aeed418ad44d125fab522d">acquire</a>();
<a name="l00249"></a>00249             <span class="keywordflow">return</span> this-&gt;<a class="code" href="classPMC__NS_1_1Location.html#aa3dfc51dd26cabc9da5604388987ffbf">access</a>();
<a name="l00250"></a>00250         }
<a name="l00251"></a><a class="code" href="classPMC__NS_1_1SCBackend.html#a5be90a0d2a364d4f22e67cc00290bb7c">00251</a>         <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1SCBackend.html#a5be90a0d2a364d4f22e67cc00290bb7c">exit_ro</a>(<span class="keyword">const</span> <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="info__app_8h.html#a735984d41155bc1032e09bece8f8d66d">data</a>,<span class="keywordtype">bool</span> did_read=<span class="keyword">true</span>,<span class="keywordtype">bool</span> cleanup=<span class="keyword">false</span>) throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00252"></a>00252             <span class="keywordflow">if</span>(!<a class="code" href="classPMC__NS_1_1SCBackend.html#ac1d8ab772de5c6f48ffad180910f40a1">atomic</a>()&amp;&amp;!<a class="code" href="classIsConst.html">IsConst&lt;T&gt;::value</a>)
<a name="l00253"></a>00253                 this-&gt;<a class="code" href="classPMC__NS_1_1SCBackend.html#a3b5ce4c494278d376d3e5c8700114357">release</a>();
<a name="l00254"></a>00254         }
<a name="l00255"></a>00255         <span class="keywordtype">bool</span> <a class="code" href="classPMC__NS_1_1SCBackend.html#ac1d8ab772de5c6f48ffad180910f40a1">atomic</a>() <a class="code" href="device_8h.html#a4588b12eae6951d9c976a65d6869b47f">const</a> <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline,<a class="code" href="device_8h.html#a39d092325e10e124a07dd5347d9568b1">pure</a>)) {
<a name="l00256"></a>00256             <span class="keywordflow">return</span> <a class="code" href="classPMC__NS_1_1Location.html#adc133997e8ca5fefcf78518c520323aa">base::isWordType</a>()||<span class="keyword">sizeof</span>(<a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>)&lt;=<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>);
<a name="l00257"></a>00257         }
<a name="l00258"></a>00258     <span class="keyword">private</span>:
<a name="l00259"></a>00259         <span class="keywordtype">int</span> m_lock;
<a name="l00260"></a>00260     };
<a name="l00261"></a>00261 
<a name="l00262"></a>00262     <span class="comment">// Software cache coherency (aka mc.h)</span>
<a name="l00263"></a>00263     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00264"></a><a class="code" href="classPMC__NS_1_1MCBackend.html">00264</a>     <span class="keyword">class </span><a class="code" href="classPMC__NS_1_1MCBackend.html">MCBackend</a> : <span class="keyword">public</span> <a class="code" href="classPMC__NS_1_1MultiLocation.html">MultiLocation</a>&lt;T&gt;, <span class="keyword">public</span> <a class="code" href="classPMC__NS_1_1SharedAlloc.html">SharedAlloc</a> {
<a name="l00265"></a>00265     <span class="keyword">public</span>:
<a name="l00266"></a><a class="code" href="classPMC__NS_1_1MCBackend.html#abfd24cac17417e22bc7d4a99df1511cf">00266</a>         <span class="keyword">typedef</span> <a class="code" href="classPMC__NS_1_1MultiLocation.html">MultiLocation&lt;T&gt;</a> <a class="code" href="classPMC__NS_1_1MCBackend.html#abfd24cac17417e22bc7d4a99df1511cf">base</a>;
<a name="l00267"></a><a class="code" href="classPMC__NS_1_1MCBackend.html#a02bf80f35d0484502860903645c97844">00267</a>         <a class="code" href="classPMC__NS_1_1MCBackend.html#a02bf80f35d0484502860903645c97844">MCBackend</a>() : <a class="code" href="classPMC__NS_1_1MultiLocation.html">MultiLocation</a>&lt;<a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&gt;() {}
<a name="l00268"></a>00268         
<a name="l00269"></a>00269         <span class="comment">// basic operations</span>
<a name="l00270"></a><a class="code" href="classPMC__NS_1_1MCBackend.html#adc86fa0def152d5a1cc562b496d24287">00270</a>         <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="classPMC__NS_1_1MCBackend.html#adc86fa0def152d5a1cc562b496d24287">acquire</a>() throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00271"></a>00271             <a class="code" href="mc_8h.html#a5ad70ad5432a28d85f74fc4a4c6f0592">mc_acquire</a>(this-&gt;<a class="code" href="classPMC__NS_1_1Location.html#aa3dfc51dd26cabc9da5604388987ffbf">access</a>());
<a name="l00272"></a>00272             <span class="keywordflow">return</span> this-&gt;<a class="code" href="classPMC__NS_1_1Location.html#aa3dfc51dd26cabc9da5604388987ffbf">access</a>();
<a name="l00273"></a>00273         }
<a name="l00274"></a><a class="code" href="classPMC__NS_1_1MCBackend.html#a8300113f9bfe5c5dfa98f6b3bd23cf01">00274</a>         <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1MCBackend.html#a8300113f9bfe5c5dfa98f6b3bd23cf01">release</a>(<span class="keywordtype">bool</span> cleanup=<span class="keyword">false</span>) throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00275"></a>00275             <span class="keywordflow">if</span>(cleanup)
<a name="l00276"></a>00276                 <a class="code" href="mc_8h.html#ae03f0f332b7c5201999164062f5676c1">mc_release_eager</a>(this-&gt;<a class="code" href="classPMC__NS_1_1Location.html#aa3dfc51dd26cabc9da5604388987ffbf">access</a>());
<a name="l00277"></a>00277             <span class="keywordflow">else</span>
<a name="l00278"></a>00278                 <a class="code" href="mc_8h.html#aa3ef2216718f921bf90f8a0b7805830a">mc_release</a>(this-&gt;<a class="code" href="classPMC__NS_1_1Location.html#aa3dfc51dd26cabc9da5604388987ffbf">access</a>());
<a name="l00279"></a>00279         }
<a name="l00280"></a><a class="code" href="classPMC__NS_1_1MCBackend.html#a4e3c3a005b5d278db4db93761018e882">00280</a>         <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1MCBackend.html#a4e3c3a005b5d278db4db93761018e882">fence</a>() throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00281"></a>00281             <a class="code" href="mc_8h.html#af16cc8fd5f5f477feb4f660495d62030">mc_fence</a>();
<a name="l00282"></a>00282         }
<a name="l00283"></a>00283         <span class="comment">// accesses</span>
<a name="l00284"></a><a class="code" href="classPMC__NS_1_1MCBackend.html#a376222e8561b64037749a33d2e833101">00284</a>         <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="classPMC__NS_1_1MCBackend.html#a376222e8561b64037749a33d2e833101">entry_x</a>() throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00285"></a>00285             <a class="code" href="mc_8h.html#a70e343ff41b1ac0fcaf8ae2c201f1a62">mc_entry_x</a>(this-&gt;<a class="code" href="classPMC__NS_1_1Location.html#aa3dfc51dd26cabc9da5604388987ffbf">access</a>());
<a name="l00286"></a>00286             <span class="keywordflow">return</span> this-&gt;<a class="code" href="classPMC__NS_1_1Location.html#aa3dfc51dd26cabc9da5604388987ffbf">access</a>();
<a name="l00287"></a>00287         }
<a name="l00288"></a><a class="code" href="classPMC__NS_1_1MCBackend.html#a40f0e63a936127da4f49450b616c921a">00288</a>         <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1MCBackend.html#a40f0e63a936127da4f49450b616c921a">exit_x</a>(<a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="info__app_8h.html#a735984d41155bc1032e09bece8f8d66d">data</a>,<span class="keywordtype">bool</span> did_read=<span class="keyword">true</span>,<span class="keywordtype">bool</span> did_write=<span class="keyword">true</span>,<span class="keywordtype">bool</span> cleanup=<span class="keyword">false</span>) <span class="keyword">const</span> throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00289"></a>00289             <span class="keywordflow">if</span>(cleanup)
<a name="l00290"></a>00290                 <a class="code" href="mc_8h.html#ae03f0f332b7c5201999164062f5676c1">mc_release_eager</a>(data);
<a name="l00291"></a>00291             <span class="keywordflow">else</span>
<a name="l00292"></a>00292                 <a class="code" href="mc_8h.html#a65bfbf620fa189954f2dd9a5c01af248">mc_exit_x</a>(data);
<a name="l00293"></a>00293         }
<a name="l00294"></a><a class="code" href="classPMC__NS_1_1MCBackend.html#a352d2b887e37307dfedafd178796fb79">00294</a>         <span class="keyword">const</span> <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="classPMC__NS_1_1MCBackend.html#a352d2b887e37307dfedafd178796fb79">entry_ro</a>() throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00295"></a>00295             <span class="keywordflow">if</span>(<a class="code" href="classPMC__NS_1_1MCBackend.html#aa44aca3e6a0c3bca72dc90b85fedc0be">atomic</a>()||<a class="code" href="classIsConst.html">IsConst&lt;T&gt;::value</a>)
<a name="l00296"></a>00296                 <a class="code" href="mc_8h.html#ae81d71fb2b07c54fea38acd451f6e66d">mc_entry_ro</a>(this-&gt;<a class="code" href="classPMC__NS_1_1Location.html#aa3dfc51dd26cabc9da5604388987ffbf">access</a>());
<a name="l00297"></a>00297             <span class="keywordflow">else</span>
<a name="l00298"></a>00298                 <a class="code" href="mc_8h.html#a70e343ff41b1ac0fcaf8ae2c201f1a62">mc_entry_x</a>(this-&gt;<a class="code" href="classPMC__NS_1_1Location.html#aa3dfc51dd26cabc9da5604388987ffbf">access</a>());
<a name="l00299"></a>00299             <span class="keywordflow">return</span> this-&gt;<a class="code" href="classPMC__NS_1_1Location.html#aa3dfc51dd26cabc9da5604388987ffbf">access</a>();
<a name="l00300"></a>00300         }
<a name="l00301"></a><a class="code" href="classPMC__NS_1_1MCBackend.html#a45d7af4349225694d9399c36580a7a9e">00301</a>         <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1MCBackend.html#a45d7af4349225694d9399c36580a7a9e">exit_ro</a>(<span class="keyword">const</span> <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="info__app_8h.html#a735984d41155bc1032e09bece8f8d66d">data</a>,<span class="keywordtype">bool</span> did_read=<span class="keyword">true</span>,<span class="keywordtype">bool</span> cleanup=<span class="keyword">false</span>) <span class="keyword">const</span> throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00302"></a>00302             <span class="keywordflow">if</span>(<a class="code" href="classPMC__NS_1_1MCBackend.html#aa44aca3e6a0c3bca72dc90b85fedc0be">atomic</a>()||<a class="code" href="classIsConst.html">IsConst&lt;T&gt;::value</a>){
<a name="l00303"></a>00303                 <span class="keywordflow">if</span>(did_read)
<a name="l00304"></a>00304                     <a class="code" href="mc_8h.html#a977f04e43781834f9f7e4176b4736ed3">mc_exit_ro</a>(data);
<a name="l00305"></a>00305             }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(cleanup)
<a name="l00306"></a>00306                 <a class="code" href="mc_8h.html#ae03f0f332b7c5201999164062f5676c1">mc_release_eager</a>(data);
<a name="l00307"></a>00307             <span class="keywordflow">else</span>
<a name="l00308"></a>00308                 <a class="code" href="mc_8h.html#a65bfbf620fa189954f2dd9a5c01af248">mc_exit_x</a>(data);
<a name="l00309"></a>00309         }
<a name="l00310"></a><a class="code" href="classPMC__NS_1_1MCBackend.html#a872e144b39e951ee99d68d5a804fd600">00310</a>         <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1MCBackend.html#a872e144b39e951ee99d68d5a804fd600">flush</a>(<a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="info__app_8h.html#a735984d41155bc1032e09bece8f8d66d">data</a>,<span class="keywordtype">bool</span> did_read=<span class="keyword">true</span>,<span class="keywordtype">bool</span> did_write=<span class="keyword">true</span>) <span class="keyword">const</span> throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00311"></a>00311             <span class="keywordflow">if</span>(did_read||did_write)
<a name="l00312"></a>00312                 <a class="code" href="mc_8h.html#a5d22962955d7581f250abacc83c59830">mc_flush</a>(data);
<a name="l00313"></a>00313         }
<a name="l00314"></a>00314         <span class="keywordtype">bool</span> <a class="code" href="classPMC__NS_1_1MCBackend.html#aa44aca3e6a0c3bca72dc90b85fedc0be">atomic</a>() <a class="code" href="device_8h.html#a4588b12eae6951d9c976a65d6869b47f">const</a> <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline,<a class="code" href="device_8h.html#a39d092325e10e124a07dd5347d9568b1">pure</a>)) {
<a name="l00315"></a>00315             <span class="comment">// MicroBlaze cache operates on words, but a local running thead can observe separate bytes</span>
<a name="l00316"></a>00316             <span class="keywordflow">return</span> <a class="code" href="classPMC__NS_1_1Location.html#adc133997e8ca5fefcf78518c520323aa">base::isWordType</a>()||<span class="keyword">sizeof</span>(<a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>)&lt;=<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>);
<a name="l00317"></a>00317         }
<a name="l00318"></a>00318     } <a class="code" href="namespacePMC__NS.html#a7c24aec900eb44648dda696dbcb5951b">ATTR_DATA_ALIGNED</a>;
<a name="l00319"></a>00319 
<a name="l00320"></a>00320     <span class="comment">// Ring consistency</span>
<a name="l00321"></a>00321     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00322"></a><a class="code" href="classPMC__NS_1_1RCBackend.html">00322</a>     <span class="keyword">class </span><a class="code" href="classPMC__NS_1_1RCBackend.html">RCBackend</a> : <span class="keyword">public</span> <a class="code" href="classPMC__NS_1_1MultiLocation.html">MultiLocation</a>&lt;T&gt;, <span class="keyword">public</span> <a class="code" href="classPMC__NS_1_1NoAlloc.html">NoAlloc</a> {
<a name="l00323"></a>00323     <span class="keyword">public</span>:
<a name="l00324"></a><a class="code" href="classPMC__NS_1_1RCBackend.html#aade48a10e296109596973dad860fd52b">00324</a>         <span class="keyword">typedef</span> <a class="code" href="classPMC__NS_1_1MultiLocation.html">MultiLocation&lt;T&gt;</a> <a class="code" href="classPMC__NS_1_1RCBackend.html#aade48a10e296109596973dad860fd52b">base</a>;
<a name="l00325"></a>00325         <span class="comment">// contents are automatically zeroed</span>
<a name="l00326"></a><a class="code" href="classPMC__NS_1_1RCBackend.html#a91420e0967c87edaae7f9241ba1b276e">00326</a>         <a class="code" href="classPMC__NS_1_1RCBackend.html#a91420e0967c87edaae7f9241ba1b276e">RCBackend</a>() : <a class="code" href="classPMC__NS_1_1MultiLocation.html">MultiLocation</a>&lt;<a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&gt;() {}
<a name="l00327"></a>00327         
<a name="l00328"></a>00328         <span class="comment">// basic operations</span>
<a name="l00329"></a><a class="code" href="classPMC__NS_1_1RCBackend.html#a8a2abc94444009b66f1af2864b42eb98">00329</a>         <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="classPMC__NS_1_1RCBackend.html#a8a2abc94444009b66f1af2864b42eb98">acquire</a>() throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00330"></a>00330             <a class="code" href="rc_8h.html#af49ae053ccfcb2e2314d2ed0bc0b58cd">rc_entry_x</a>(this-&gt;<a class="code" href="classPMC__NS_1_1Location.html#aa3dfc51dd26cabc9da5604388987ffbf">access</a>());
<a name="l00331"></a>00331             <span class="keywordflow">return</span> this-&gt;<a class="code" href="classPMC__NS_1_1Location.html#aa3dfc51dd26cabc9da5604388987ffbf">access</a>();
<a name="l00332"></a>00332         }
<a name="l00333"></a><a class="code" href="classPMC__NS_1_1RCBackend.html#a6e8efa51769bff243e908f056ee70ad4">00333</a>         <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1RCBackend.html#a6e8efa51769bff243e908f056ee70ad4">release</a>(<span class="keywordtype">bool</span> cleanup=<span class="keyword">false</span>) throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00334"></a>00334             <a class="code" href="rc_8h.html#a7d4242c556b156871b4df51ac6f165d6">rc_exit_x</a>(this-&gt;<a class="code" href="classPMC__NS_1_1Location.html#aa3dfc51dd26cabc9da5604388987ffbf">access</a>());
<a name="l00335"></a>00335             <span class="keywordflow">if</span>(cleanup)
<a name="l00336"></a>00336                 <a class="code" href="lock_8h.html#aa1f74dde05eda1bb3e922623237cbf88" title="Unlock and give back to server When result &lt; 0: LR_LOCAL: lock was local LR_STOLEN: already stolen be...">lck_destroy</a>((<span class="keywordtype">void</span>*)this-&gt;<a class="code" href="classPMC__NS_1_1Location.html#aa3dfc51dd26cabc9da5604388987ffbf">access</a>());
<a name="l00337"></a>00337         }
<a name="l00338"></a><a class="code" href="classPMC__NS_1_1RCBackend.html#ab76f17f7d2b5463922d72aadf8c6345d">00338</a>         <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1RCBackend.html#ab76f17f7d2b5463922d72aadf8c6345d">fence</a>() throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00339"></a>00339             <a class="code" href="rc_8h.html#a62ecf0b7612be9d459cc8d45224e6c5a">rc_fence</a>();
<a name="l00340"></a>00340         }
<a name="l00341"></a>00341         <span class="comment">// accesses</span>
<a name="l00342"></a><a class="code" href="classPMC__NS_1_1RCBackend.html#a185f5aad0b710da9fa733c6ec0e92b82">00342</a>         <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="classPMC__NS_1_1RCBackend.html#a185f5aad0b710da9fa733c6ec0e92b82">entry_x</a>() throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00343"></a>00343             <span class="keywordflow">return</span> this-&gt;<a class="code" href="classPMC__NS_1_1RCBackend.html#a8a2abc94444009b66f1af2864b42eb98">acquire</a>();
<a name="l00344"></a>00344         }
<a name="l00345"></a><a class="code" href="classPMC__NS_1_1RCBackend.html#a1c425b566abb0a2ba78b7f3de5375848">00345</a>         <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1RCBackend.html#a1c425b566abb0a2ba78b7f3de5375848">exit_x</a>(<a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="info__app_8h.html#a735984d41155bc1032e09bece8f8d66d">data</a>,<span class="keywordtype">bool</span> did_read=<span class="keyword">true</span>,<span class="keywordtype">bool</span> did_write=<span class="keyword">true</span>,<span class="keywordtype">bool</span> cleanup=<span class="keyword">false</span>) <span class="keyword">const</span> throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00346"></a>00346             <a class="code" href="rc_8h.html#a7d4242c556b156871b4df51ac6f165d6">rc_exit_x</a>(data);
<a name="l00347"></a>00347             <span class="keywordflow">if</span>(cleanup)
<a name="l00348"></a>00348                 <a class="code" href="lock_8h.html#aa1f74dde05eda1bb3e922623237cbf88" title="Unlock and give back to server When result &lt; 0: LR_LOCAL: lock was local LR_STOLEN: already stolen be...">lck_destroy</a>((<span class="keywordtype">void</span>*)&amp;data);
<a name="l00349"></a>00349         }
<a name="l00350"></a><a class="code" href="classPMC__NS_1_1RCBackend.html#a512c1c46c38992009f19e031f9f09054">00350</a>         <span class="keyword">const</span> <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="classPMC__NS_1_1RCBackend.html#a512c1c46c38992009f19e031f9f09054">entry_ro</a>() throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00351"></a>00351             <span class="keywordflow">if</span>(<a class="code" href="classPMC__NS_1_1RCBackend.html#a81ac1c2d5be2013a14b934f72a3310fd">atomic</a>()||<a class="code" href="classIsConst.html">IsConst&lt;T&gt;::value</a>)
<a name="l00352"></a>00352                 <a class="code" href="rc_8h.html#a305922751b92312cb13e775443d1b451">rc_entry_ro</a>(this-&gt;<a class="code" href="classPMC__NS_1_1Location.html#aa3dfc51dd26cabc9da5604388987ffbf">access</a>());
<a name="l00353"></a>00353             <span class="keywordflow">else</span>
<a name="l00354"></a>00354                 <a class="code" href="rc_8h.html#af49ae053ccfcb2e2314d2ed0bc0b58cd">rc_entry_x</a>(this-&gt;<a class="code" href="classPMC__NS_1_1Location.html#aa3dfc51dd26cabc9da5604388987ffbf">access</a>());
<a name="l00355"></a>00355             <span class="keywordflow">return</span> this-&gt;<a class="code" href="classPMC__NS_1_1Location.html#aa3dfc51dd26cabc9da5604388987ffbf">access</a>();
<a name="l00356"></a>00356         }
<a name="l00357"></a><a class="code" href="classPMC__NS_1_1RCBackend.html#a019c0bc76d6c2d270fc71cddd6ad6acc">00357</a>         <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1RCBackend.html#a019c0bc76d6c2d270fc71cddd6ad6acc">exit_ro</a>(<span class="keyword">const</span> <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="info__app_8h.html#a735984d41155bc1032e09bece8f8d66d">data</a>,<span class="keywordtype">bool</span> did_read=<span class="keyword">true</span>,<span class="keywordtype">bool</span> cleanup=<span class="keyword">false</span>) <span class="keyword">const</span> throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00358"></a>00358             <span class="keywordflow">if</span>(<a class="code" href="classPMC__NS_1_1RCBackend.html#a81ac1c2d5be2013a14b934f72a3310fd">atomic</a>()||<a class="code" href="classIsConst.html">IsConst&lt;T&gt;::value</a>){
<a name="l00359"></a>00359                 <span class="keywordflow">if</span>(did_read)
<a name="l00360"></a>00360                     <a class="code" href="rc_8h.html#a5e9d0d405ef58816ded26ed506af25c1">rc_exit_ro</a>(data);
<a name="l00361"></a>00361             }<span class="keywordflow">else</span>{
<a name="l00362"></a>00362                 <a class="code" href="rc_8h.html#a7d4242c556b156871b4df51ac6f165d6">rc_exit_x</a>(data);
<a name="l00363"></a>00363                 <span class="keywordflow">if</span>(cleanup)
<a name="l00364"></a>00364                     <a class="code" href="lock_8h.html#aa1f74dde05eda1bb3e922623237cbf88" title="Unlock and give back to server When result &lt; 0: LR_LOCAL: lock was local LR_STOLEN: already stolen be...">lck_destroy</a>((<span class="keywordtype">void</span>*)&amp;data);
<a name="l00365"></a>00365             }
<a name="l00366"></a>00366         }
<a name="l00367"></a><a class="code" href="classPMC__NS_1_1RCBackend.html#a5d9be37d2cb0d23c02ef18147aed5921">00367</a>         <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1RCBackend.html#a5d9be37d2cb0d23c02ef18147aed5921">flush</a>(<a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="info__app_8h.html#a735984d41155bc1032e09bece8f8d66d">data</a>,<span class="keywordtype">bool</span> did_read=<span class="keyword">true</span>,<span class="keywordtype">bool</span> did_write=<span class="keyword">true</span>) <span class="keyword">const</span> throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00368"></a>00368             <span class="keywordflow">if</span>(did_write)
<a name="l00369"></a>00369                 <a class="code" href="rc_8h.html#a496a533faf21d203a8c673a5b9de791a">rc_flush</a>(data);
<a name="l00370"></a>00370         }
<a name="l00371"></a>00371         <span class="keywordtype">bool</span> <a class="code" href="classPMC__NS_1_1RCBackend.html#a81ac1c2d5be2013a14b934f72a3310fd">atomic</a>() <a class="code" href="device_8h.html#a4588b12eae6951d9c976a65d6869b47f">const</a> <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline,<a class="code" href="device_8h.html#a39d092325e10e124a07dd5347d9568b1">pure</a>)) {
<a name="l00372"></a>00372             <span class="comment">// rc_flush writes full words, if possible, but a local running thead can observe separate bytes</span>
<a name="l00373"></a>00373             <span class="keywordflow">return</span> <a class="code" href="classPMC__NS_1_1Location.html#adc133997e8ca5fefcf78518c520323aa">base::isWordType</a>()||<span class="keyword">sizeof</span>(<a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>)&lt;=<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>);
<a name="l00374"></a>00374         }
<a name="l00375"></a>00375     };
<a name="l00376"></a>00376 
<a name="l00377"></a>00377     <span class="comment">// Using fifo memory as scratch pad</span>
<a name="l00378"></a>00378     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00379"></a><a class="code" href="classPMC__NS_1_1SPMBackend.html">00379</a>     <span class="keyword">class </span><a class="code" href="classPMC__NS_1_1SPMBackend.html">SPMBackend</a> : <span class="keyword">public</span> <a class="code" href="classPMC__NS_1_1MultiLocation.html">MultiLocation</a>&lt;T&gt;, <span class="keyword">public</span> <a class="code" href="classPMC__NS_1_1SharedAlloc.html">SharedAlloc</a> {
<a name="l00380"></a>00380     <span class="keyword">public</span>:
<a name="l00381"></a><a class="code" href="classPMC__NS_1_1SPMBackend.html#aa5a2a22da6f8ba65e2f4f0ea95fbd7a0">00381</a>         <span class="keyword">typedef</span> <a class="code" href="classPMC__NS_1_1MultiLocation.html">MultiLocation&lt;T&gt;</a> <a class="code" href="classPMC__NS_1_1SPMBackend.html#aa5a2a22da6f8ba65e2f4f0ea95fbd7a0">base</a>;
<a name="l00382"></a><a class="code" href="classPMC__NS_1_1SPMBackend.html#a50cbf466160e5123e434a4e82ce326f0">00382</a>         <a class="code" href="classPMC__NS_1_1SPMBackend.html#a50cbf466160e5123e434a4e82ce326f0">SPMBackend</a>() : <a class="code" href="classPMC__NS_1_1MultiLocation.html">MultiLocation</a>&lt;<a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&gt;() {}
<a name="l00383"></a>00383     
<a name="l00384"></a>00384         <span class="comment">// accesses</span>
<a name="l00385"></a><a class="code" href="classPMC__NS_1_1SPMBackend.html#a842b04f465b862d6ffd8500e49b72ea9">00385</a>         <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="classPMC__NS_1_1SPMBackend.html#a842b04f465b862d6ffd8500e49b72ea9">entry_x</a>() throw()  <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00386"></a>00386             this-&gt;<a class="code" href="classPMC__NS_1_1Location.html#a7d001b3c3e60b6ee51d72232511991ff">acquire</a>();
<a name="l00387"></a>00387             <span class="keywordflow">return</span> local_copy();
<a name="l00388"></a>00388         }
<a name="l00389"></a><a class="code" href="classPMC__NS_1_1SPMBackend.html#a5a968d5d488b19fa0cd9e872c75ae92e">00389</a>         <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1SPMBackend.html#a5a968d5d488b19fa0cd9e872c75ae92e">exit_x</a>(<a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="info__app_8h.html#a735984d41155bc1032e09bece8f8d66d">data</a>,<span class="keywordtype">bool</span> did_read=<span class="keyword">true</span>,<span class="keywordtype">bool</span> did_write=<span class="keyword">true</span>,<span class="keywordtype">bool</span> cleanup=<span class="keyword">false</span>) throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00390"></a>00390             <a class="code" href="classPMC__NS_1_1SPMBackend.html#a1d7717b1934c9e6465ee727e089cce9e">flush</a>(data,<span class="keyword">true</span>,did_write);
<a name="l00391"></a>00391             this-&gt;<a class="code" href="classPMC__NS_1_1Location.html#ad71b22e09c6f5c8fa9d8a81132e80e80">release</a>(cleanup);
<a name="l00392"></a>00392             <a class="code" href="malloc_8h.html#a1faf09e6948b2f82d7e938077cff93f6">ffree</a>(&amp;data);
<a name="l00393"></a>00393         }
<a name="l00394"></a><a class="code" href="classPMC__NS_1_1SPMBackend.html#a662bce3a99d5f0eacab91891928abb45">00394</a>         <span class="keyword">const</span> <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="classPMC__NS_1_1SPMBackend.html#a662bce3a99d5f0eacab91891928abb45">entry_ro</a>() throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00395"></a>00395             <span class="keyword">const</span> <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>* spm;
<a name="l00396"></a>00396             <span class="keywordflow">if</span>(<a class="code" href="classPMC__NS_1_1SPMBackend.html#a223d729e1815fe3548cae4419c1468ff">atomic</a>()||<a class="code" href="classIsConst.html">IsConst&lt;T&gt;::value</a>)
<a name="l00397"></a>00397                 spm=&amp;local_copy();
<a name="l00398"></a>00398             <span class="keywordflow">else</span>{
<a name="l00399"></a>00399                 this-&gt;<a class="code" href="classPMC__NS_1_1Location.html#a7d001b3c3e60b6ee51d72232511991ff">acquire</a>();
<a name="l00400"></a>00400                 spm=&amp;local_copy();
<a name="l00401"></a>00401                 this-&gt;<a class="code" href="classPMC__NS_1_1Location.html#ad71b22e09c6f5c8fa9d8a81132e80e80">release</a>();
<a name="l00402"></a>00402             }
<a name="l00403"></a>00403             <a class="code" href="classPMC__NS_1_1SPMBackend.html#a1d7717b1934c9e6465ee727e089cce9e">flush</a>(this-&gt;<a class="code" href="classPMC__NS_1_1Location.html#aa3dfc51dd26cabc9da5604388987ffbf">access</a>(),<span class="keyword">true</span>,<span class="keyword">false</span>);
<a name="l00404"></a>00404             <span class="keywordflow">return</span> *spm;
<a name="l00405"></a>00405         }
<a name="l00406"></a><a class="code" href="classPMC__NS_1_1SPMBackend.html#af11f62a8749c4cd64bb1879332db21df">00406</a>         <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1SPMBackend.html#af11f62a8749c4cd64bb1879332db21df">exit_ro</a>(<span class="keyword">const</span> <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="info__app_8h.html#a735984d41155bc1032e09bece8f8d66d">data</a>,<span class="keywordtype">bool</span> did_read=<span class="keyword">true</span>,<span class="keywordtype">bool</span> cleanup=<span class="keyword">false</span>) <span class="keyword">const</span> throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00407"></a>00407             <a class="code" href="malloc_8h.html#a1faf09e6948b2f82d7e938077cff93f6">ffree</a>(const_cast&lt;void*&gt;((<span class="keyword">const</span> <span class="keywordtype">void</span>*)&amp;data));
<a name="l00408"></a>00408             <span class="keywordflow">if</span>(cleanup)
<a name="l00409"></a>00409                 this-&gt;<a class="code" href="classPMC__NS_1_1Location.html#ad71b22e09c6f5c8fa9d8a81132e80e80">release</a>(<span class="keyword">true</span>);
<a name="l00410"></a>00410         }
<a name="l00411"></a><a class="code" href="classPMC__NS_1_1SPMBackend.html#a1d7717b1934c9e6465ee727e089cce9e">00411</a>         <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1SPMBackend.html#a1d7717b1934c9e6465ee727e089cce9e">flush</a>(<a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="info__app_8h.html#a735984d41155bc1032e09bece8f8d66d">data</a>,<span class="keywordtype">bool</span> did_read=<span class="keyword">true</span>,<span class="keywordtype">bool</span> did_write=<span class="keyword">true</span>) throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00412"></a>00412             <span class="keywordflow">if</span>(did_write)
<a name="l00413"></a>00413                 *<span class="keyword">const_cast&lt;</span>typename <a class="code" href="structclean__type.html#a5e89bbd79b348e0fc1f596613fb96c04">clean_type&lt;T&gt;::type</a>*<span class="keyword">&gt;</span>(&amp;this-&gt;<a class="code" href="classPMC__NS_1_1Location.html#aa3dfc51dd26cabc9da5604388987ffbf">access</a>())=data;
<a name="l00414"></a>00414             <span class="keywordflow">if</span>(did_write||did_read)
<a name="l00415"></a>00415                 <a class="code" href="mc_8h.html#a5d22962955d7581f250abacc83c59830">mc_flush</a>(this-&gt;<a class="code" href="classPMC__NS_1_1Location.html#aa3dfc51dd26cabc9da5604388987ffbf">access</a>());
<a name="l00416"></a>00416         }
<a name="l00417"></a>00417         <span class="keywordtype">bool</span> <a class="code" href="classPMC__NS_1_1SPMBackend.html#a223d729e1815fe3548cae4419c1468ff">atomic</a>() <a class="code" href="device_8h.html#a4588b12eae6951d9c976a65d6869b47f">const</a> <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline,<a class="code" href="device_8h.html#a39d092325e10e124a07dd5347d9568b1">pure</a>)) {
<a name="l00418"></a>00418             <span class="comment">// Copy from SPM (through cache) to SDRAM is word-based</span>
<a name="l00419"></a>00419             <span class="keywordflow">return</span> <span class="keyword">sizeof</span>(<a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>)&lt;=<span class="keyword">sizeof</span>(<span class="keywordtype">long</span>);
<a name="l00420"></a>00420         }
<a name="l00421"></a>00421 
<a name="l00422"></a>00422     <span class="keyword">protected</span>:
<a name="l00423"></a>00423         <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; local_copy() throw() {
<a name="l00424"></a>00424             <span class="keyword">typename</span> <a class="code" href="structclean__type.html#a5e89bbd79b348e0fc1f596613fb96c04">clean_type&lt;T&gt;::type</a>* spm=(<span class="keyword">typename</span> <a class="code" href="structclean__type.html#a5e89bbd79b348e0fc1f596613fb96c04">clean_type&lt;T&gt;::type</a>*)<a class="code" href="malloc_8h.html#a215d133d93cf279ec13ddf877c4d1525">fmalloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>));
<a name="l00425"></a>00425             <span class="keywordflow">if</span>(<a class="code" href="api_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(!spm))Error(<span class="stringliteral">&quot;out of SPM memory for local copy of var %p (size 0x%lu)&quot;</span>,<span class="keyword">this</span>,<span class="keyword">sizeof</span>(*<span class="keyword">this</span>));
<a name="l00426"></a>00426             *spm=this-&gt;<a class="code" href="classPMC__NS_1_1Location.html#aa3dfc51dd26cabc9da5604388987ffbf">access</a>();
<a name="l00427"></a>00427             <span class="keywordflow">return</span> *spm;
<a name="l00428"></a>00428         }
<a name="l00429"></a>00429     } <a class="code" href="namespacePMC__NS.html#a7c24aec900eb44648dda696dbcb5951b">ATTR_DATA_ALIGNED</a>;
<a name="l00430"></a>00430 <span class="comment"></span>
<a name="l00431"></a>00431 <span class="comment">    //////////////////////////////////////////</span>
<a name="l00432"></a>00432 <span class="comment"></span>    <span class="comment">// Backend selection</span>
<a name="l00433"></a>00433 
<a name="l00434"></a>00434     <span class="keyword">struct </span>local;
<a name="l00435"></a>00435     <span class="keyword">struct </span>sc;
<a name="l00436"></a>00436     <span class="keyword">struct </span>cache;
<a name="l00437"></a>00437     <span class="keyword">struct </span>ring;
<a name="l00438"></a>00438     <span class="keyword">struct </span>spm;
<a name="l00439"></a>00439 
<a name="l00440"></a><a class="code" href="classPMC__NS_1_1Backend.html">00440</a>     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T,<span class="keyword">typename</span> B=local&gt; <span class="keyword">class </span><a class="code" href="classPMC__NS_1_1Backend.html">Backend</a> {};
<a name="l00441"></a><a class="code" href="pmc_8h.html#a59817ca77e36042a91d83e19240acd2e">00441</a> <span class="preprocessor">#define PMC_BACKEND_IMPL(base...) : public base { public: Backend() : base() {} };</span>
<a name="l00442"></a>00442 <span class="preprocessor"></span>    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">class </span>Backend&lt;<a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>,local&gt;    <a class="code" href="namespacePMC__NS.html#a46bcc184163dabe50052234d14456343">PMC_BACKEND_IMPL</a>(LocalBackend&lt;<a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&gt;)
<a name="l00443"></a>00443     template &lt;typename <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&gt; class Backend&lt;<a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>,sc&gt;       <a class="code" href="namespacePMC__NS.html#a46bcc184163dabe50052234d14456343">PMC_BACKEND_IMPL</a>(SCBackend&lt;<a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&gt;)
<a name="l00444"></a>00444     template &lt;typename <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&gt; class Backend&lt;<a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>,cache&gt;    <a class="code" href="namespacePMC__NS.html#a46bcc184163dabe50052234d14456343">PMC_BACKEND_IMPL</a>(MCBackend&lt;<a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&gt;)
<a name="l00445"></a>00445     template &lt;typename <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&gt; class Backend&lt;<a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>,ring&gt;     <a class="code" href="namespacePMC__NS.html#a46bcc184163dabe50052234d14456343">PMC_BACKEND_IMPL</a>(RCBackend&lt;<a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&gt;)
<a name="l00446"></a>00446     template &lt;typename <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&gt; class Backend&lt;<a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>,spm&gt;      <a class="code" href="namespacePMC__NS.html#a46bcc184163dabe50052234d14456343">PMC_BACKEND_IMPL</a>(SPMBackend&lt;<a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&gt;)
<a name="l00447"></a>00447 
<a name="l00448"></a>00448 #define <a class="code" href="pmc_8h.html#aeee32178c8ffaa667fcfb1a3bd2849e0">PMC_VAR_ATTR_LOCAL</a>
<a name="l00449"></a>00449 #define <a class="code" href="pmc_8h.html#aa6482cc54b75e65b00adeadc50c64e65">PMC_VAR_ATTR_SC</a>     <a class="code" href="kernel__types_8h.html#a77c62d1a9481475b2a56970e64d498d2" title="Assume data to be local to a processor, which allows caching without coherency.">ATTR_DATA_CACHEABLE</a>
<a name="l00450"></a>00450 #define <a class="code" href="pmc_8h.html#ab6bffe3ac3ecbfe62e8fb902aac31a68">PMC_VAR_ATTR_CACHE</a>  <a class="code" href="namespacePMC__NS.html#a7c24aec900eb44648dda696dbcb5951b">ATTR_DATA_ALIGNED</a>
<a name="l00451"></a>00451 #define <a class="code" href="pmc_8h.html#a341457500fa067b08a2284bd2f1b35f3">PMC_VAR_ATTR_RING</a>   <a class="code" href="rc_8h.html#a82ac61cdce6eb3c3b788bb437059e226">ATTR_RC</a>
<a name="l00452"></a>00452 #define <a class="code" href="pmc_8h.html#ae652bf33a8a491d3ff31ac588e925bb3">PMC_VAR_ATTR_SPM</a>    <a class="code" href="namespacePMC__NS.html#a7c24aec900eb44648dda696dbcb5951b">ATTR_DATA_ALIGNED</a>
<a name="l00453"></a>00453 
<a name="l00454"></a>00454 #define <a class="code" href="pmc_8h.html#a930a3d90be445e4050094f58bcefadca">PMC_VAR_LOCAL</a>(type,var) ::<a class="code" href="pmc_8h.html#a981322c8c0c041eb1c3bd694fcabc78b">PMC_NS</a>::Var&lt;type,::PMC_NS::local&gt;     var <a class="code" href="pmc_8h.html#aeee32178c8ffaa667fcfb1a3bd2849e0">PMC_VAR_ATTR_LOCAL</a>;
<a name="l00455"></a>00455 <span class="preprocessor">#define PMC_VAR_SC(type,var)    ::PMC_NS::Var&lt;type,::PMC_NS::sc&gt;        var PMC_VAR_ATTR_SC;</span>
<a name="l00456"></a>00456 <span class="preprocessor"></span><span class="preprocessor">#define PMC_VAR_CACHE(type,var) ::PMC_NS::Var&lt;type,::PMC_NS::cache&gt;     var PMC_VAR_ATTR_CACHE;</span>
<a name="l00457"></a>00457 <span class="preprocessor"></span><span class="preprocessor">#define PMC_VAR_RING(type,var)  ::PMC_NS::Var&lt;type,::PMC_NS::ring&gt;      var PMC_VAR_ATTR_RING;</span>
<a name="l00458"></a>00458 <span class="preprocessor"></span><span class="preprocessor">#define PMC_VAR_SPM(type,var)   ::PMC_NS::Var&lt;type,::PMC_NS::spm&gt;       var PMC_VAR_ATTR_SPM;</span>
<a name="l00459"></a>00459 <span class="preprocessor"></span>
<a name="l00460"></a>00460 <span class="preprocessor">#define NEW_PMC_VAR_LOCAL(type,var) ::PMC_NS::Var&lt;type,::PMC_NS::local&gt;*    var=new ::PMC_NS::Var&lt;type,::PMC_NS::local&gt;();</span>
<a name="l00461"></a>00461 <span class="preprocessor"></span><span class="preprocessor">#define NEW_PMC_VAR_SC(type,var)    ::PMC_NS::Var&lt;type,::PMC_NS::sc&gt;*       var=new ::PMC_NS::Var&lt;type,::PMC_NS::sc&gt;();</span>
<a name="l00462"></a>00462 <span class="preprocessor"></span><span class="preprocessor">#define NEW_PMC_VAR_CACHE(type,var) ::PMC_NS::Var&lt;type,::PMC_NS::cache&gt;*    var=new ::PMC_NS::Var&lt;type,::PMC_NS::cache&gt;();</span>
<a name="l00463"></a>00463 <span class="preprocessor"></span><span class="preprocessor">#define NEW_PMC_VAR_SPM(type,var)   ::PMC_NS::Var&lt;type,::PMC_NS::spm&gt;*      var=new ::PMC_NS::Var&lt;type,::PMC_NS::spm&gt;();</span>
<a name="l00464"></a>00464 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00465"></a>00465 <span class="comment">    //////////////////////////////////////////</span>
<a name="l00466"></a>00466 <span class="comment"></span>    <span class="comment">// Frontend</span>
<a name="l00467"></a>00467     
<a name="l00468"></a><a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">00468</a>     template &lt;typename V,typename T=typename V::type&gt; class <a class="code" href="classPMC__NS_1_1Scope.html">Scope</a>;
<a name="l00469"></a>00469     template &lt;typename V&gt; class <a class="code" href="classPMC__NS_1_1ScopeX.html">ScopeX</a>;
<a name="l00470"></a>00470     template &lt;typename V&gt; class <a class="code" href="classPMC__NS_1_1ScopeRO.html">ScopeRO</a>;
<a name="l00471"></a>00471     template &lt;unsigned int L,typename T,typename B=sc&gt; class <a class="code" href="classPMC__NS_1_1VarPtrArray.html">VarPtrArray</a>;
<a name="l00472"></a>00472 
<a name="l00473"></a>00473     template &lt;typename T,typename B=sc&gt;
<a name="l00474"></a><a class="code" href="classPMC__NS_1_1Var.html">00474</a>     class <a class="code" href="classPMC__NS_1_1Var.html">Var</a> : <span class="keyword">protected</span> <a class="code" href="classPMC__NS_1_1Backend.html">Backend</a>&lt;T,B&gt; {
<a name="l00475"></a>00475     <span class="keyword">public</span>:
<a name="l00476"></a><a class="code" href="classPMC__NS_1_1Var.html#a38b75979f56c1d8decc03c86ee66692c">00476</a>         <span class="keyword">typedef</span> <a class="code" href="classPMC__NS_1_1Backend.html">Backend&lt;T,B&gt;</a> <a class="code" href="classPMC__NS_1_1Var.html#a38b75979f56c1d8decc03c86ee66692c">base</a>;
<a name="l00477"></a><a class="code" href="classPMC__NS_1_1Var.html#acfd8d98831b3a6aab1f8a112dd979939">00477</a>         <span class="keyword">typedef</span> <a class="code" href="classPMC__NS_1_1Backend.html">base</a> <a class="code" href="classPMC__NS_1_1Var.html#acfd8d98831b3a6aab1f8a112dd979939">backend</a>;
<a name="l00478"></a><a class="code" href="classPMC__NS_1_1Var.html#ac99828ca613f2de29667bb485a25bc61">00478</a>         <span class="keyword">typedef</span> <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a> <a class="code" href="classPMC__NS_1_1Var.html#ac99828ca613f2de29667bb485a25bc61">type</a>;
<a name="l00479"></a><a class="code" href="classPMC__NS_1_1Var.html#afc672fa070ff7f91a049c1596129dd3c">00479</a>         <span class="keyword">typedef</span> <a class="code" href="classPMC__NS_1_1Var.html">Var&lt;const T,B&gt;</a> <a class="code" href="classPMC__NS_1_1Var.html#afc672fa070ff7f91a049c1596129dd3c">CVar</a>;
<a name="l00480"></a>00480 
<a name="l00481"></a>00481         <span class="comment">// variable construction</span>
<a name="l00482"></a><a class="code" href="classPMC__NS_1_1Var.html#af9ce62af93f8bb318d90181e3f073f6b">00482</a>         <a class="code" href="classPMC__NS_1_1Var.html#af9ce62af93f8bb318d90181e3f073f6b">Var</a>() throw() : <a class="code" href="classPMC__NS_1_1Backend.html">base</a>() {}
<a name="l00483"></a><a class="code" href="classPMC__NS_1_1Var.html#ae43ca28e8d46af804af977d02a421a1a">00483</a>         <a class="code" href="classPMC__NS_1_1Var.html#ae43ca28e8d46af804af977d02a421a1a">Var</a>(<span class="keyword">const</span> <a class="code" href="classPMC__NS_1_1Var.html">Var</a>&amp; v) : <a class="code" href="classPMC__NS_1_1Backend.html">base</a>() { operator=(v); }
<a name="l00484"></a>00484 
<a name="l00485"></a>00485         <span class="comment">// access entries</span>
<a name="l00486"></a><a class="code" href="classPMC__NS_1_1Var.html#a2e60ecec4b34c54478fcddea3281a9b4">00486</a>         <a class="code" href="classPMC__NS_1_1ScopeX.html">ScopeX&lt;Var&gt;</a>   <a class="code" href="classPMC__NS_1_1Var.html#a2e60ecec4b34c54478fcddea3281a9b4">entry_x</a>()         throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00487"></a>00487             <span class="keywordflow">return</span> entry_x&lt;ScopeX&lt;Var&gt;,<a class="code" href="classPMC__NS_1_1Var.html">Var</a>&gt;(*this); }
<a name="l00488"></a>00488 
<a name="l00489"></a><a class="code" href="classPMC__NS_1_1Var.html#af027fa3f6ab9cc35392264af19e1f61a">00489</a>         <a class="code" href="classPMC__NS_1_1ScopeRO.html">ScopeRO&lt;Var&gt;</a>  <a class="code" href="classPMC__NS_1_1Var.html#af027fa3f6ab9cc35392264af19e1f61a">entry_ro</a>()        throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00490"></a>00490             <span class="keywordflow">return</span> entry_ro&lt;ScopeRO&lt;Var&gt;,<a class="code" href="classPMC__NS_1_1Var.html">Var</a>&gt;(*this); }
<a name="l00491"></a><a class="code" href="classPMC__NS_1_1Var.html#af3f621f7039494eb41e6f236c0c9e498">00491</a>         <a class="code" href="classPMC__NS_1_1ScopeRO.html">ScopeRO&lt;CVar&gt;</a> <a class="code" href="classPMC__NS_1_1Var.html#af3f621f7039494eb41e6f236c0c9e498">entry_ro</a>() <span class="keyword">const</span>  throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00492"></a>00492             <span class="keywordflow">return</span> makeConst().entry_ro(); }
<a name="l00493"></a>00493 
<a name="l00494"></a><a class="code" href="classPMC__NS_1_1Var.html#aa0872c3ae4482d19f1194d75a77395a8">00494</a>         <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1Var.html#aa0872c3ae4482d19f1194d75a77395a8">fence</a>() throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00495"></a>00495             backend::fence();
<a name="l00496"></a>00496         }
<a name="l00497"></a>00497 
<a name="l00498"></a>00498         <span class="comment">// read functions</span>
<a name="l00499"></a><a class="code" href="classPMC__NS_1_1Var.html#a40c095e4b7f0aa7c47fdb2cb07aa5a55">00499</a>         <span class="keyword">const</span> <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a> <a class="code" href="classPMC__NS_1_1Var.html#a40c095e4b7f0aa7c47fdb2cb07aa5a55">poll</a>()              throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) { <span class="keywordflow">return</span> entry_ro(); }
<a name="l00500"></a><a class="code" href="classPMC__NS_1_1Var.html#ac26266b4e04beed082d94a71e8e11bc8">00500</a>         <span class="keyword">const</span> <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a> <a class="code" href="classPMC__NS_1_1Var.html#ac26266b4e04beed082d94a71e8e11bc8">poll</a>() <span class="keyword">const</span>        throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) { <span class="keywordflow">return</span> entry_ro(); }
<a name="l00501"></a><a class="code" href="classPMC__NS_1_1Var.html#a24b96350cae70b203a9385ea65ad1a52">00501</a>         <a class="code" href="classPMC__NS_1_1Var.html#a24b96350cae70b203a9385ea65ad1a52">operator const T</a>()          throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) { <span class="keywordflow">return</span> poll(); }
<a name="l00502"></a><a class="code" href="classPMC__NS_1_1Var.html#a7f9fdfc47dd550852169cb6cd0a136bc">00502</a>         <a class="code" href="classPMC__NS_1_1Var.html#a7f9fdfc47dd550852169cb6cd0a136bc">operator const T</a>() <span class="keyword">const</span>    throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) { <span class="keywordflow">return</span> poll(); }
<a name="l00503"></a>00503         <span class="comment">// write functions</span>
<a name="l00504"></a><a class="code" href="classPMC__NS_1_1Var.html#ac7080e20d1b3ec82f496b120e3b5db36">00504</a>         <a class="code" href="classPMC__NS_1_1Var.html">Var</a>&amp; <a class="code" href="classPMC__NS_1_1Var.html#ac7080e20d1b3ec82f496b120e3b5db36">operator=</a>(<span class="keyword">const</span> <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; rhs)    <span class="keywordflow">throw</span>() <a class="code" href="info__app_8h.html#aeab68f17dc686a2f7dc72ab2b712e464">__attribute__</a>((always_inline)) { entry_x()=rhs;<span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00505"></a><a class="code" href="classPMC__NS_1_1Var.html#a034f22ac98f0df8d83a5e480ff2e8e7a">00505</a>         <a class="code" href="classPMC__NS_1_1Var.html">Var</a>&amp; <a class="code" href="classPMC__NS_1_1Var.html#a034f22ac98f0df8d83a5e480ff2e8e7a">operator=</a>(<span class="keyword">const</span> <a class="code" href="classPMC__NS_1_1Var.html">Var</a>&amp; rhs)  <span class="keywordflow">throw</span>() <a class="code" href="info__app_8h.html#aeab68f17dc686a2f7dc72ab2b712e464">__attribute__</a>((always_inline)) { entry_x()=rhs.poll(); <span class="keywordflow">return</span> *<span class="keyword">this</span>;}
<a name="l00506"></a>00506 
<a name="l00507"></a><a class="code" href="classPMC__NS_1_1Var.html#ab98dd514af341da815cc5d04c1f971d0">00507</a>         <a class="code" href="classPMC__NS_1_1Var.html">Var</a>*    operator &amp;()            <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) { <span class="keywordflow">return</span> <span class="keyword">this</span>; }
<a name="l00508"></a><a class="code" href="classPMC__NS_1_1Var.html#ab8a1ae151ce0fd243b93b60921d20c27">00508</a>         <a class="code" href="classPMC__NS_1_1Var.html">CVar</a>*   operator &amp;() <a class="code" href="device_8h.html#a4588b12eae6951d9c976a65d6869b47f">const</a>      <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) { <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classPMC__NS_1_1Var.html">CVar</a>*<span class="keyword">&gt;</span>(<span class="keyword">const_cast&lt;</span><a class="code" href="classPMC__NS_1_1Var.html">Var</a>*<span class="keyword">&gt;</span>(<span class="keyword">this</span>)); }
<a name="l00509"></a><a class="code" href="classPMC__NS_1_1Var.html#ad106de364ed4cb9d955b8843cbe2d644">00509</a>                 operator CVar&amp;() <a class="code" href="device_8h.html#a4588b12eae6951d9c976a65d6869b47f">const</a>  <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) { <span class="keywordflow">return</span> *&amp;(*this); }
<a name="l00510"></a><a class="code" href="classPMC__NS_1_1Var.html#adca84c7c72f6f6a77150aa01cc83d0c4">00510</a>         <a class="code" href="classPMC__NS_1_1Var.html">CVar</a>&amp;   <a class="code" href="classPMC__NS_1_1Var.html#adca84c7c72f6f6a77150aa01cc83d0c4">makeConst</a>()             <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) { <span class="keywordflow">return</span> (<a class="code" href="classPMC__NS_1_1Var.html">CVar</a>&amp;)(*this); }
<a name="l00511"></a><a class="code" href="classPMC__NS_1_1Var.html#a724609b13be5752523bf684fff98d3ee">00511</a>         <a class="code" href="classPMC__NS_1_1Var.html">CVar</a>&amp;   <a class="code" href="classPMC__NS_1_1Var.html#a724609b13be5752523bf684fff98d3ee">makeConst</a>() <a class="code" href="device_8h.html#a4588b12eae6951d9c976a65d6869b47f">const</a>       <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) { <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00512"></a>00512 
<a name="l00513"></a>00513         <span class="comment">// allocation</span>
<a name="l00514"></a><a class="code" href="classPMC__NS_1_1Var.html#ab9b9f7f0c6ce6b53f020130250aaa1b7">00514</a>         <span class="keyword">static</span> <span class="keywordtype">void</span>* <a class="code" href="classPMC__NS_1_1Var.html#ab9b9f7f0c6ce6b53f020130250aaa1b7">operator new</a>(<span class="keywordtype">size_t</span> s)     <span class="keywordflow">throw</span>() <a class="code" href="info__app_8h.html#aeab68f17dc686a2f7dc72ab2b712e464">__attribute__</a>((always_inline)) { <span class="keywordflow">return</span> <a class="code" href="malloc_8cc.html#a360f865e74a356080303b8ba681ff8b2">base::operator new</a>(s); }
<a name="l00515"></a><a class="code" href="classPMC__NS_1_1Var.html#ad3343600cc676e965ffbb1cb2c57d81c">00515</a>         <span class="keyword">static</span> <span class="keywordtype">void</span>* <a class="code" href="classPMC__NS_1_1Var.html#ad3343600cc676e965ffbb1cb2c57d81c">operator new[]</a>(<span class="keywordtype">size_t</span> s)   <span class="keywordflow">throw</span>() <a class="code" href="info__app_8h.html#aeab68f17dc686a2f7dc72ab2b712e464">__attribute__</a>((always_inline)) { <span class="keywordflow">return</span> <a class="code" href="malloc_8cc.html#a95a2be3e5085325a12c9487d691f4f06">base::operator new[]</a>(s); }
<a name="l00516"></a><a class="code" href="classPMC__NS_1_1Var.html#a04ad3f2795dc303c186e9254871b7ae2">00516</a>         <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1Var.html#a04ad3f2795dc303c186e9254871b7ae2">operator delete</a>(<span class="keywordtype">void</span>* x)    <span class="keywordflow">throw</span>() <a class="code" href="info__app_8h.html#aeab68f17dc686a2f7dc72ab2b712e464">__attribute__</a>((always_inline)) { <a class="code" href="malloc_8cc.html#a86107594327f3a001230df9802cd4422">base::operator delete</a>(x); }
<a name="l00517"></a><a class="code" href="classPMC__NS_1_1Var.html#a54f80a678aee8107f6c1de8c27acd843">00517</a>         <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1Var.html#a54f80a678aee8107f6c1de8c27acd843">operator delete[]</a>(<span class="keywordtype">void</span>* x) <span class="keywordflow">throw</span>() <a class="code" href="info__app_8h.html#aeab68f17dc686a2f7dc72ab2b712e464">__attribute__</a>((always_inline)) { <a class="code" href="malloc_8cc.html#aaa8d8403dca7d813a59dd1f07728349d">base::operator delete[]</a>(x); }
<a name="l00518"></a><a class="code" href="classPMC__NS_1_1Var.html#a1b73654cdf98554a1435ed8b57a40630">00518</a>         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> P&gt; <span class="keyword">static</span> <span class="keywordtype">void</span>* <a class="code" href="classPMC__NS_1_1Var.html#a1b73654cdf98554a1435ed8b57a40630">operator new</a>(<span class="keywordtype">size_t</span> s,P&amp; pool) <span class="keywordflow">throw</span>() { <span class="keywordflow">return</span> <a class="code" href="malloc_8cc.html#a360f865e74a356080303b8ba681ff8b2">base::operator new</a>(s,pool); }
<a name="l00519"></a><a class="code" href="classPMC__NS_1_1Var.html#ad5214bd80d2699c781a2f2d9212234f5">00519</a>         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> P&gt; <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1Var.html#ad5214bd80d2699c781a2f2d9212234f5">operator delete</a>(<span class="keywordtype">void</span>* p,P&amp; pool) <span class="keywordflow">throw</span>() { <a class="code" href="malloc_8cc.html#a86107594327f3a001230df9802cd4422">base::operator delete</a>(p,pool); }
<a name="l00520"></a>00520 
<a name="l00521"></a>00521     <span class="keyword">protected</span>:
<a name="l00522"></a>00522         <span class="comment">// direct access is not allowed</span>
<a name="l00523"></a>00523         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> R&gt; operator R&amp;() <span class="keyword">const</span>;
<a name="l00524"></a>00524 
<a name="l00525"></a><a class="code" href="classPMC__NS_1_1Var.html#ae3a872a84c51e9e3a7c0e310922fa546">00525</a>         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> S,<span class="keyword">typename</span> A&gt; <span class="keyword">static</span> S <a class="code" href="classPMC__NS_1_1Var.html#ae3a872a84c51e9e3a7c0e310922fa546">__attribute__</a>((always_inline)) entry_x(A&amp; <a class="code" href="graphix_8h.html#a6585d26329c5e71ae768be0be86a7cea">a</a>) throw() {
<a name="l00526"></a>00526             <span class="keywordflow">return</span> S(<a class="code" href="graphix_8h.html#a6585d26329c5e71ae768be0be86a7cea">a</a>,<a class="code" href="graphix_8h.html#a6585d26329c5e71ae768be0be86a7cea">a</a>.backend::entry_x());
<a name="l00527"></a>00527         }
<a name="l00528"></a><a class="code" href="classPMC__NS_1_1Var.html#a9fa3c14763151b420a96b370adda012c">00528</a>         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> S,<span class="keyword">typename</span> A&gt; <span class="keyword">static</span> S <a class="code" href="classPMC__NS_1_1Var.html#a9fa3c14763151b420a96b370adda012c">__attribute__</a>((always_inline)) entry_ro(A&amp; <a class="code" href="graphix_8h.html#a6585d26329c5e71ae768be0be86a7cea">a</a>) throw() {
<a name="l00529"></a>00529             <span class="keywordflow">return</span> S(<a class="code" href="graphix_8h.html#a6585d26329c5e71ae768be0be86a7cea">a</a>,<a class="code" href="graphix_8h.html#a6585d26329c5e71ae768be0be86a7cea">a</a>.backend::entry_ro());
<a name="l00530"></a>00530         }
<a name="l00531"></a><a class="code" href="classPMC__NS_1_1Var.html#ad4c4f123f59943f4149713307ebd62e5">00531</a>         <span class="keyword">const</span> <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="classPMC__NS_1_1Var.html#ad4c4f123f59943f4149713307ebd62e5">access</a>() <span class="keyword">const</span> throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00532"></a>00532             <span class="keywordflow">return</span> <a class="code" href="file_8cc.html#aa918cf234c33e52741d038f62d41897d">base::access</a>();
<a name="l00533"></a>00533         }
<a name="l00534"></a><a class="code" href="classPMC__NS_1_1Var.html#af7d6f08219aeb0d0b1b7e891edf40406">00534</a>         <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="classPMC__NS_1_1Var.html#af7d6f08219aeb0d0b1b7e891edf40406">access</a>() throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00535"></a>00535             <span class="keywordflow">return</span> <a class="code" href="file_8cc.html#aa918cf234c33e52741d038f62d41897d">base::access</a>();
<a name="l00536"></a>00536         }
<a name="l00537"></a>00537 
<a name="l00538"></a><a class="code" href="classPMC__NS_1_1Var.html#a5e8a39f7ea5124e3ee671cee6ab0cd5f">00538</a>         <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classPMC__NS_1_1Scope.html">Scope</a>&lt;<a class="code" href="classPMC__NS_1_1Var.html">Var</a>,<a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&gt;;
<a name="l00539"></a><a class="code" href="classPMC__NS_1_1Var.html#a5a8f0bb9fcdd11dd696a213ce91e1524">00539</a>         <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classPMC__NS_1_1Scope.html">Scope</a>&lt;<a class="code" href="classPMC__NS_1_1Var.html">Var</a>,<a class="code" href="device_8h.html#a4588b12eae6951d9c976a65d6869b47f">const</a> <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&gt;;
<a name="l00540"></a><a class="code" href="classPMC__NS_1_1Var.html#a5a3841ddb6ef4d6e58ad9f35189091e5">00540</a>         <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classPMC__NS_1_1ScopeX.html">ScopeX</a>&lt;<a class="code" href="classPMC__NS_1_1Var.html">Var</a>&gt;;
<a name="l00541"></a><a class="code" href="classPMC__NS_1_1Var.html#a27b16dd782c3f79c520a99e435537854">00541</a>         <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classPMC__NS_1_1ScopeRO.html">ScopeRO</a>&lt;<a class="code" href="classPMC__NS_1_1Var.html">Var</a>&gt;;
<a name="l00542"></a><a class="code" href="classPMC__NS_1_1Var.html#af68b22d935dd748b6625ef6403128650">00542</a>         <span class="keyword">template</span> &lt;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> AL,<span class="keyword">typename</span> AT,<span class="keyword">typename</span> AB&gt; <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classPMC__NS_1_1VarPtrArray.html">VarPtrArray</a>;
<a name="l00543"></a>00543     };
<a name="l00544"></a>00544 
<a name="l00545"></a><a class="code" href="pmc_8h.html#a408daf04f7c2952d6975edaf4a1cba58">00545</a> <span class="preprocessor">#define ScopeX_type(v)  typeof((v).entry_x())</span>
<a name="l00546"></a><a class="code" href="pmc_8h.html#a959ed22abec7b8eb36563ed4ff933de1">00546</a> <span class="preprocessor"></span><span class="preprocessor">#define ScopeRO_type(v) typeof((v).entry_ro())</span>
<a name="l00547"></a>00547 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00548"></a>00548 <span class="comment">    //////////////////////////////////////////</span>
<a name="l00549"></a>00549 <span class="comment"></span>    <span class="comment">// Access scopes</span>
<a name="l00550"></a>00550 
<a name="l00551"></a>00551     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> V,<span class="keyword">typename</span> T&gt;
<a name="l00552"></a><a class="code" href="classPMC__NS_1_1Scope.html">00552</a>     <span class="keyword">class </span><a class="code" href="classPMC__NS_1_1Scope.html">Scope</a> {
<a name="l00553"></a>00553     <span class="keyword">public</span>:
<a name="l00554"></a>00554 <span class="preprocessor">#ifdef PMC_OUT_OF_SCOPE_COMPILE_ERROR</span>
<a name="l00555"></a><a class="code" href="classPMC__NS_1_1Scope.html#a13bc0a0a8db44acfe78e0cae26b1ca5d">00555</a> <span class="preprocessor"></span>        <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1Scope.html#a614324a032515db85a7b85b92c7b3dab">out_of_scope</a>() throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((error(&quot;Out of scope&quot;),<a class="code" href="classPMC__NS_1_1Scope.html#a13bc0a0a8db44acfe78e0cae26b1ca5d">noreturn</a>,<a class="code" href="classPMC__NS_1_1Scope.html#a0017911643c9305ed7c6e9a0923a1880">noinline</a>));
<a name="l00556"></a>00556 <span class="preprocessor">#else</span>
<a name="l00557"></a>00557 <span class="preprocessor"></span>        <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1Scope.html#a614324a032515db85a7b85b92c7b3dab">out_of_scope</a>() <span class="keyword">const</span> throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((noreturn,noinline)) { <a class="code" href="classPMC__NS_1_1Error.html">Error</a>(<span class="stringliteral">&quot;scope %p of var %p is out of scope\n&quot;</span>,<span class="keyword">this</span>,&amp;m_var); }
<a name="l00558"></a>00558 <span class="preprocessor">#endif</span>
<a name="l00559"></a>00559 <span class="preprocessor"></span>
<a name="l00560"></a><a class="code" href="structPMC__NS_1_1Scope_1_1ScopePtr.html">00560</a>         <span class="keyword">struct </span><a class="code" href="structPMC__NS_1_1Scope_1_1ScopePtr.html">ScopePtr</a> {
<a name="l00561"></a><a class="code" href="structPMC__NS_1_1Scope_1_1ScopePtr.html#ab7f17657c404845bfe98a8003d0ac55f">00561</a>             <a class="code" href="structPMC__NS_1_1Scope_1_1ScopePtr.html#ab7f17657c404845bfe98a8003d0ac55f">ScopePtr</a>() {}
<a name="l00562"></a><a class="code" href="structPMC__NS_1_1Scope_1_1ScopePtr.html#a73728fa12fb50740edb40f968ff52f60">00562</a>             <a class="code" href="structPMC__NS_1_1Scope_1_1ScopePtr.html#a73728fa12fb50740edb40f968ff52f60">ScopePtr</a>(V* <span class="keyword">const</span> v,<a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>* <a class="code" href="structPMC__NS_1_1Scope_1_1ScopePtr.html#a3759beb34c11f1deadd79b9c30dc9527">data</a>) : <a class="code" href="structPMC__NS_1_1Scope_1_1ScopePtr.html#add042580256d13592a12df32f28dfbbc">ptr</a>(v), data(data) {}
<a name="l00563"></a><a class="code" href="structPMC__NS_1_1Scope_1_1ScopePtr.html#add042580256d13592a12df32f28dfbbc">00563</a>             V* <a class="code" href="structPMC__NS_1_1Scope_1_1ScopePtr.html#add042580256d13592a12df32f28dfbbc">ptr</a>;
<a name="l00564"></a><a class="code" href="structPMC__NS_1_1Scope_1_1ScopePtr.html#a3759beb34c11f1deadd79b9c30dc9527">00564</a>             <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>* <a class="code" href="structPMC__NS_1_1Scope_1_1ScopePtr.html#a3759beb34c11f1deadd79b9c30dc9527">data</a>;
<a name="l00565"></a>00565         };
<a name="l00566"></a><a class="code" href="classPMC__NS_1_1Scope.html#a6d4a1840e343b97e8248a596f990eaaf">00566</a>         <a class="code" href="classPMC__NS_1_1Scope.html#a6d4a1840e343b97e8248a596f990eaaf">operator const ScopePtr</a>() throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00567"></a>00567             <span class="keywordflow">return</span> ScopePtr(<a class="code" href="classPMC__NS_1_1Scope.html#aff2beb56595752039befe02f128fcbd0">release</a>(),&amp;<a class="code" href="classPMC__NS_1_1Scope.html#a82333003f84eb6959abf7b4150b915be">data</a>());
<a name="l00568"></a>00568         }
<a name="l00569"></a>00569 
<a name="l00570"></a><a class="code" href="classPMC__NS_1_1Scope.html#af1b4f54394a452235bce0fa52db9a0b0">00570</a>         <a class="code" href="classPMC__NS_1_1Scope.html#af1b4f54394a452235bce0fa52db9a0b0">operator T&amp;</a>() throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00571"></a>00571             <span class="keywordflow">return</span> <a class="code" href="classPMC__NS_1_1Scope.html#a82333003f84eb6959abf7b4150b915be">data</a>();
<a name="l00572"></a>00572         }
<a name="l00573"></a>00573     <span class="keyword">protected</span>:
<a name="l00574"></a><a class="code" href="classPMC__NS_1_1Scope.html#ab31ba10232c6fa52fd098a2182d6a293">00574</a>         <a class="code" href="classPMC__NS_1_1Scope.html#ab31ba10232c6fa52fd098a2182d6a293">Scope</a>() : m_var(*(V*)NULL), m_data(*(<a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>*)NULL), m_valid(false) {}
<a name="l00575"></a><a class="code" href="classPMC__NS_1_1Scope.html#a1622b91a1d837903d4e3b3459a37abcb">00575</a>         <a class="code" href="classPMC__NS_1_1Scope.html#a1622b91a1d837903d4e3b3459a37abcb">Scope</a>(V&amp; v,<a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="classPMC__NS_1_1Scope.html#a82333003f84eb6959abf7b4150b915be">data</a>) : m_var(v), m_data(data), m_valid(true) {}
<a name="l00576"></a><a class="code" href="classPMC__NS_1_1Scope.html#a35e400154e59f3ef6ac5c77c1b92022e">00576</a>         <a class="code" href="classPMC__NS_1_1Scope.html#a35e400154e59f3ef6ac5c77c1b92022e">Scope</a>(<a class="code" href="classPMC__NS_1_1Scope.html">Scope</a>&amp; s) : m_var(*s.<a class="code" href="classPMC__NS_1_1Scope.html#aff2beb56595752039befe02f128fcbd0">release</a>()), m_data(s.<a class="code" href="classPMC__NS_1_1Scope.html#a82333003f84eb6959abf7b4150b915be">data</a>()), m_valid(true) {}
<a name="l00577"></a><a class="code" href="classPMC__NS_1_1Scope.html#ae7ac2281f615a3cf0edd946f7618394a">00577</a>         <a class="code" href="classPMC__NS_1_1Scope.html#ae7ac2281f615a3cf0edd946f7618394a">Scope</a>(<span class="keyword">const</span> ScopePtr ptr) : m_var(*ptr.ptr), m_data(*ptr.<a class="code" href="classPMC__NS_1_1Scope.html#a82333003f84eb6959abf7b4150b915be">data</a>), m_valid(true) {}
<a name="l00578"></a>00578 
<a name="l00579"></a>00579         <a class="code" href="classPMC__NS_1_1Scope.html">Scope</a>&amp; <a class="code" href="classPMC__NS_1_1Scope.html#a3e18780828ad1b72438e4d2a1f9e4a67">operator=</a>(<span class="keyword">const</span> <a class="code" href="classPMC__NS_1_1Scope.html">Scope</a>&amp; rhs) <a class="code" href="info__app_8h.html#aeab68f17dc686a2f7dc72ab2b712e464">__attribute__</a>((error(<span class="stringliteral">&quot;Assigning a scope is not allowed&quot;</span>)));
<a name="l00580"></a><a class="code" href="classPMC__NS_1_1Scope.html#a4fb783accf11fb108c0b40cd370527a1">00580</a>         <span class="keywordtype">bool</span> <a class="code" href="classPMC__NS_1_1Scope.html#a4fb783accf11fb108c0b40cd370527a1">in_scope</a>() <a class="code" href="device_8h.html#a4588b12eae6951d9c976a65d6869b47f">const</a> <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00581"></a>00581             <span class="keywordflow">return</span> m_valid;
<a name="l00582"></a>00582         }
<a name="l00583"></a><a class="code" href="classPMC__NS_1_1Scope.html#aff2beb56595752039befe02f128fcbd0">00583</a>         V* <a class="code" href="classPMC__NS_1_1Scope.html#aff2beb56595752039befe02f128fcbd0">release</a>() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00584"></a>00584             V* res=&amp;<a class="code" href="classPMC__NS_1_1Scope.html#a9dc12000a8e00d93087ab2ffc5a483fe">var</a>();
<a name="l00585"></a>00585             m_valid=<span class="keyword">false</span>;
<a name="l00586"></a>00586             <span class="keywordflow">return</span> res;
<a name="l00587"></a>00587         }
<a name="l00588"></a><a class="code" href="classPMC__NS_1_1Scope.html#a9dc12000a8e00d93087ab2ffc5a483fe">00588</a>         V&amp; <a class="code" href="classPMC__NS_1_1Scope.html#a9dc12000a8e00d93087ab2ffc5a483fe">var</a>() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00589"></a>00589             <span class="keywordflow">if</span>(!<a class="code" href="classPMC__NS_1_1Scope.html#a4fb783accf11fb108c0b40cd370527a1">in_scope</a>())<a class="code" href="classPMC__NS_1_1Scope.html#a614324a032515db85a7b85b92c7b3dab">out_of_scope</a>();
<a name="l00590"></a>00590             <span class="keywordflow">return</span> m_var;
<a name="l00591"></a>00591         }
<a name="l00592"></a><a class="code" href="classPMC__NS_1_1Scope.html#a82333003f84eb6959abf7b4150b915be">00592</a>         <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="classPMC__NS_1_1Scope.html#a82333003f84eb6959abf7b4150b915be">data</a>() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00593"></a>00593             <span class="keywordflow">return</span> m_data;
<a name="l00594"></a>00594         }
<a name="l00595"></a>00595     <span class="keyword">private</span>:
<a name="l00596"></a>00596         V&amp; m_var;
<a name="l00597"></a>00597         <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; m_data;
<a name="l00598"></a>00598         <span class="keywordtype">bool</span> m_valid;
<a name="l00599"></a>00599     };
<a name="l00600"></a>00600 
<a name="l00601"></a>00601     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> V&gt;
<a name="l00602"></a><a class="code" href="classPMC__NS_1_1ScopeX.html">00602</a>     <span class="keyword">class </span><a class="code" href="classPMC__NS_1_1ScopeX.html">ScopeX</a> : <span class="keyword">public</span> <a class="code" href="classPMC__NS_1_1Scope.html">Scope</a>&lt;V&gt; {
<a name="l00603"></a>00603     <span class="keyword">public</span>:
<a name="l00604"></a><a class="code" href="classPMC__NS_1_1ScopeX.html#abafa45268abc6efee214355579236ba9">00604</a>         <span class="keyword">typedef</span> <span class="keyword">typename</span> V::type <a class="code" href="classPMC__NS_1_1ScopeX.html#abafa45268abc6efee214355579236ba9">T</a>;
<a name="l00605"></a><a class="code" href="classPMC__NS_1_1ScopeX.html#aef452d0c682be88c70b701a84fd141b6">00605</a>         <span class="keyword">typedef</span> <a class="code" href="classPMC__NS_1_1Scope.html">Scope&lt;V,T&gt;</a> <a class="code" href="classPMC__NS_1_1ScopeX.html#aef452d0c682be88c70b701a84fd141b6">base</a>;
<a name="l00606"></a>00606 
<a name="l00607"></a><a class="code" href="classPMC__NS_1_1ScopeX.html#a8130fa400a0f01f3226abeba4f51e94b">00607</a>         <a class="code" href="classPMC__NS_1_1ScopeX.html#a8130fa400a0f01f3226abeba4f51e94b">ScopeX</a>() : <a class="code" href="classPMC__NS_1_1Scope.html">base</a>() {}
<a name="l00608"></a><a class="code" href="classPMC__NS_1_1ScopeX.html#ae72bffcf0612ae8dd62e3d593acab6f8">00608</a>         <a class="code" href="classPMC__NS_1_1ScopeX.html#ae72bffcf0612ae8dd62e3d593acab6f8">ScopeX</a>(V&amp; v,<a class="code" href="classPMC__NS_1_1ScopeX.html#abafa45268abc6efee214355579236ba9">T</a>&amp; <a class="code" href="classPMC__NS_1_1Scope.html#a82333003f84eb6959abf7b4150b915be">data</a>) : <a class="code" href="classPMC__NS_1_1Scope.html">base</a>(v,data), m_did_read(false), m_did_write(false) {}
<a name="l00609"></a><a class="code" href="classPMC__NS_1_1ScopeX.html#a6cf3692025c3be223c482685b1df30b9">00609</a>         <a class="code" href="classPMC__NS_1_1ScopeX.html#a6cf3692025c3be223c482685b1df30b9">ScopeX</a>(<a class="code" href="classPMC__NS_1_1ScopeX.html">ScopeX</a>&amp; s) : <a class="code" href="classPMC__NS_1_1Scope.html">base</a>((<a class="code" href="device_8h.html#a4588b12eae6951d9c976a65d6869b47f">const</a> typename <a class="code" href="classPMC__NS_1_1Scope.html">base</a>::ScopePtr)s), m_did_read(false), m_did_write(false) {}
<a name="l00610"></a><a class="code" href="classPMC__NS_1_1ScopeX.html#aaf6625aa774eba3c6693ac4bf1f38a18">00610</a>         <a class="code" href="classPMC__NS_1_1ScopeX.html#aaf6625aa774eba3c6693ac4bf1f38a18">ScopeX</a>(<span class="keyword">const</span> <span class="keyword">typename</span> <a class="code" href="structPMC__NS_1_1Scope_1_1ScopePtr.html">base::ScopePtr</a> ptr) : <a class="code" href="classPMC__NS_1_1Scope.html">base</a>(ptr), m_did_read(false), m_did_write(false) {}
<a name="l00611"></a>00611 
<a name="l00612"></a><a class="code" href="classPMC__NS_1_1ScopeX.html#a211601ac68f570ca48c9310e84a2f03c">00612</a>         <a class="code" href="classPMC__NS_1_1ScopeX.html#a211601ac68f570ca48c9310e84a2f03c">~ScopeX</a>() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00613"></a>00613             <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classPMC__NS_1_1Scope.html#a4fb783accf11fb108c0b40cd370527a1">in_scope</a>())
<a name="l00614"></a>00614                 <a class="code" href="classPMC__NS_1_1ScopeX.html#a5e3fc4d9e31f95c01441312c2b73021b">exit_x</a>();
<a name="l00615"></a>00615         }
<a name="l00616"></a><a class="code" href="classPMC__NS_1_1ScopeX.html#a5e3fc4d9e31f95c01441312c2b73021b">00616</a>         <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1ScopeX.html#a5e3fc4d9e31f95c01441312c2b73021b">exit_x</a>(<span class="keywordtype">bool</span> cleanup=<span class="keyword">false</span>) <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00617"></a>00617             this-&gt;<a class="code" href="classPMC__NS_1_1Scope.html#aff2beb56595752039befe02f128fcbd0">release</a>()-&gt;exit_x(this-&gt;<a class="code" href="classPMC__NS_1_1Scope.html#a82333003f84eb6959abf7b4150b915be">data</a>(),<a class="code" href="classPMC__NS_1_1ScopeX.html#a55a19095e13b8c2be4ec40dd608b47ac">did_read</a>(),<a class="code" href="classPMC__NS_1_1ScopeX.html#a189da142e8f9a5273172405f2ab6a981">did_write</a>(),cleanup);
<a name="l00618"></a>00618         }
<a name="l00619"></a><a class="code" href="classPMC__NS_1_1ScopeX.html#ad87da1686a2578a1880bad2131795864">00619</a>         <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1ScopeX.html#ad87da1686a2578a1880bad2131795864">flush</a>() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00620"></a>00620             this-&gt;<a class="code" href="classPMC__NS_1_1Scope.html#a9dc12000a8e00d93087ab2ffc5a483fe">var</a>().flush(this-&gt;<a class="code" href="classPMC__NS_1_1Scope.html#a82333003f84eb6959abf7b4150b915be">data</a>(),<a class="code" href="classPMC__NS_1_1ScopeX.html#a55a19095e13b8c2be4ec40dd608b47ac">did_read</a>(),<a class="code" href="classPMC__NS_1_1ScopeX.html#a189da142e8f9a5273172405f2ab6a981">did_write</a>());
<a name="l00621"></a>00621             m_did_read=m_did_write=<span class="keyword">false</span>;
<a name="l00622"></a>00622         }
<a name="l00623"></a><a class="code" href="classPMC__NS_1_1ScopeX.html#a366747f5e53d6faddbaa466f8f29d9be">00623</a>         <a class="code" href="classPMC__NS_1_1ScopeX.html">ScopeX</a>&amp; <a class="code" href="classPMC__NS_1_1ScopeX.html#a366747f5e53d6faddbaa466f8f29d9be">operator=</a>(<span class="keyword">const</span> <a class="code" href="classPMC__NS_1_1ScopeX.html#abafa45268abc6efee214355579236ba9">T</a>&amp; rhs){
<a name="l00624"></a>00624             this-&gt;<a class="code" href="classPMC__NS_1_1Scope.html#a82333003f84eb6959abf7b4150b915be">data</a>()=rhs;
<a name="l00625"></a>00625             m_did_write=<span class="keyword">true</span>;
<a name="l00626"></a>00626             <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00627"></a>00627         }
<a name="l00628"></a><a class="code" href="classPMC__NS_1_1ScopeX.html#a020a9f300e9bc3faceafff63ab095817">00628</a>         <a class="code" href="classPMC__NS_1_1ScopeX.html#abafa45268abc6efee214355579236ba9">T</a>&amp; <a class="code" href="classPMC__NS_1_1ScopeX.html#a020a9f300e9bc3faceafff63ab095817">read</a>() throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00629"></a>00629             <span class="keywordflow">return</span> (<a class="code" href="classPMC__NS_1_1ScopeX.html#abafa45268abc6efee214355579236ba9">T</a>&amp;)*<span class="keyword">this</span>;
<a name="l00630"></a>00630         }
<a name="l00631"></a><a class="code" href="classPMC__NS_1_1ScopeX.html#a77e55090925acbff52fc7aa43ce8f84d">00631</a>         <a class="code" href="classPMC__NS_1_1ScopeX.html#a77e55090925acbff52fc7aa43ce8f84d">operator T&amp;</a>() throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00632"></a>00632             m_did_read=m_did_write=<span class="keyword">true</span>;
<a name="l00633"></a>00633             <span class="keywordflow">return</span> <a class="code" href="classPMC__NS_1_1Scope.html#af1b4f54394a452235bce0fa52db9a0b0">base::operator T&amp;</a>();
<a name="l00634"></a>00634         }
<a name="l00635"></a><a class="code" href="classPMC__NS_1_1ScopeX.html#ae210acd75abe100a46879f70ee0888f8">00635</a>         <a class="code" href="classPMC__NS_1_1ScopeX.html#abafa45268abc6efee214355579236ba9">T</a>* <a class="code" href="classPMC__NS_1_1ScopeX.html#ae210acd75abe100a46879f70ee0888f8">operator -&gt;</a>() throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) { <span class="keywordflow">return</span> &amp;(<a class="code" href="classPMC__NS_1_1ScopeX.html#abafa45268abc6efee214355579236ba9">T</a>&amp;)(*<span class="keyword">this</span>); }
<a name="l00636"></a><a class="code" href="classPMC__NS_1_1ScopeX.html#aa8c84f8f8139dc4ca0d7f5e581a4c1f9">00636</a>         <a class="code" href="classPMC__NS_1_1ScopeX.html#abafa45268abc6efee214355579236ba9">T</a>&amp; <a class="code" href="classPMC__NS_1_1ScopeX.html#aa8c84f8f8139dc4ca0d7f5e581a4c1f9">operator *</a>() throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) { <span class="keywordflow">return</span> (<a class="code" href="classPMC__NS_1_1ScopeX.html#abafa45268abc6efee214355579236ba9">T</a>&amp;)(*this); }
<a name="l00637"></a>00637     <span class="keyword">protected</span>:
<a name="l00638"></a><a class="code" href="classPMC__NS_1_1ScopeX.html#a55a19095e13b8c2be4ec40dd608b47ac">00638</a>         <span class="keywordtype">bool</span> <a class="code" href="classPMC__NS_1_1ScopeX.html#a55a19095e13b8c2be4ec40dd608b47ac">did_read</a>() <span class="keyword">const</span> throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00639"></a>00639             <span class="keywordflow">return</span> m_did_read;
<a name="l00640"></a>00640         }
<a name="l00641"></a><a class="code" href="classPMC__NS_1_1ScopeX.html#a189da142e8f9a5273172405f2ab6a981">00641</a>         <span class="keywordtype">bool</span> <a class="code" href="classPMC__NS_1_1ScopeX.html#a189da142e8f9a5273172405f2ab6a981">did_write</a>() <span class="keyword">const</span> throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00642"></a>00642             <span class="keywordflow">return</span> m_did_write;
<a name="l00643"></a>00643         }
<a name="l00644"></a>00644     <span class="keyword">private</span>:
<a name="l00645"></a>00645         <span class="keywordtype">bool</span> m_did_read;
<a name="l00646"></a>00646         <span class="keywordtype">bool</span> m_did_write;
<a name="l00647"></a>00647     };
<a name="l00648"></a>00648     
<a name="l00649"></a>00649     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> V&gt;
<a name="l00650"></a><a class="code" href="classPMC__NS_1_1ScopeRO.html">00650</a>     <span class="keyword">class </span><a class="code" href="classPMC__NS_1_1ScopeRO.html">ScopeRO</a> : <span class="keyword">public</span> <a class="code" href="classPMC__NS_1_1Scope.html">Scope</a>&lt;V,const typename V::type&gt; {
<a name="l00651"></a>00651     <span class="keyword">public</span>:
<a name="l00652"></a><a class="code" href="classPMC__NS_1_1ScopeRO.html#ae996f8b9bbb5a28d2251001785bd842d">00652</a>         <span class="keyword">typedef</span> <span class="keyword">const</span> <span class="keyword">typename</span> V::type <a class="code" href="classPMC__NS_1_1ScopeRO.html#ae996f8b9bbb5a28d2251001785bd842d">T</a>;
<a name="l00653"></a><a class="code" href="classPMC__NS_1_1ScopeRO.html#a5d511bc1f1bce1592e30da825169d930">00653</a>         <span class="keyword">typedef</span> <a class="code" href="classPMC__NS_1_1Scope.html">Scope&lt;V,T&gt;</a> <a class="code" href="classPMC__NS_1_1ScopeRO.html#a5d511bc1f1bce1592e30da825169d930">base</a>;
<a name="l00654"></a>00654 
<a name="l00655"></a><a class="code" href="classPMC__NS_1_1ScopeRO.html#a2a964aa457c62c27e86773df11d82c86">00655</a>         <a class="code" href="classPMC__NS_1_1ScopeRO.html#a2a964aa457c62c27e86773df11d82c86">ScopeRO</a>() : <a class="code" href="classPMC__NS_1_1Scope.html">base</a>() {}
<a name="l00656"></a><a class="code" href="classPMC__NS_1_1ScopeRO.html#a20687c7b31a82a136fcfe11f3a5ed81c">00656</a>         <a class="code" href="classPMC__NS_1_1ScopeRO.html#a20687c7b31a82a136fcfe11f3a5ed81c">ScopeRO</a>(V&amp; v,<a class="code" href="classPMC__NS_1_1ScopeRO.html#ae996f8b9bbb5a28d2251001785bd842d">T</a>&amp; <a class="code" href="classPMC__NS_1_1Scope.html#a82333003f84eb6959abf7b4150b915be">data</a>) : <a class="code" href="classPMC__NS_1_1Scope.html">base</a>(v,data), m_did_read(false) {}
<a name="l00657"></a><a class="code" href="classPMC__NS_1_1ScopeRO.html#a9590dee845e4bc509460f0d67585c26f">00657</a>         <a class="code" href="classPMC__NS_1_1ScopeRO.html#a9590dee845e4bc509460f0d67585c26f">ScopeRO</a>(<a class="code" href="classPMC__NS_1_1ScopeRO.html">ScopeRO</a>&amp; s) : <a class="code" href="classPMC__NS_1_1Scope.html">base</a>((<a class="code" href="device_8h.html#a4588b12eae6951d9c976a65d6869b47f">const</a> typename <a class="code" href="classPMC__NS_1_1Scope.html">base</a>::ScopePtr)s), m_did_read(false) {}
<a name="l00658"></a><a class="code" href="classPMC__NS_1_1ScopeRO.html#a83cf1809743c3c128fc5440cbe63664f">00658</a>         <a class="code" href="classPMC__NS_1_1ScopeRO.html#a83cf1809743c3c128fc5440cbe63664f">ScopeRO</a>(<span class="keyword">const</span> <span class="keyword">typename</span> <a class="code" href="structPMC__NS_1_1Scope_1_1ScopePtr.html">base::ScopePtr</a> ptr) : <a class="code" href="classPMC__NS_1_1Scope.html">base</a>(ptr), m_did_read(false) {}
<a name="l00659"></a>00659 
<a name="l00660"></a><a class="code" href="classPMC__NS_1_1ScopeRO.html#ad796ce54c60b506afcd1b933700cddd8">00660</a>         <a class="code" href="classPMC__NS_1_1ScopeRO.html#ad796ce54c60b506afcd1b933700cddd8">~ScopeRO</a>() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00661"></a>00661             <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classPMC__NS_1_1Scope.html#a4fb783accf11fb108c0b40cd370527a1">in_scope</a>())
<a name="l00662"></a>00662                 <a class="code" href="classPMC__NS_1_1ScopeRO.html#a0bf1e1cf2668f4829d941b6533551403">exit_ro</a>();
<a name="l00663"></a>00663         }
<a name="l00664"></a><a class="code" href="classPMC__NS_1_1ScopeRO.html#a0bf1e1cf2668f4829d941b6533551403">00664</a>         <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1ScopeRO.html#a0bf1e1cf2668f4829d941b6533551403">exit_ro</a>(<span class="keywordtype">bool</span> cleanup=<span class="keyword">false</span>) <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00665"></a>00665             this-&gt;<a class="code" href="classPMC__NS_1_1Scope.html#aff2beb56595752039befe02f128fcbd0">release</a>()-&gt;exit_ro(this-&gt;<a class="code" href="classPMC__NS_1_1Scope.html#a82333003f84eb6959abf7b4150b915be">data</a>(),<a class="code" href="classPMC__NS_1_1ScopeRO.html#aea2965ac11ba8eb36f6d9a9f14919f4b">did_read</a>(),cleanup);
<a name="l00666"></a>00666         }
<a name="l00667"></a><a class="code" href="classPMC__NS_1_1ScopeRO.html#ab9420c5588c49293717dcc0359873b0d">00667</a>         <a class="code" href="classPMC__NS_1_1ScopeRO.html#ab9420c5588c49293717dcc0359873b0d">operator T&amp;</a>() throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00668"></a>00668             m_did_read=<span class="keyword">true</span>;
<a name="l00669"></a>00669             <span class="keywordflow">return</span> <a class="code" href="classPMC__NS_1_1Scope.html#af1b4f54394a452235bce0fa52db9a0b0">base::operator T&amp;</a>();
<a name="l00670"></a>00670         }
<a name="l00671"></a><a class="code" href="classPMC__NS_1_1ScopeRO.html#acd8f13733dc29ae6657e0627050296ea">00671</a>         <a class="code" href="classPMC__NS_1_1ScopeRO.html#ae996f8b9bbb5a28d2251001785bd842d">T</a>&amp; <a class="code" href="classPMC__NS_1_1ScopeRO.html#acd8f13733dc29ae6657e0627050296ea">read</a>() throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00672"></a>00672             <span class="keywordflow">return</span> (<a class="code" href="classPMC__NS_1_1ScopeRO.html#ae996f8b9bbb5a28d2251001785bd842d">T</a>&amp;)*<span class="keyword">this</span>;
<a name="l00673"></a>00673         }
<a name="l00674"></a><a class="code" href="classPMC__NS_1_1ScopeRO.html#a3f80e8c7ae960f364299d82f48c20283">00674</a>         <a class="code" href="classPMC__NS_1_1ScopeRO.html#ae996f8b9bbb5a28d2251001785bd842d">T</a>* <a class="code" href="classPMC__NS_1_1ScopeRO.html#a3f80e8c7ae960f364299d82f48c20283">operator -&gt;</a>() throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) { <span class="keywordflow">return</span> &amp;(<a class="code" href="classPMC__NS_1_1ScopeRO.html#ae996f8b9bbb5a28d2251001785bd842d">T</a>&amp;)(*<span class="keyword">this</span>); }
<a name="l00675"></a><a class="code" href="classPMC__NS_1_1ScopeRO.html#a07dfde88bebb363c9b93d69e7b391454">00675</a>         <a class="code" href="classPMC__NS_1_1ScopeRO.html#ae996f8b9bbb5a28d2251001785bd842d">T</a>&amp; <a class="code" href="classPMC__NS_1_1ScopeRO.html#a07dfde88bebb363c9b93d69e7b391454">operator *</a>() throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) { <span class="keywordflow">return</span> (<a class="code" href="classPMC__NS_1_1ScopeRO.html#ae996f8b9bbb5a28d2251001785bd842d">T</a>&amp;)(*this); }
<a name="l00676"></a><a class="code" href="classPMC__NS_1_1ScopeRO.html#ac7d9611be60cc9c925cafaab3a65b8d7">00676</a>         <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1ScopeRO.html#ac7d9611be60cc9c925cafaab3a65b8d7">reentry_ro</a>() throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00677"></a>00677             V&amp; <a class="code" href="classPMC__NS_1_1Scope.html#a9dc12000a8e00d93087ab2ffc5a483fe">var</a>=this-&gt;<a class="code" href="classPMC__NS_1_1Scope.html#a9dc12000a8e00d93087ab2ffc5a483fe">var</a>();
<a name="l00678"></a>00678             this-&gt;<a class="code" href="classPMC__NS_1_1ScopeRO.html#ad796ce54c60b506afcd1b933700cddd8">~ScopeRO</a>();
<a name="l00679"></a>00679             <span class="keyword">new</span>(<span class="keyword">this</span>) <a class="code" href="classPMC__NS_1_1ScopeRO.html#a2a964aa457c62c27e86773df11d82c86">ScopeRO</a>(var.entry_ro());
<a name="l00680"></a>00680         }
<a name="l00681"></a><a class="code" href="classPMC__NS_1_1ScopeRO.html#abad800a0e11b2304042d441aa16f7eea">00681</a>         <span class="keywordtype">void</span> <a class="code" href="classPMC__NS_1_1ScopeRO.html#abad800a0e11b2304042d441aa16f7eea">refresh</a>() throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00682"></a>00682             <a class="code" href="classPMC__NS_1_1ScopeRO.html#ac7d9611be60cc9c925cafaab3a65b8d7">reentry_ro</a>();
<a name="l00683"></a>00683         }
<a name="l00684"></a>00684     <span class="keyword">protected</span>:
<a name="l00685"></a><a class="code" href="classPMC__NS_1_1ScopeRO.html#aea2965ac11ba8eb36f6d9a9f14919f4b">00685</a>         <span class="keywordtype">bool</span> <a class="code" href="classPMC__NS_1_1ScopeRO.html#aea2965ac11ba8eb36f6d9a9f14919f4b">did_read</a>() <span class="keyword">const</span> throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00686"></a>00686             <span class="keywordflow">return</span> m_did_read;
<a name="l00687"></a>00687         }
<a name="l00688"></a>00688     <span class="keyword">private</span>:
<a name="l00689"></a>00689         <span class="keywordtype">bool</span> m_did_read;
<a name="l00690"></a>00690     };
<a name="l00691"></a>00691     <span class="comment"></span>
<a name="l00692"></a>00692 <span class="comment">    //////////////////////////////////////////</span>
<a name="l00693"></a>00693 <span class="comment"></span>    <span class="comment">// Group access scopes</span>
<a name="l00694"></a>00694 
<a name="l00695"></a>00695     <span class="keyword">template</span> &lt;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> L,<span class="keyword">typename</span> T,<span class="keyword">typename</span> B&gt;
<a name="l00696"></a><a class="code" href="classPMC__NS_1_1VarPtrArray.html">00696</a>     <span class="keyword">class </span><a class="code" href="classPMC__NS_1_1VarPtrArray.html">VarPtrArray</a> {
<a name="l00697"></a>00697     <span class="keyword">public</span>:
<a name="l00698"></a><a class="code" href="classPMC__NS_1_1VarPtrArray.html#a6c07534b812aa01b5888cd9162a37207">00698</a>         <span class="keyword">typedef</span> <a class="code" href="classPMC__NS_1_1Var.html">Var&lt;T,B&gt;</a> <a class="code" href="classPMC__NS_1_1VarPtrArray.html#a6c07534b812aa01b5888cd9162a37207">V</a>;
<a name="l00699"></a><a class="code" href="classPMC__NS_1_1VarPtrArray.html#a6f13f83bf5068b39e1c1efeee289808d">00699</a>         <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="classPMC__NS_1_1Var.html">V::CVar</a> <a class="code" href="classPMC__NS_1_1VarPtrArray.html#a6f13f83bf5068b39e1c1efeee289808d">CV</a>;
<a name="l00700"></a><a class="code" href="classPMC__NS_1_1VarPtrArray.html#acea79b9caa73a7b0fec8b1d9b5eb9de2">00700</a>         <a class="code" href="classPMC__NS_1_1VarPtrArray.html#acea79b9caa73a7b0fec8b1d9b5eb9de2">VarPtrArray</a>() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) : m_vars() {}
<a name="l00701"></a>00701 
<a name="l00702"></a><a class="code" href="classPMC__NS_1_1VarPtrArray.html#a63128a693d17b60186fe594e7c1fbfb3">00702</a>         <a class="code" href="classPMC__NS_1_1Var.html">V</a>*&amp; <a class="code" href="classPMC__NS_1_1VarPtrArray.html#a63128a693d17b60186fe594e7c1fbfb3">operator[]</a>(<span class="keywordtype">int</span> i) <a class="code" href="info__app_8h.html#aeab68f17dc686a2f7dc72ab2b712e464">__attribute__</a>((always_inline)) {<span class="keywordflow">return</span> m_vars[i];}
<a name="l00703"></a><a class="code" href="classPMC__NS_1_1VarPtrArray.html#a7843f5b0fbcb7fb2ee6834261a1f257b">00703</a>         <a class="code" href="classPMC__NS_1_1Var.html">CV</a>* <a class="code" href="classPMC__NS_1_1VarPtrArray.html#a7843f5b0fbcb7fb2ee6834261a1f257b">operator[]</a>(<span class="keywordtype">int</span> i) <span class="keyword">const</span> <a class="code" href="info__app_8h.html#aeab68f17dc686a2f7dc72ab2b712e464">__attribute__</a>((always_inline)) {<span class="keywordflow">return</span> &amp;m_vars[i]-&gt;<a class="code" href="classPMC__NS_1_1Var.html#adca84c7c72f6f6a77150aa01cc83d0c4">makeConst</a>();}
<a name="l00704"></a>00704         
<a name="l00705"></a><a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeRO.html">00705</a>         <span class="keyword">class </span><a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeRO.html">GroupScopeRO</a> {
<a name="l00706"></a>00706         <span class="keyword">public</span>:
<a name="l00707"></a><a class="code" href="structPMC__NS_1_1VarPtrArray_1_1GroupScopeRO_1_1NakedData.html#aad5709ac6397df096552771510dbf646">00707</a>             <span class="keyword">typedef</span> <span class="keyword">struct </span>{ <span class="keywordtype">void</span>* p[L+1]; } <a class="code" href="structPMC__NS_1_1VarPtrArray_1_1GroupScopeRO_1_1NakedData.html">NakedData</a>;
<a name="l00708"></a><a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeRO.html#ac79e81f55224984fd3e9aecbb51c9262">00708</a>             <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeRO.html#ac79e81f55224984fd3e9aecbb51c9262">GroupScopeRO</a>(<span class="keyword">const</span> <a class="code" href="classPMC__NS_1_1VarPtrArray.html">VarPtrArray</a>&amp; <a class="code" href="graphix_8h.html#a6585d26329c5e71ae768be0be86a7cea">a</a>) <a class="code" href="info__app_8h.html#aeab68f17dc686a2f7dc72ab2b712e464">__attribute__</a>((always_inline)) : m_valid(L!=0), <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeRO.html#a42da26a476eb8d5b43f873262fda35b1">m_a</a>(&amp;<a class="code" href="graphix_8h.html#a6585d26329c5e71ae768be0be86a7cea">a</a>) {
<a name="l00709"></a>00709                 <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0;i&lt;L;i++)
<a name="l00710"></a>00710                     <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeRO.html#a049120b2e23ed1014e771f6b0bc568da">m_data</a>[i]=&amp;(<a class="code" href="graphix_8h.html#a6585d26329c5e71ae768be0be86a7cea">a</a>[i]-&gt;CV::backend::entry_ro());
<a name="l00711"></a>00711             }
<a name="l00712"></a><a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeRO.html#af1fe9cf04797cfebba3f1775f65e8373">00712</a>             <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeRO.html#af1fe9cf04797cfebba3f1775f65e8373">GroupScopeRO</a>(<span class="keyword">const</span> <a class="code" href="structPMC__NS_1_1VarPtrArray_1_1GroupScopeRO_1_1NakedData.html">NakedData</a>&amp; n) <a class="code" href="info__app_8h.html#aeab68f17dc686a2f7dc72ab2b712e464">__attribute__</a>((always_inline)) : m_valid(L!=0), <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeRO.html#a36ca9491bef7f5b4a98402476fa4b042">m_naked</a>(n) {}
<a name="l00713"></a><a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeRO.html#a4de7563119b75ee286b4478e622e7bce">00713</a>             <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeRO.html#a4de7563119b75ee286b4478e622e7bce">~GroupScopeRO</a>() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00714"></a>00714                 <span class="keywordflow">if</span>(m_valid)
<a name="l00715"></a>00715                     <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0;i&lt;L;i++)
<a name="l00716"></a>00716                         (*<a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeRO.html#a42da26a476eb8d5b43f873262fda35b1">m_a</a>)[i]-&gt;exit_ro(*<a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeRO.html#a049120b2e23ed1014e771f6b0bc568da">m_data</a>[i]);
<a name="l00717"></a>00717             }
<a name="l00718"></a><a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeRO.html#a49bc15f98ba1e93c5dee7c485a92a342">00718</a>             <span class="keyword">const</span> <a class="code" href="structPMC__NS_1_1VarPtrArray_1_1GroupScopeRO_1_1NakedData.html">NakedData</a>&amp; <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeRO.html#a49bc15f98ba1e93c5dee7c485a92a342">release</a>() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) { m_valid=<span class="keyword">false</span>;<span class="keywordflow">return</span> <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeRO.html#a36ca9491bef7f5b4a98402476fa4b042">m_naked</a>;}
<a name="l00719"></a><a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeRO.html#a881657e2f82dc11e69725dcc123a366f">00719</a>             <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeRO.html#a881657e2f82dc11e69725dcc123a366f">operator const NakedData&amp;</a>() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) { <span class="keywordflow">return</span> <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeRO.html#a49bc15f98ba1e93c5dee7c485a92a342">release</a>(); }
<a name="l00720"></a><a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeRO.html#a0bd50b4c33221b3a9ad7d48d28a170bc">00720</a>             <span class="keyword">const</span> <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeRO.html#a0bd50b4c33221b3a9ad7d48d28a170bc">operator []</a>(<span class="keywordtype">int</span> i) <a class="code" href="info__app_8h.html#aeab68f17dc686a2f7dc72ab2b712e464">__attribute__</a>((always_inline)) {<span class="keywordflow">return</span> *<a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeRO.html#a049120b2e23ed1014e771f6b0bc568da">m_data</a>[i];}
<a name="l00721"></a>00721         <span class="keyword">private</span>:
<a name="l00722"></a>00722             <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeRO.html#ac79e81f55224984fd3e9aecbb51c9262">GroupScopeRO</a>(<a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeRO.html">GroupScopeRO</a>&amp; s);<span class="comment">// __attribute__((always_inline)) : m_valid(s.m_valid), m_naked(s.release()) {}</span>
<a name="l00723"></a>00723             <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeRO.html">GroupScopeRO</a>&amp; operator=(<span class="keyword">const</span> <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeRO.html">GroupScopeRO</a>&amp; rhs);
<a name="l00724"></a>00724             <span class="keywordtype">bool</span> m_valid;
<a name="l00725"></a>00725             <span class="keyword">union </span>{
<a name="l00726"></a><a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeRO.html#a36ca9491bef7f5b4a98402476fa4b042">00726</a>                 <a class="code" href="structPMC__NS_1_1VarPtrArray_1_1GroupScopeRO_1_1NakedData.html">NakedData</a> <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeRO.html#a36ca9491bef7f5b4a98402476fa4b042">m_naked</a>;
<a name="l00727"></a>00727                 <span class="keyword">struct </span>{
<a name="l00728"></a><a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeRO.html#a42da26a476eb8d5b43f873262fda35b1">00728</a>                     <span class="keyword">const</span> <a class="code" href="classPMC__NS_1_1VarPtrArray.html">VarPtrArray</a>* <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeRO.html#a42da26a476eb8d5b43f873262fda35b1">m_a</a>;
<a name="l00729"></a><a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeRO.html#a049120b2e23ed1014e771f6b0bc568da">00729</a>                     <span class="keyword">const</span> <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>* <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeRO.html#a049120b2e23ed1014e771f6b0bc568da">m_data</a>[L];
<a name="l00730"></a>00730                 };
<a name="l00731"></a>00731             };
<a name="l00732"></a>00732         };
<a name="l00733"></a>00733 
<a name="l00734"></a><a class="code" href="classPMC__NS_1_1VarPtrArray.html#adbfa635bf250ade4056f2b013bf66f80">00734</a>         <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeRO.html">GroupScopeRO</a> <a class="code" href="classPMC__NS_1_1VarPtrArray.html#adbfa635bf250ade4056f2b013bf66f80">entry_ro</a>() <span class="keyword">const</span> throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00735"></a>00735             <span class="keywordflow">return</span> <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeRO.html">GroupScopeRO</a>(*<span class="keyword">this</span>);
<a name="l00736"></a>00736         }
<a name="l00737"></a>00737         
<a name="l00738"></a><a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html">00738</a>         <span class="keyword">class </span><a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html">GroupScopeX</a> {
<a name="l00739"></a>00739         <span class="keyword">public</span>:
<a name="l00740"></a><a class="code" href="structPMC__NS_1_1VarPtrArray_1_1GroupScopeX_1_1NakedData.html#a68c61c4a114bb6fbd7724f9838ffb466">00740</a>             <span class="keyword">typedef</span> <span class="keyword">struct </span>{ <span class="keywordtype">void</span>* p[L+1]; } <a class="code" href="structPMC__NS_1_1VarPtrArray_1_1GroupScopeX_1_1NakedData.html">NakedData</a>;
<a name="l00741"></a><a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html#ae545702331aa6389ed608b7303049482">00741</a>             <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html#ae545702331aa6389ed608b7303049482">GroupScopeX</a>(<a class="code" href="classPMC__NS_1_1VarPtrArray.html">VarPtrArray</a>&amp; <a class="code" href="graphix_8h.html#a6585d26329c5e71ae768be0be86a7cea">a</a>) : <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html#a10b84221a4bdf8db89529bb0019e5a3d">m_naked</a>() {
<a name="l00742"></a>00742                 <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html#a90bdc41e86362a8b3e7d301788fd2782">m_a</a>=L==0?NULL:&amp;<a class="code" href="graphix_8h.html#a6585d26329c5e71ae768be0be86a7cea">a</a>;
<a name="l00743"></a>00743                 <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0;i&lt;L;i++){
<a name="l00744"></a>00744                     <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html#af330e639e5cd1d1eca8b8d68c79f8fde">m_data</a>[i]=&amp;(a[i]-&gt;V::backend::entry_x());
<a name="l00745"></a>00745                 }
<a name="l00746"></a>00746             }
<a name="l00747"></a><a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html#a6ad05d74e941b930af937f3cdecc53bc">00747</a>             <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html#a6ad05d74e941b930af937f3cdecc53bc">GroupScopeX</a>(<a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html">GroupScopeX</a>&amp; s) : <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html#a10b84221a4bdf8db89529bb0019e5a3d">m_naked</a>(s.<a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html#ae1b6f8912b296d92f46a71e592739293">release</a>()) {}
<a name="l00748"></a><a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html#a1544db085ca3576aeaadfa78d36bd74a">00748</a>             <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html#a1544db085ca3576aeaadfa78d36bd74a">GroupScopeX</a>(<span class="keyword">const</span> <a class="code" href="structPMC__NS_1_1VarPtrArray_1_1GroupScopeX_1_1NakedData.html">NakedData</a>&amp; n) : <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html#a10b84221a4bdf8db89529bb0019e5a3d">m_naked</a>(n) {}
<a name="l00749"></a><a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html#a430e2fe710f3de85a4541b8b040521af">00749</a>             <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html#a430e2fe710f3de85a4541b8b040521af">~GroupScopeX</a>() {
<a name="l00750"></a>00750                 <span class="keywordflow">if</span>(<a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html#a90bdc41e86362a8b3e7d301788fd2782">m_a</a>){
<a name="l00751"></a>00751                     (*m_a)[0]-&gt;fence();
<a name="l00752"></a>00752                     <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0;i&lt;L;i++){
<a name="l00753"></a>00753                         (*m_a)[i]-&gt;flush(*<a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html#af330e639e5cd1d1eca8b8d68c79f8fde">m_data</a>[i]);
<a name="l00754"></a>00754                         (*m_a)[i]-&gt;V::backend::exit_x(*<a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html#af330e639e5cd1d1eca8b8d68c79f8fde">m_data</a>[i]);
<a name="l00755"></a>00755                     }
<a name="l00756"></a>00756                 }
<a name="l00757"></a>00757             }
<a name="l00758"></a><a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html#ae1b6f8912b296d92f46a71e592739293">00758</a>             <a class="code" href="structPMC__NS_1_1VarPtrArray_1_1GroupScopeX_1_1NakedData.html">NakedData</a> <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html#ae1b6f8912b296d92f46a71e592739293">release</a>() { <a class="code" href="structPMC__NS_1_1VarPtrArray_1_1GroupScopeX_1_1NakedData.html">NakedData</a> res=<a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html#a10b84221a4bdf8db89529bb0019e5a3d">m_naked</a>;<a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html#a90bdc41e86362a8b3e7d301788fd2782">m_a</a>=NULL;<span class="keywordflow">return</span> res;}
<a name="l00759"></a><a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html#a0aa382a8bd0536ab98b7ae5998117ce0">00759</a>             <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html#a0aa382a8bd0536ab98b7ae5998117ce0">operator NakedData</a>() { <span class="keywordflow">return</span> <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html#ae1b6f8912b296d92f46a71e592739293">release</a>(); }
<a name="l00760"></a><a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html#a135272c03aa212ddba8488ad0c27cb47">00760</a>             <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>&amp; <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html#a135272c03aa212ddba8488ad0c27cb47">operator []</a>(<span class="keywordtype">int</span> i){<span class="keywordflow">return</span> *<a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html#af330e639e5cd1d1eca8b8d68c79f8fde">m_data</a>[i];}
<a name="l00761"></a>00761         <span class="keyword">private</span>:
<a name="l00762"></a>00762             <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html">GroupScopeX</a>&amp; operator=(<span class="keyword">const</span> <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html">GroupScopeX</a>&amp; rhs);
<a name="l00763"></a>00763             <span class="keyword">union </span>{
<a name="l00764"></a><a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html#a10b84221a4bdf8db89529bb0019e5a3d">00764</a>                 <a class="code" href="structPMC__NS_1_1VarPtrArray_1_1GroupScopeX_1_1NakedData.html">NakedData</a> <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html#a10b84221a4bdf8db89529bb0019e5a3d">m_naked</a>;
<a name="l00765"></a>00765                 <span class="keyword">struct </span>{
<a name="l00766"></a><a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html#a90bdc41e86362a8b3e7d301788fd2782">00766</a>                     <a class="code" href="classPMC__NS_1_1VarPtrArray.html">VarPtrArray</a>* <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html#a90bdc41e86362a8b3e7d301788fd2782">m_a</a>;
<a name="l00767"></a><a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html#af330e639e5cd1d1eca8b8d68c79f8fde">00767</a>                     <a class="code" href="namespacePMC__NS.html#ad7877c86e4018040c49499756776ece0">T</a>* <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html#af330e639e5cd1d1eca8b8d68c79f8fde">m_data</a>[L];
<a name="l00768"></a>00768                 };
<a name="l00769"></a>00769             };
<a name="l00770"></a>00770         };
<a name="l00771"></a>00771         
<a name="l00772"></a><a class="code" href="classPMC__NS_1_1VarPtrArray.html#ad118aec9755be4ca3bd0f3762dbf32f5">00772</a>         <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html">GroupScopeX</a> <a class="code" href="classPMC__NS_1_1VarPtrArray.html#ad118aec9755be4ca3bd0f3762dbf32f5">entry_x</a>() throw() <a class="code" href="struct____attribute____.html">__attribute__</a>((always_inline)) {
<a name="l00773"></a>00773             <span class="keywordflow">return</span> <a class="code" href="classPMC__NS_1_1VarPtrArray_1_1GroupScopeX.html">GroupScopeX</a>(*<span class="keyword">this</span>);
<a name="l00774"></a>00774         }
<a name="l00775"></a>00775     <span class="keyword">private</span>:
<a name="l00776"></a>00776         <a class="code" href="classPMC__NS_1_1VarPtrArray.html#a6c07534b812aa01b5888cd9162a37207">V</a>* m_vars[L];
<a name="l00777"></a>00777     };
<a name="l00778"></a>00778 
<a name="l00779"></a>00779 } <span class="comment">// namespace</span>
<a name="l00780"></a>00780 
<a name="l00781"></a>00781 <span class="preprocessor">#endif // USE_DISTRIBUTED_LOCK</span>
<a name="l00782"></a>00782 <span class="preprocessor"></span><span class="preprocessor">#endif // __cplusplus</span>
<a name="l00783"></a>00783 <span class="preprocessor"></span><span class="preprocessor">#endif // __PMC_H</span>
</pre></div></div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="pmc_8h.html">pmc.h</a>      </li>

    <li class="footer">Generated on Tue Apr 28 2015 16:39:17 for Starburst by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
