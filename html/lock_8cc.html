<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Starburst: ipc/lock.cc File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Starburst
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('lock_8cc.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ipc/lock.cc File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="lock_8h_source.html">lock.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="api_8h_source.html">sys/api.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="mc_8h_source.html">mc.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="rc_8h_source.html">rc.h</a>&gt;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for lock.cc:</div>
<div class="dyncontent">
<div class="center"><img src="lock_8cc__incl.png" border="0" usemap="#ipc_2lock_8cc" alt=""/></div>
<map name="ipc_2lock_8cc" id="ipc_2lock_8cc">
<area shape="rect" id="node3" href="lock_8h.html" title="lock.h" alt="" coords="72,406,128,437"/><area shape="rect" id="node12" href="api_8h.html" title="Global header file that includes all functions of the OS." alt="" coords="996,86,1071,117"/><area shape="rect" id="node116" href="mc_8h.html" title="Implementation of a memory consistency model." alt="" coords="22,326,72,357"/><area shape="rect" id="node123" href="rc_8h.html" title="rc.h" alt="" coords="248,326,291,357"/><area shape="rect" id="node5" href="helix__config_8h.html" title="Configuration of the OS." alt="" coords="559,566,687,597"/><area shape="rect" id="node9" href="kernel__types_8h.html" title="sys/kernel_types.h" alt="" coords="428,486,562,517"/><area shape="rect" id="node16" href="autoret_8h.html" title="autoret.h" alt="" coords="527,166,599,197"/><area shape="rect" id="node20" href="stdlib_8h.html" title="stdlib.h" alt="" coords="643,246,704,277"/><area shape="rect" id="node22" href="malloc_8h.html" title="malloc.h" alt="" coords="683,326,755,357"/><area shape="rect" id="node30" href="device_8h.html" title="Declaration of functions that gives information about the hardware platform." alt="" coords="254,406,352,437"/><area shape="rect" id="node41" href="unistd_8h.html" title="unistd.h" alt="" coords="530,246,596,277"/><area shape="rect" id="node53" href="io_8h.html" title="Declaration of all I/O function, types and address macros." alt="" coords="2003,246,2070,277"/><area shape="rect" id="node58" href="kernel_8h.html" title="Declaration of all kernel functions." alt="" coords="1028,246,1122,277"/><area shape="rect" id="node66" href="hooks_8h.html" title="Hooks in kernel, to get specific call&#45;backs or information." alt="" coords="1451,326,1544,357"/><area shape="rect" id="node86" href="syscall_8h.html" title="System calls to kernel functions." alt="" coords="1442,166,1540,197"/><area shape="rect" id="node93" href="daemons_8h.html" title="All daemon definitions." alt="" coords="950,166,1038,197"/><area shape="rect" id="node107" href="trace_8h.html" title="Tracing of process execution and phases." alt="" coords="840,406,902,437"/><area shape="rect" id="node37" href="ttypes_8h.html" title="ttypes.h" alt="" coords="427,406,494,437"/><area shape="rect" id="node68" href="pthread_8h.html" title="POSIX Pthread standard implementation." alt="" coords="1299,326,1376,357"/><area shape="rect" id="node76" href="signal_8h.html" title="signal.h" alt="" coords="1230,406,1296,437"/><area shape="rect" id="node84" href="mail_8h.html" title="Mailboxes: a simple system to pass integer values around." alt="" coords="880,326,936,357"/><area shape="rect" id="node97" href="fifo_8h.html" title="C&#45;HEAP kind of FIFO implementation using FIFO memories or shared heap." alt="" coords="1712,246,1760,277"/></map>
</div>
</div>
<p><a href="lock_8cc_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__le__t.html">_le_t</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlt__t.html">lt_t</a></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#aa0d35bdc7c7d1fa31fa4e118c5f72f0d">MAX_FREE_LOCKS</a>&#160;&#160;&#160;12800</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#a96dd473db0b3d10bd43390cdacb00120">DEBUG</a>(...)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#a4f25da6f22846dbb94a9d72744cfa7f7">DEBUGS</a>(...)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#a8d12d0f11fc9acd2f1fa22d80895ddae">WARNING</a>(...)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#ab8a19b79e7e9a77aa984aebbcb2022e9">DEBUGC</a>(l, c)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#a186166f9d6cd4c040807c4cfeced4ffc">LASSERT</a>(a...)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#a3506d7ad845d8a304c0b772b1a1412f6">CHECK_NON_SIGHANDLER</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#a1ba50a8e63abb6f1467bb521e718483a">BULK_RECORDS</a>&#160;&#160;&#160;(<a class="el" href="lock_8cc.html#aa0d35bdc7c7d1fa31fa4e118c5f72f0d">MAX_FREE_LOCKS</a>&gt;&gt;2)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#a942aba22f10245a3ca849be0474ef136">LOCK_LIST</a>(list)&#160;&#160;&#160;while(<a class="el" href="api_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(lcas((int*)&amp;(list)-&gt;locked,0,1)!=0))<a class="el" href="syscall_8h.html#ac68a5cf0a0ae44ff4bcf907de6d02416">Yield</a>()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#a67e505981f1890eb4924d90105011130">UNLOCK_LIST</a>(list)&#160;&#160;&#160;do{barrier();(list)-&gt;locked=0;}while(0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#a32267fc80aecff03537d835599fc972c">lck_tree_validate</a>(...)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#ada3f971806a0d988f309579bcd521f03">lck_tree_dump</a>(...)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#a4e088f2f261d0f2de85c089a39439b40">LCK_ADMIN</a>&#160;&#160;&#160;(&amp;<a class="el" href="kernel_8h.html#a1352c7443011d705fb6866ce18de5766">proc_local</a>-&gt;lck.d)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#ab201df3b2ca88151bba747e0517bc9b2">mc_rc_flush</a>(o, s, dest)&#160;&#160;&#160;do{if(<a class="el" href="api_8h.html#a217a0bd562b98ae8c2ffce44935351e1">likely</a>((uintptr_t)(o)&gt;<a class="el" href="rc_8h.html#afbf763c4dfee9837ce7864547f09094d">RING_CONSISTENCY_EDGE</a>))<a class="el" href="mc_8h.html#af1c5b8e401c4d28ac387cc96ff857cd2">mc_flush_</a>(o,s);else <a class="el" href="rc_8cc.html#a16a06db1657a0a62e81392a8147a64ab">rc_flush_</a>(o,s,dest);}while(0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#a34f597cdd764d72502548b992281e569">mc_protect</a>(<a class="el" href="cheap_8h.html#a999424097360ebe6b03975e246d1ad36">lock</a>, obj, objsize)&#160;&#160;&#160;do{(<a class="el" href="cheap_8h.html#a999424097360ebe6b03975e246d1ad36">lock</a>)-&gt;mc_obj=(obj);(<a class="el" href="cheap_8h.html#a999424097360ebe6b03975e246d1ad36">lock</a>)-&gt;mc_objsize=(objsize);}while(0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#a256a3fdf65ce66b50bacaf39167f2283">mc_unprotect</a>(<a class="el" href="cheap_8h.html#a999424097360ebe6b03975e246d1ad36">lock</a>, dest)&#160;&#160;&#160;do{if((<a class="el" href="cheap_8h.html#a999424097360ebe6b03975e246d1ad36">lock</a>)-&gt;mc_obj)<a class="el" href="lock_8cc.html#ab201df3b2ca88151bba747e0517bc9b2">mc_rc_flush</a>((<a class="el" href="cheap_8h.html#a999424097360ebe6b03975e246d1ad36">lock</a>)-&gt;mc_obj,(<a class="el" href="cheap_8h.html#a999424097360ebe6b03975e246d1ad36">lock</a>)-&gt;mc_objsize,dest);}while(0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#a08b1c53c18905e844cfe97d530dde6ca">mc_reprotect</a>(<a class="el" href="cheap_8h.html#a999424097360ebe6b03975e246d1ad36">lock</a>, obj, objsize, dest)&#160;&#160;&#160;do{if((<a class="el" href="cheap_8h.html#a999424097360ebe6b03975e246d1ad36">lock</a>)-&gt;mc_obj!=obj){<a class="el" href="lock_8cc.html#a256a3fdf65ce66b50bacaf39167f2283">mc_unprotect</a>(<a class="el" href="cheap_8h.html#a999424097360ebe6b03975e246d1ad36">lock</a>,dest);<a class="el" href="lock_8cc.html#a34f597cdd764d72502548b992281e569">mc_protect</a>(<a class="el" href="cheap_8h.html#a999424097360ebe6b03975e246d1ad36">lock</a>,obj,objsize);}}while(0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#a4e088f2f261d0f2de85c089a39439b40">LCK_ADMIN</a>&#160;&#160;&#160;(&amp;<a class="el" href="kernel_8h.html#a1352c7443011d705fb6866ce18de5766">proc_local</a>-&gt;lck.m)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#a7b382f7b31a27bacdcdefdb0abc79e21">MEM_SYNC</a>()</td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct__le__t.html">_le_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#a7e84f96ee39885f85fdaffdd95cd9438">le_t</a></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="lock_8cc.html#a7e84f96ee39885f85fdaffdd95cd9438">le_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#a955afb3e6b0d27d946cbf4a7b53e4072">lck_tree_find</a> (<a class="el" href="lock_8cc.html#a7e84f96ee39885f85fdaffdd95cd9438">le_t</a> *root, void *value)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="lock_8cc.html#a7e84f96ee39885f85fdaffdd95cd9438">le_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#a869b68428b57fa351c57b7dbb7474242">lck_tree_skew</a> (<a class="el" href="lock_8cc.html#a7e84f96ee39885f85fdaffdd95cd9438">le_t</a> *t)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="lock_8cc.html#a7e84f96ee39885f85fdaffdd95cd9438">le_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#a53bcb584dfe085013d0bf51ab17a4719">lck_tree_split</a> (<a class="el" href="lock_8cc.html#a7e84f96ee39885f85fdaffdd95cd9438">le_t</a> *t)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#a76ce97571fba8e809a8e1d885cbc0214">lck_tree_declevel</a> (<a class="el" href="lock_8cc.html#a7e84f96ee39885f85fdaffdd95cd9438">le_t</a> *t)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="lock_8cc.html#a7e84f96ee39885f85fdaffdd95cd9438">le_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#ade0712088379e9f0edb115e5ad3ff2ac">lck_tree_delete</a> (<a class="el" href="lock_8cc.html#a7e84f96ee39885f85fdaffdd95cd9438">le_t</a> *root, <a class="el" href="lock_8cc.html#a7e84f96ee39885f85fdaffdd95cd9438">le_t</a> *elem)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#a82f5b14373294dcd4e37036ce45f3fa3">lck_tree_remove</a> (<a class="el" href="structlt__t.html">lt_t</a> *tree, <a class="el" href="lock_8cc.html#a7e84f96ee39885f85fdaffdd95cd9438">le_t</a> *elem)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="lock_8cc.html#a7e84f96ee39885f85fdaffdd95cd9438">le_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#a278eb1d2877b327f78a86db80e93560e">lck_tree_insert</a> (<a class="el" href="lock_8cc.html#a7e84f96ee39885f85fdaffdd95cd9438">le_t</a> *t, <a class="el" href="lock_8cc.html#a7e84f96ee39885f85fdaffdd95cd9438">le_t</a> *x)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="lock_8cc.html#a7e84f96ee39885f85fdaffdd95cd9438">le_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#a22dba9286913fe6f5d9781baaa83d78e">lck_tree_add</a> (<a class="el" href="structlt__t.html">lt_t</a> *tree, void *value, size_t elem_size)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="lock_8h.html#a6320862fdb4e8813ad219d1a7dfbaa3e">lck_my_lock_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#a0a09650d1b5afe14b35ffa3b2719bd17">lck_list_find</a> (<a class="el" href="structlck__my__locks__t.html">lck_my_locks_t</a> *list, void *value)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#af322cfd35f0205ca589bfbdb6e024f2f">lck_list_free</a> (<a class="el" href="structlck__my__locks__t.html">lck_my_locks_t</a> *list, <a class="el" href="lock_8h.html#a6320862fdb4e8813ad219d1a7dfbaa3e">lck_my_lock_t</a> *elem)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#abef620cfcc015f06bed7a9dda61a5556">lck_list_use</a> (<a class="el" href="structlck__my__locks__t.html">lck_my_locks_t</a> *list, <a class="el" href="lock_8h.html#a6320862fdb4e8813ad219d1a7dfbaa3e">lck_my_lock_t</a> *elem)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#a4fd61a29b093a2d6c646656501919e56">lck_list_remove</a> (<a class="el" href="structlck__my__locks__t.html">lck_my_locks_t</a> *list, <a class="el" href="lock_8h.html#a6320862fdb4e8813ad219d1a7dfbaa3e">lck_my_lock_t</a> *elem)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="lock_8h.html#a6320862fdb4e8813ad219d1a7dfbaa3e">lck_my_lock_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#ab84081b20d5c83375e80a756e09e9b58">lck_list_add</a> (<a class="el" href="structlck__my__locks__t.html">lck_my_locks_t</a> *list, void *value)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="lock_8h.html#a05cd0c438a4b97a5be952e0fed13aeca">lck_daemon_lock_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#a0382b1397de54bdcb3efeede23b7d706">lck_list_find</a> (<a class="el" href="structlck__daemon__locks__t.html">lck_daemon_locks_t</a> *list, void *value)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#ab7532e0b3549c7635c91c4367abae290">lck_list_remove</a> (<a class="el" href="structlck__daemon__locks__t.html">lck_daemon_locks_t</a> *list, <a class="el" href="lock_8h.html#a05cd0c438a4b97a5be952e0fed13aeca">lck_daemon_lock_t</a> *elem)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="lock_8h.html#a05cd0c438a4b97a5be952e0fed13aeca">lck_daemon_lock_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#a32fc6be53efc8fb9bdf69dfcf8a18b88">lck_list_add</a> (<a class="el" href="structlck__daemon__locks__t.html">lck_daemon_locks_t</a> *list, void *value)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#ab2b7488a5e18f339a28f2cb0922382ba">lck_daemon_lock_stats</a> (<a class="el" href="lock_8h.html#a05cd0c438a4b97a5be952e0fed13aeca">lck_daemon_lock_t</a> *<a class="el" href="cheap_8h.html#a999424097360ebe6b03975e246d1ad36">lock</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#ad8624a204adefdc2f50ff218cbc0c6be">lck_daemon_locks_stats</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#a31ab9f196f0c01410fea5391e3a51f93">lck_request</a> (void *l, int requester)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Request lock ownage by lock daemon.  <a href="#a31ab9f196f0c01410fea5391e3a51f93"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#a451a412da581ce103118595145c99399">lck_giveup</a> (void *l, int <a class="el" href="trace_8cc.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#a38664c901386793e88b744df8df5058a">lck_register</a> (<a class="el" href="structlck__my__locks__t.html">lck_my_locks_t</a> *list, pid_t <a class="el" href="trace_8cc.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Register the lock list of a process.  <a href="#a38664c901386793e88b744df8df5058a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#a26b0f9f65cf57ce776760971390ab702">lck_ask</a> (void *l, int requester, int owner)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Non-lock daemon lock request forwarding.  <a href="#a26b0f9f65cf57ce776760971390ab702"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#adf3a67de113b7e9d240f61d004d987cf">lck_pass_p</a> (void *ul, void *l, void *protectee=NULL, size_t sprotectee=0, bool only_try_local=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#a596885f2320af1f0ae9739b6a2f73965">lck_cleanup</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#ac4d2c3c2c40793523de7b4257878d811">lck_migrate</a> (<a class="el" href="lock_8h.html#a6320862fdb4e8813ad219d1a7dfbaa3e">lck_my_lock_t</a> *<a class="el" href="cheap_8h.html#a999424097360ebe6b03975e246d1ad36">lock</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#a844e20e50ed64f478866e50d8ea863bf">lck_lock</a> (void *l)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get lock (from local or remote) corresponding to address.  <a href="#a844e20e50ed64f478866e50d8ea863bf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#a48afcf8ffd11c108a3af32f5a9aabf8f">lck_lock_p</a> (void *l, void *protectee, size_t sprotectee)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#a79e5a0ddb6b500a2ee1b68200dc3c39b">lck_pass</a> (void *ul, void *l)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#a042da57fa7339d470fd6759c9a020737">lck_unlock</a> (void *l)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlock an address Does not communicate with lock daemon, unless old lock is destroyed.  <a href="#a042da57fa7339d470fd6759c9a020737"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lock_8cc.html#afd211bec1f571a86d02d564626625f9b">lck_destroy</a> (void *l)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlock and give back to server When result &lt; 0: LR_LOCAL: lock was local LR_STOLEN: already stolen before destruction (no communication with lock daemon) LR_STEALING: theft in progress, yielding until stolen (after giveup) LR_MIGRATED: migrated (after giveup) possible combinations: LR_STOLEN || (LR_LOCAL|(LR_STEALING?||LR_MIGRATED))  <a href="#afd211bec1f571a86d02d564626625f9b"></a><br/></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a1ba50a8e63abb6f1467bb521e718483a"></a><!-- doxytag: member="lock.cc::BULK_RECORDS" ref="a1ba50a8e63abb6f1467bb521e718483a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="lock_8cc.html#a1ba50a8e63abb6f1467bb521e718483a">BULK_RECORDS</a>&#160;&#160;&#160;(<a class="el" href="lock_8cc.html#aa0d35bdc7c7d1fa31fa4e118c5f72f0d">MAX_FREE_LOCKS</a>&gt;&gt;2)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00052">52</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>Referenced by <a class="el" href="lock_8cc_source.html#l00246">lck_tree_add()</a>.</p>

</div>
</div>
<a class="anchor" id="a3506d7ad845d8a304c0b772b1a1412f6"></a><!-- doxytag: member="lock.cc::CHECK_NON_SIGHANDLER" ref="a3506d7ad845d8a304c0b772b1a1412f6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="lock_8cc.html#a3506d7ad845d8a304c0b772b1a1412f6">CHECK_NON_SIGHANDLER</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00044">44</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>Referenced by <a class="el" href="lock_8cc_source.html#l00906">lck_destroy()</a>, <a class="el" href="lock_8cc_source.html#l00686">lck_pass_p()</a>, and <a class="el" href="lock_8cc_source.html#l00831">lck_unlock()</a>.</p>

</div>
</div>
<a class="anchor" id="a96dd473db0b3d10bd43390cdacb00120"></a><!-- doxytag: member="lock.cc::DEBUG" ref="a96dd473db0b3d10bd43390cdacb00120" args="(...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="trace_8cc.html#a96dd473db0b3d10bd43390cdacb00120">DEBUG</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00039">39</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>Referenced by <a class="el" href="lock_8cc_source.html#l00539">lck_ask()</a>, <a class="el" href="lock_8cc_source.html#l00617">lck_cleanup()</a>, <a class="el" href="lock_8cc_source.html#l00906">lck_destroy()</a>, <a class="el" href="lock_8cc_source.html#l00645">lck_migrate()</a>, <a class="el" href="lock_8cc_source.html#l00686">lck_pass_p()</a>, <a class="el" href="lock_8cc_source.html#l00520">lck_register()</a>, <a class="el" href="lock_8cc_source.html#l00246">lck_tree_add()</a>, and <a class="el" href="lock_8cc_source.html#l00831">lck_unlock()</a>.</p>

</div>
</div>
<a class="anchor" id="ab8a19b79e7e9a77aa984aebbcb2022e9"></a><!-- doxytag: member="lock.cc::DEBUGC" ref="ab8a19b79e7e9a77aa984aebbcb2022e9" args="(l, c)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="lock_8cc.html#ab8a19b79e7e9a77aa984aebbcb2022e9">DEBUGC</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">l, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">c&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00042">42</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>Referenced by <a class="el" href="lock_8cc_source.html#l00539">lck_ask()</a>, <a class="el" href="lock_8cc_source.html#l00906">lck_destroy()</a>, <a class="el" href="lock_8cc_source.html#l00468">lck_giveup()</a>, <a class="el" href="lock_8cc_source.html#l00645">lck_migrate()</a>, <a class="el" href="lock_8cc_source.html#l00419">lck_request()</a>, and <a class="el" href="lock_8cc_source.html#l00831">lck_unlock()</a>.</p>

</div>
</div>
<a class="anchor" id="a4f25da6f22846dbb94a9d72744cfa7f7"></a><!-- doxytag: member="lock.cc::DEBUGS" ref="a4f25da6f22846dbb94a9d72744cfa7f7" args="(...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="lock_8cc.html#a4f25da6f22846dbb94a9d72744cfa7f7">DEBUGS</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00040">40</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>Referenced by <a class="el" href="lock_8cc_source.html#l00468">lck_giveup()</a>, and <a class="el" href="lock_8cc_source.html#l00419">lck_request()</a>.</p>

</div>
</div>
<a class="anchor" id="a186166f9d6cd4c040807c4cfeced4ffc"></a><!-- doxytag: member="lock.cc::LASSERT" ref="a186166f9d6cd4c040807c4cfeced4ffc" args="(a...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="lock_8cc.html#a186166f9d6cd4c040807c4cfeced4ffc">LASSERT</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">a...</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00043">43</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>Referenced by <a class="el" href="lock_8cc_source.html#l00539">lck_ask()</a>, <a class="el" href="lock_8cc_source.html#l00617">lck_cleanup()</a>, <a class="el" href="lock_8cc_source.html#l00906">lck_destroy()</a>, <a class="el" href="lock_8cc_source.html#l00468">lck_giveup()</a>, <a class="el" href="lock_8cc_source.html#l00348">lck_list_add()</a>, <a class="el" href="lock_8cc_source.html#l00289">lck_list_free()</a>, <a class="el" href="lock_8cc_source.html#l00339">lck_list_remove()</a>, <a class="el" href="lock_8cc_source.html#l00312">lck_list_use()</a>, <a class="el" href="lock_8cc_source.html#l00645">lck_migrate()</a>, <a class="el" href="lock_8cc_source.html#l00686">lck_pass_p()</a>, <a class="el" href="lock_8cc_source.html#l00520">lck_register()</a>, <a class="el" href="lock_8cc_source.html#l00419">lck_request()</a>, <a class="el" href="lock_8cc_source.html#l00246">lck_tree_add()</a>, <a class="el" href="lock_8cc_source.html#l00159">lck_tree_declevel()</a>, <a class="el" href="lock_8cc_source.html#l00172">lck_tree_delete()</a>, <a class="el" href="lock_8cc_source.html#l00227">lck_tree_insert()</a>, and <a class="el" href="lock_8cc_source.html#l00831">lck_unlock()</a>.</p>

</div>
</div>
<a class="anchor" id="a4e088f2f261d0f2de85c089a39439b40"></a><!-- doxytag: member="lock.cc::LCK_ADMIN" ref="a4e088f2f261d0f2de85c089a39439b40" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="lock_8cc.html#a4e088f2f261d0f2de85c089a39439b40">LCK_ADMIN</a>&#160;&#160;&#160;(&amp;<a class="el" href="kernel_8h.html#a1352c7443011d705fb6866ce18de5766">proc_local</a>-&gt;lck.d)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00615">615</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>Referenced by <a class="el" href="lock_8cc_source.html#l00539">lck_ask()</a>, <a class="el" href="lock_8cc_source.html#l00617">lck_cleanup()</a>, <a class="el" href="lock_8cc_source.html#l00906">lck_destroy()</a>, <a class="el" href="lock_8cc_source.html#l00468">lck_giveup()</a>, <a class="el" href="lock_8cc_source.html#l00686">lck_pass_p()</a>, <a class="el" href="lock_8cc_source.html#l00520">lck_register()</a>, <a class="el" href="lock_8cc_source.html#l00419">lck_request()</a>, and <a class="el" href="lock_8cc_source.html#l00831">lck_unlock()</a>.</p>

</div>
</div>
<a class="anchor" id="a4e088f2f261d0f2de85c089a39439b40"></a><!-- doxytag: member="lock.cc::LCK_ADMIN" ref="a4e088f2f261d0f2de85c089a39439b40" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="lock_8cc.html#a4e088f2f261d0f2de85c089a39439b40">LCK_ADMIN</a>&#160;&#160;&#160;(&amp;<a class="el" href="kernel_8h.html#a1352c7443011d705fb6866ce18de5766">proc_local</a>-&gt;lck.m)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00615">615</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

</div>
</div>
<a class="anchor" id="ada3f971806a0d988f309579bcd521f03"></a><!-- doxytag: member="lock.cc::lck_tree_dump" ref="ada3f971806a0d988f309579bcd521f03" args="(...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="lock_8cc.html#ada3f971806a0d988f309579bcd521f03">lck_tree_dump</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00125">125</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a32267fc80aecff03537d835599fc972c"></a><!-- doxytag: member="lock.cc::lck_tree_validate" ref="a32267fc80aecff03537d835599fc972c" args="(...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="lock_8cc.html#a32267fc80aecff03537d835599fc972c">lck_tree_validate</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00124">124</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>Referenced by <a class="el" href="lock_8cc_source.html#l00339">lck_list_remove()</a>, and <a class="el" href="lock_8cc_source.html#l00246">lck_tree_add()</a>.</p>

</div>
</div>
<a class="anchor" id="a942aba22f10245a3ca849be0474ef136"></a><!-- doxytag: member="lock.cc::LOCK_LIST" ref="a942aba22f10245a3ca849be0474ef136" args="(list)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="lock_8cc.html#a942aba22f10245a3ca849be0474ef136">LOCK_LIST</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">list</td><td>)</td>
          <td>&#160;&#160;&#160;while(<a class="el" href="api_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(lcas((int*)&amp;(list)-&gt;locked,0,1)!=0))<a class="el" href="syscall_8h.html#ac68a5cf0a0ae44ff4bcf907de6d02416">Yield</a>()</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00075">75</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>Referenced by <a class="el" href="lock_8cc_source.html#l00539">lck_ask()</a>, <a class="el" href="lock_8cc_source.html#l00348">lck_list_add()</a>, and <a class="el" href="lock_8cc_source.html#l00339">lck_list_remove()</a>.</p>

</div>
</div>
<a class="anchor" id="aa0d35bdc7c7d1fa31fa4e118c5f72f0d"></a><!-- doxytag: member="lock.cc::MAX_FREE_LOCKS" ref="aa0d35bdc7c7d1fa31fa4e118c5f72f0d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="lock_8cc.html#aa0d35bdc7c7d1fa31fa4e118c5f72f0d">MAX_FREE_LOCKS</a>&#160;&#160;&#160;12800</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00010">10</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>Referenced by <a class="el" href="lock_8cc_source.html#l00831">lck_unlock()</a>.</p>

</div>
</div>
<a class="anchor" id="a34f597cdd764d72502548b992281e569"></a><!-- doxytag: member="lock.cc::mc_protect" ref="a34f597cdd764d72502548b992281e569" args="(lock, obj, objsize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="lock_8cc.html#a34f597cdd764d72502548b992281e569">mc_protect</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="cheap_8h.html#a999424097360ebe6b03975e246d1ad36">lock</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">obj, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">objsize&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;do{(<a class="el" href="cheap_8h.html#a999424097360ebe6b03975e246d1ad36">lock</a>)-&gt;mc_obj=(obj);(<a class="el" href="cheap_8h.html#a999424097360ebe6b03975e246d1ad36">lock</a>)-&gt;mc_objsize=(objsize);}while(0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00510">510</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>Referenced by <a class="el" href="lock_8cc_source.html#l00686">lck_pass_p()</a>.</p>

</div>
</div>
<a class="anchor" id="ab201df3b2ca88151bba747e0517bc9b2"></a><!-- doxytag: member="lock.cc::mc_rc_flush" ref="ab201df3b2ca88151bba747e0517bc9b2" args="(o, s, dest)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="lock_8cc.html#ab201df3b2ca88151bba747e0517bc9b2">mc_rc_flush</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">o, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">s, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">dest&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;do{if(<a class="el" href="api_8h.html#a217a0bd562b98ae8c2ffce44935351e1">likely</a>((uintptr_t)(o)&gt;<a class="el" href="rc_8h.html#afbf763c4dfee9837ce7864547f09094d">RING_CONSISTENCY_EDGE</a>))<a class="el" href="mc_8h.html#af1c5b8e401c4d28ac387cc96ff857cd2">mc_flush_</a>(o,s);else <a class="el" href="rc_8cc.html#a16a06db1657a0a62e81392a8147a64ab">rc_flush_</a>(o,s,dest);}while(0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00502">502</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a08b1c53c18905e844cfe97d530dde6ca"></a><!-- doxytag: member="lock.cc::mc_reprotect" ref="a08b1c53c18905e844cfe97d530dde6ca" args="(lock, obj, objsize, dest)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="lock_8cc.html#a08b1c53c18905e844cfe97d530dde6ca">mc_reprotect</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="cheap_8h.html#a999424097360ebe6b03975e246d1ad36">lock</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">obj, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">objsize, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">dest&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;do{if((<a class="el" href="cheap_8h.html#a999424097360ebe6b03975e246d1ad36">lock</a>)-&gt;mc_obj!=obj){<a class="el" href="lock_8cc.html#a256a3fdf65ce66b50bacaf39167f2283">mc_unprotect</a>(<a class="el" href="cheap_8h.html#a999424097360ebe6b03975e246d1ad36">lock</a>,dest);<a class="el" href="lock_8cc.html#a34f597cdd764d72502548b992281e569">mc_protect</a>(<a class="el" href="cheap_8h.html#a999424097360ebe6b03975e246d1ad36">lock</a>,obj,objsize);}}while(0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00512">512</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>Referenced by <a class="el" href="lock_8cc_source.html#l00686">lck_pass_p()</a>.</p>

</div>
</div>
<a class="anchor" id="a256a3fdf65ce66b50bacaf39167f2283"></a><!-- doxytag: member="lock.cc::mc_unprotect" ref="a256a3fdf65ce66b50bacaf39167f2283" args="(lock, dest)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="lock_8cc.html#a256a3fdf65ce66b50bacaf39167f2283">mc_unprotect</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="cheap_8h.html#a999424097360ebe6b03975e246d1ad36">lock</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">dest&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;do{if((<a class="el" href="cheap_8h.html#a999424097360ebe6b03975e246d1ad36">lock</a>)-&gt;mc_obj)<a class="el" href="lock_8cc.html#ab201df3b2ca88151bba747e0517bc9b2">mc_rc_flush</a>((<a class="el" href="cheap_8h.html#a999424097360ebe6b03975e246d1ad36">lock</a>)-&gt;mc_obj,(<a class="el" href="cheap_8h.html#a999424097360ebe6b03975e246d1ad36">lock</a>)-&gt;mc_objsize,dest);}while(0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00511">511</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>Referenced by <a class="el" href="lock_8cc_source.html#l00539">lck_ask()</a>, <a class="el" href="lock_8cc_source.html#l00906">lck_destroy()</a>, and <a class="el" href="lock_8cc_source.html#l00645">lck_migrate()</a>.</p>

</div>
</div>
<a class="anchor" id="a7b382f7b31a27bacdcdefdb0abc79e21"></a><!-- doxytag: member="lock.cc::MEM_SYNC" ref="a7b382f7b31a27bacdcdefdb0abc79e21" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="lock_8cc.html#a7b382f7b31a27bacdcdefdb0abc79e21">MEM_SYNC</a></td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span>{<a class="code" href="device_8h.html#ab14b1d47791c393997c0898b57ba6f09" title="Invalidates (means: just drop data from cache) the cacheline containing the specified word...">InvalidateDCacheWord</a>((<span class="keywordtype">void</span>*)<a class="code" href="lock_8h.html#ae3852a7bac2476f13cb4a168fa0d6ae6" title="Unlock an address Does not communicate with lock daemon, unless old lock is destroyed.">lck_unlock</a>); \
    volatile <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>* p <a class="code" href="info__app_8h.html#aeab68f17dc686a2f7dc72ab2b712e464">__attribute__</a>((__may_alias__))=(<span class="keyword">volatile</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>*)<a class="code" href="lock_8h.html#ae3852a7bac2476f13cb4a168fa0d6ae6" title="Unlock an address Does not communicate with lock daemon, unless old lock is destroyed.">lck_unlock</a>;*p;barrier();}<span class="keywordflow">while</span>(0)
</pre></div>
<p>Definition at line <a class="el" href="lock_8cc_source.html#l00813">813</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>Referenced by <a class="el" href="lock_8cc_source.html#l00831">lck_unlock()</a>.</p>

</div>
</div>
<a class="anchor" id="a67e505981f1890eb4924d90105011130"></a><!-- doxytag: member="lock.cc::UNLOCK_LIST" ref="a67e505981f1890eb4924d90105011130" args="(list)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="lock_8cc.html#a67e505981f1890eb4924d90105011130">UNLOCK_LIST</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">list</td><td>)</td>
          <td>&#160;&#160;&#160;do{barrier();(list)-&gt;locked=0;}while(0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00077">77</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>Referenced by <a class="el" href="lock_8cc_source.html#l00539">lck_ask()</a>, <a class="el" href="lock_8cc_source.html#l00348">lck_list_add()</a>, and <a class="el" href="lock_8cc_source.html#l00339">lck_list_remove()</a>.</p>

</div>
</div>
<a class="anchor" id="a8d12d0f11fc9acd2f1fa22d80895ddae"></a><!-- doxytag: member="lock.cc::WARNING" ref="a8d12d0f11fc9acd2f1fa22d80895ddae" args="(...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="lock_8cc.html#a8d12d0f11fc9acd2f1fa22d80895ddae">WARNING</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00041">41</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>Referenced by <a class="el" href="lock_8cc_source.html#l00617">lck_cleanup()</a>.</p>

</div>
</div>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="a7e84f96ee39885f85fdaffdd95cd9438"></a><!-- doxytag: member="lock.cc::le_t" ref="a7e84f96ee39885f85fdaffdd95cd9438" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct__le__t.html">_le_t</a>  <a class="el" href="lock_8cc.html#a7e84f96ee39885f85fdaffdd95cd9438">le_t</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a26b0f9f65cf57ce776760971390ab702"></a><!-- doxytag: member="lock.cc::lck_ask" ref="a26b0f9f65cf57ce776760971390ab702" args="(void *l, int requester, int owner)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="lock_8cc.html#a26b0f9f65cf57ce776760971390ab702">lck_ask</a> </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>l</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>requester</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>owner</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Non-lock daemon lock request forwarding. </p>

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00539">539</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>References <a class="el" href="graphix_8h_source.html#l00126">a</a>, <a class="el" href="lock_8cc_source.html#l00039">DEBUG</a>, <a class="el" href="lock_8cc_source.html#l00042">DEBUGC</a>, <a class="el" href="api_8cc_source.html#l00050">getgpidproc()</a>, <a class="el" href="syscall_8h.html#a8f8f8cfcfa6c1855a3b9d47669f39df3">getpid()</a>, <a class="el" href="device_8h_source.html#l00196">GetProcID()</a>, <a class="el" href="lock_8cc_source.html#l00043">LASSERT</a>, <a class="el" href="lock_8cc_source.html#l00615">LCK_ADMIN</a>, <a class="el" href="lock_8h_source.html#l00032">LCK_DESTROYED</a>, <a class="el" href="lock_8h_source.html#l00032">LCK_FREE</a>, <a class="el" href="lock_8cc_source.html#l00284">lck_list_find()</a>, <a class="el" href="lock_8h_source.html#l00032">LCK_LOCKED</a>, <a class="el" href="lock_8h_source.html#l00032">LCK_MIGRATED</a>, <a class="el" href="lock_8h_source.html#l00033">LCK_MINE</a>, <a class="el" href="lock_8h_source.html#l00033">LCK_REQUEST</a>, <a class="el" href="lock_8h_source.html#l00032">LCK_STOLEN</a>, <a class="el" href="lock_8h_source.html#l00092">lck_daemon_admin_t::lists</a>, <a class="el" href="cheap_8cc_source.html#l00279">lock()</a>, <a class="el" href="lock_8cc_source.html#l00075">LOCK_LIST</a>, <a class="el" href="helix__config_8h_source.html#l00129">MAX_PROCESSES</a>, <a class="el" href="lock_8cc_source.html#l00511">mc_unprotect</a>, <a class="el" href="lock_8h_source.html#l00051">_lck_my_lock_t::own</a>, <a class="el" href="lock_8h_source.html#l00054">_lck_my_lock_t::pid</a>, <a class="el" href="lock_8h_source.html#l00047">_lck_my_lock_t::state</a>, <a class="el" href="lock_8h_source.html#l00048">_lck_my_lock_t::state_</a>, <a class="el" href="api_8h_source.html#l00008">unlikely</a>, and <a class="el" href="lock_8cc_source.html#l00077">UNLOCK_LIST</a>.</p>

<p>Referenced by <a class="el" href="DefaultTaskDaemon_8cc_source.html#l00601">ProcessRequest()</a>.</p>

</div>
</div>
<a class="anchor" id="a596885f2320af1f0ae9739b6a2f73965"></a><!-- doxytag: member="lock.cc::lck_cleanup" ref="a596885f2320af1f0ae9739b6a2f73965" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="lock_8cc.html#a596885f2320af1f0ae9739b6a2f73965">lck_cleanup</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00617">617</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>References <a class="el" href="lock_8cc_source.html#l00039">DEBUG</a>, <a class="el" href="DefaultTaskDaemon_8cc_source.html#l01725">dLockRegister()</a>, <a class="el" href="lock_8cc_source.html#l00043">LASSERT</a>, <a class="el" href="lock_8cc_source.html#l00615">LCK_ADMIN</a>, <a class="el" href="lock_8cc_source.html#l00906">lck_destroy()</a>, <a class="el" href="lock_8cc_source.html#l00686">lck_pass_p()</a>, <a class="el" href="lock_8h_source.html#l00043">_lck_my_lock_t::lock</a>, <a class="el" href="lock_8h_source.html#l00056">_lck_my_lock_t::mc_obj</a>, <a class="el" href="lock_8h_source.html#l00062">lck_my_locks_t::root</a>, and <a class="el" href="lock_8cc_source.html#l00041">WARNING</a>.</p>

<p>Referenced by <a class="el" href="lock_8cc_source.html#l00686">lck_pass_p()</a>.</p>

</div>
</div>
<a class="anchor" id="ab2b7488a5e18f339a28f2cb0922382ba"></a><!-- doxytag: member="lock.cc::lck_daemon_lock_stats" ref="ab2b7488a5e18f339a28f2cb0922382ba" args="(lck_daemon_lock_t *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="lock_8cc.html#ab2b7488a5e18f339a28f2cb0922382ba">lck_daemon_lock_stats</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lock_8h.html#a05cd0c438a4b97a5be952e0fed13aeca">lck_daemon_lock_t</a> *&#160;</td>
          <td class="paramname"><em>lock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00403">403</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>References <a class="el" href="lock_8h_source.html#l00081">_lck_daemon_lock_t::count_migrated</a>, <a class="el" href="lock_8h_source.html#l00077">_lck_daemon_lock_t::lock</a>, <a class="el" href="lock_8h_source.html#l00079">_lck_daemon_lock_t::owner</a>, and <a class="el" href="lock_8h_source.html#l00078">_lck_daemon_lock_t::state</a>.</p>

</div>
</div>
<a class="anchor" id="ad8624a204adefdc2f50ff218cbc0c6be"></a><!-- doxytag: member="lock.cc::lck_daemon_locks_stats" ref="ad8624a204adefdc2f50ff218cbc0c6be" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="lock_8cc.html#ad8624a204adefdc2f50ff218cbc0c6be">lck_daemon_locks_stats</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00408">408</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

</div>
</div>
<a class="anchor" id="afd211bec1f571a86d02d564626625f9b"></a><!-- doxytag: member="lock.cc::lck_destroy" ref="afd211bec1f571a86d02d564626625f9b" args="(void *l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="lock_8cc.html#afd211bec1f571a86d02d564626625f9b">lck_destroy</a> </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>l</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Unlock and give back to server When result &lt; 0: LR_LOCAL: lock was local LR_STOLEN: already stolen before destruction (no communication with lock daemon) LR_STEALING: theft in progress, yielding until stolen (after giveup) LR_MIGRATED: migrated (after giveup) possible combinations: LR_STOLEN || (LR_LOCAL|(LR_STEALING?||LR_MIGRATED)) </p>

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00906">906</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>References <a class="el" href="lock_8cc_source.html#l00044">CHECK_NON_SIGHANDLER</a>, <a class="el" href="lock_8cc_source.html#l00039">DEBUG</a>, <a class="el" href="lock_8cc_source.html#l00042">DEBUGC</a>, <a class="el" href="DefaultTaskDaemon_8cc_source.html#l01768">dLockGiveup()</a>, <a class="el" href="syscall_8h.html#a8f8f8cfcfa6c1855a3b9d47669f39df3">getpid()</a>, <a class="el" href="lock_8cc_source.html#l00043">LASSERT</a>, <a class="el" href="lock_8cc_source.html#l00615">LCK_ADMIN</a>, <a class="el" href="lock_8h_source.html#l00032">LCK_DESTROYED</a>, <a class="el" href="lock_8h_source.html#l00032">LCK_FREE</a>, <a class="el" href="lock_8cc_source.html#l00284">lck_list_find()</a>, <a class="el" href="lock_8cc_source.html#l00339">lck_list_remove()</a>, <a class="el" href="lock_8cc_source.html#l00312">lck_list_use()</a>, <a class="el" href="lock_8h_source.html#l00032">LCK_LOCKED</a>, <a class="el" href="lock_8cc_source.html#l00645">lck_migrate()</a>, <a class="el" href="lock_8h_source.html#l00032">LCK_MIGRATED</a>, <a class="el" href="lock_8h_source.html#l00033">LCK_MINE</a>, <a class="el" href="lock_8h_source.html#l00033">LCK_REQUEST</a>, <a class="el" href="lock_8h_source.html#l00032">LCK_STOLEN</a>, <a class="el" href="cheap_8cc_source.html#l00279">lock()</a>, <a class="el" href="lock_8h_source.html#l00124">LR_LOCAL</a>, <a class="el" href="lock_8h_source.html#l00131">LR_MIGRATED</a>, <a class="el" href="lock_8h_source.html#l00125">LR_STOLEN</a>, <a class="el" href="lock_8cc_source.html#l00511">mc_unprotect</a>, <a class="el" href="lock_8h_source.html#l00051">_lck_my_lock_t::own</a>, and <a class="el" href="lock_8h_source.html#l00047">_lck_my_lock_t::state</a>.</p>

<p>Referenced by <a class="el" href="pmc_8h_source.html#l00357">PMC_NS::RCBackend&lt; T &gt;::exit_ro()</a>, <a class="el" href="pmc_8h_source.html#l00345">PMC_NS::RCBackend&lt; T &gt;::exit_x()</a>, <a class="el" href="lock_8cc_source.html#l00617">lck_cleanup()</a>, <a class="el" href="lock_8cc_source.html#l00831">lck_unlock()</a>, <a class="el" href="mc_8h_source.html#l00133">mc_release_eager_()</a>, <a class="el" href="mutex_8cc_source.html#l00370">pthread_mutex_destroy()</a>, <a class="el" href="mutex_8cc_source.html#l00313">pthread_mutex_protect()</a>, <a class="el" href="pmc_8h_source.html#l00072">PMC_NS::Location&lt; T &gt;::release()</a>, and <a class="el" href="pmc_8h_source.html#l00333">PMC_NS::RCBackend&lt; T &gt;::release()</a>.</p>

</div>
</div>
<a class="anchor" id="a451a412da581ce103118595145c99399"></a><!-- doxytag: member="lock.cc::lck_giveup" ref="a451a412da581ce103118595145c99399" args="(void *l, int pid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="lock_8cc.html#a451a412da581ce103118595145c99399">lck_giveup</a> </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>l</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00468">468</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>References <a class="el" href="graphix_8h_source.html#l00126">a</a>, <a class="el" href="lock_8cc_source.html#l00042">DEBUGC</a>, <a class="el" href="lock_8cc_source.html#l00040">DEBUGS</a>, <a class="el" href="syscall_8h.html#a8f8f8cfcfa6c1855a3b9d47669f39df3">getpid()</a>, <a class="el" href="device_8h_source.html#l00196">GetProcID()</a>, <a class="el" href="lock_8cc_source.html#l00043">LASSERT</a>, <a class="el" href="lock_8cc_source.html#l00615">LCK_ADMIN</a>, <a class="el" href="lock_8cc_source.html#l00284">lck_list_find()</a>, <a class="el" href="lock_8cc_source.html#l00339">lck_list_remove()</a>, <a class="el" href="lock_8h_source.html#l00034">LCK_NEW</a>, <a class="el" href="lock_8h_source.html#l00034">LCK_OWNED</a>, <a class="el" href="cheap_8cc_source.html#l00279">lock()</a>, <a class="el" href="lock_8h_source.html#l00017">LOCK_DAEMON_CORE</a>, <a class="el" href="lock_8h_source.html#l00091">lck_daemon_admin_t::locks</a>, <a class="el" href="lock_8h_source.html#l00079">_lck_daemon_lock_t::owner</a>, <a class="el" href="lock_8h_source.html#l00078">_lck_daemon_lock_t::state</a>, and <a class="el" href="api_8h_source.html#l00008">unlikely</a>.</p>

<p>Referenced by <a class="el" href="DefaultTaskDaemon_8cc_source.html#l00601">ProcessRequest()</a>.</p>

</div>
</div>
<a class="anchor" id="ab84081b20d5c83375e80a756e09e9b58"></a><!-- doxytag: member="lock.cc::lck_list_add" ref="ab84081b20d5c83375e80a756e09e9b58" args="(lck_my_locks_t *list, void *value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="lock_8h.html#a6320862fdb4e8813ad219d1a7dfbaa3e">lck_my_lock_t</a>* <a class="el" href="lock_8cc.html#a32fc6be53efc8fb9bdf69dfcf8a18b88">lck_list_add</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlck__my__locks__t.html">lck_my_locks_t</a> *&#160;</td>
          <td class="paramname"><em>list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00348">348</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>References <a class="el" href="lock_8cc_source.html#l00043">LASSERT</a>, <a class="el" href="lock_8h_source.html#l00032">LCK_LOCKED</a>, <a class="el" href="lock_8h_source.html#l00033">LCK_MINE</a>, <a class="el" href="lock_8cc_source.html#l00246">lck_tree_add()</a>, <a class="el" href="lock_8cc_source.html#l00075">LOCK_LIST</a>, <a class="el" href="lock_8h_source.html#l00051">_lck_my_lock_t::own</a>, <a class="el" href="lock_8h_source.html#l00047">_lck_my_lock_t::state</a>, <a class="el" href="cheap_8cc_source.html#l00327">unlock()</a>, and <a class="el" href="lock_8cc_source.html#l00077">UNLOCK_LIST</a>.</p>

<p>Referenced by <a class="el" href="lock_8cc_source.html#l00686">lck_pass_p()</a>, and <a class="el" href="lock_8cc_source.html#l00419">lck_request()</a>.</p>

</div>
</div>
<a class="anchor" id="a32fc6be53efc8fb9bdf69dfcf8a18b88"></a><!-- doxytag: member="lock.cc::lck_list_add" ref="a32fc6be53efc8fb9bdf69dfcf8a18b88" args="(lck_daemon_locks_t *list, void *value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="lock_8h.html#a05cd0c438a4b97a5be952e0fed13aeca">lck_daemon_lock_t</a>* <a class="el" href="lock_8cc.html#a32fc6be53efc8fb9bdf69dfcf8a18b88">lck_list_add</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlck__daemon__locks__t.html">lck_daemon_locks_t</a> *&#160;</td>
          <td class="paramname"><em>list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00380">380</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>References <a class="el" href="lock_8cc_source.html#l00043">LASSERT</a>, <a class="el" href="lock_8h_source.html#l00034">LCK_NEW</a>, <a class="el" href="lock_8cc_source.html#l00246">lck_tree_add()</a>, <a class="el" href="lock_8h_source.html#l00079">_lck_daemon_lock_t::owner</a>, <a class="el" href="lock_8h_source.html#l00078">_lck_daemon_lock_t::state</a>, <a class="el" href="api_8h_source.html#l00008">unlikely</a>, and <a class="el" href="cheap_8cc_source.html#l00327">unlock()</a>.</p>

</div>
</div>
<a class="anchor" id="a0a09650d1b5afe14b35ffa3b2719bd17"></a><!-- doxytag: member="lock.cc::lck_list_find" ref="a0a09650d1b5afe14b35ffa3b2719bd17" args="(lck_my_locks_t *list, void *value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="lock_8h.html#a6320862fdb4e8813ad219d1a7dfbaa3e">lck_my_lock_t</a>* <a class="el" href="lock_8cc.html#a0382b1397de54bdcb3efeede23b7d706">lck_list_find</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlck__my__locks__t.html">lck_my_locks_t</a> *&#160;</td>
          <td class="paramname"><em>list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00284">284</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>References <a class="el" href="lock_8cc_source.html#l00129">lck_tree_find()</a>, and <a class="el" href="lock_8h_source.html#l00062">lck_my_locks_t::root</a>.</p>

<p>Referenced by <a class="el" href="lock_8cc_source.html#l00539">lck_ask()</a>, <a class="el" href="lock_8cc_source.html#l00906">lck_destroy()</a>, <a class="el" href="lock_8cc_source.html#l00468">lck_giveup()</a>, <a class="el" href="lock_8cc_source.html#l00686">lck_pass_p()</a>, <a class="el" href="lock_8cc_source.html#l00419">lck_request()</a>, and <a class="el" href="lock_8cc_source.html#l00831">lck_unlock()</a>.</p>

</div>
</div>
<a class="anchor" id="a0382b1397de54bdcb3efeede23b7d706"></a><!-- doxytag: member="lock.cc::lck_list_find" ref="a0382b1397de54bdcb3efeede23b7d706" args="(lck_daemon_locks_t *list, void *value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="lock_8h.html#a05cd0c438a4b97a5be952e0fed13aeca">lck_daemon_lock_t</a>* <a class="el" href="lock_8cc.html#a0382b1397de54bdcb3efeede23b7d706">lck_list_find</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlck__daemon__locks__t.html">lck_daemon_locks_t</a> *&#160;</td>
          <td class="paramname"><em>list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00369">369</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>References <a class="el" href="lock_8cc_source.html#l00129">lck_tree_find()</a>, and <a class="el" href="lock_8h_source.html#l00086">lck_daemon_locks_t::root</a>.</p>

</div>
</div>
<a class="anchor" id="af322cfd35f0205ca589bfbdb6e024f2f"></a><!-- doxytag: member="lock.cc::lck_list_free" ref="af322cfd35f0205ca589bfbdb6e024f2f" args="(lck_my_locks_t *list, lck_my_lock_t *elem)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="lock_8cc.html#af322cfd35f0205ca589bfbdb6e024f2f">lck_list_free</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlck__my__locks__t.html">lck_my_locks_t</a> *&#160;</td>
          <td class="paramname"><em>list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lock_8h.html#a6320862fdb4e8813ad219d1a7dfbaa3e">lck_my_lock_t</a> *&#160;</td>
          <td class="paramname"><em>elem</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00289">289</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>References <a class="el" href="lock_8h_source.html#l00066">lck_my_locks_t::free</a>, <a class="el" href="lock_8h_source.html#l00064">lck_my_locks_t::free_first</a>, <a class="el" href="lock_8h_source.html#l00065">lck_my_locks_t::free_last</a>, <a class="el" href="lock_8cc_source.html#l00043">LASSERT</a>, <a class="el" href="lock_8h_source.html#l00043">_lck_my_lock_t::lock</a>, <a class="el" href="lock_8h_source.html#l00044">_lck_my_lock_t::next_free</a>, and <a class="el" href="lock_8h_source.html#l00045">_lck_my_lock_t::prev_free</a>.</p>

<p>Referenced by <a class="el" href="lock_8cc_source.html#l00831">lck_unlock()</a>.</p>

</div>
</div>
<a class="anchor" id="a4fd61a29b093a2d6c646656501919e56"></a><!-- doxytag: member="lock.cc::lck_list_remove" ref="a4fd61a29b093a2d6c646656501919e56" args="(lck_my_locks_t *list, lck_my_lock_t *elem)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="lock_8cc.html#ab7532e0b3549c7635c91c4367abae290">lck_list_remove</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlck__my__locks__t.html">lck_my_locks_t</a> *&#160;</td>
          <td class="paramname"><em>list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lock_8h.html#a6320862fdb4e8813ad219d1a7dfbaa3e">lck_my_lock_t</a> *&#160;</td>
          <td class="paramname"><em>elem</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00339">339</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>References <a class="el" href="lock_8cc_source.html#l00043">LASSERT</a>, <a class="el" href="lock_8cc_source.html#l00220">lck_tree_remove()</a>, <a class="el" href="lock_8cc_source.html#l00124">lck_tree_validate</a>, <a class="el" href="lock_8cc_source.html#l00075">LOCK_LIST</a>, and <a class="el" href="lock_8cc_source.html#l00077">UNLOCK_LIST</a>.</p>

<p>Referenced by <a class="el" href="lock_8cc_source.html#l00906">lck_destroy()</a>, <a class="el" href="lock_8cc_source.html#l00468">lck_giveup()</a>, and <a class="el" href="lock_8cc_source.html#l00831">lck_unlock()</a>.</p>

</div>
</div>
<a class="anchor" id="ab7532e0b3549c7635c91c4367abae290"></a><!-- doxytag: member="lock.cc::lck_list_remove" ref="ab7532e0b3549c7635c91c4367abae290" args="(lck_daemon_locks_t *list, lck_daemon_lock_t *elem)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="lock_8cc.html#ab7532e0b3549c7635c91c4367abae290">lck_list_remove</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlck__daemon__locks__t.html">lck_daemon_locks_t</a> *&#160;</td>
          <td class="paramname"><em>list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lock_8h.html#a05cd0c438a4b97a5be952e0fed13aeca">lck_daemon_lock_t</a> *&#160;</td>
          <td class="paramname"><em>elem</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00373">373</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>References <a class="el" href="lock_8cc_source.html#l00043">LASSERT</a>, <a class="el" href="lock_8cc_source.html#l00220">lck_tree_remove()</a>, and <a class="el" href="lock_8cc_source.html#l00124">lck_tree_validate</a>.</p>

</div>
</div>
<a class="anchor" id="abef620cfcc015f06bed7a9dda61a5556"></a><!-- doxytag: member="lock.cc::lck_list_use" ref="abef620cfcc015f06bed7a9dda61a5556" args="(lck_my_locks_t *list, lck_my_lock_t *elem)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="lock_8cc.html#abef620cfcc015f06bed7a9dda61a5556">lck_list_use</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlck__my__locks__t.html">lck_my_locks_t</a> *&#160;</td>
          <td class="paramname"><em>list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lock_8h.html#a6320862fdb4e8813ad219d1a7dfbaa3e">lck_my_lock_t</a> *&#160;</td>
          <td class="paramname"><em>elem</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00312">312</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>References <a class="el" href="lock_8h_source.html#l00066">lck_my_locks_t::free</a>, <a class="el" href="lock_8h_source.html#l00064">lck_my_locks_t::free_first</a>, <a class="el" href="lock_8h_source.html#l00065">lck_my_locks_t::free_last</a>, <a class="el" href="lock_8cc_source.html#l00043">LASSERT</a>, <a class="el" href="lock_8h_source.html#l00043">_lck_my_lock_t::lock</a>, <a class="el" href="lock_8h_source.html#l00044">_lck_my_lock_t::next_free</a>, and <a class="el" href="lock_8h_source.html#l00045">_lck_my_lock_t::prev_free</a>.</p>

<p>Referenced by <a class="el" href="lock_8cc_source.html#l00906">lck_destroy()</a>, and <a class="el" href="lock_8cc_source.html#l00686">lck_pass_p()</a>.</p>

</div>
</div>
<a class="anchor" id="a844e20e50ed64f478866e50d8ea863bf"></a><!-- doxytag: member="lock.cc::lck_lock" ref="a844e20e50ed64f478866e50d8ea863bf" args="(void *l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="lock_8cc.html#a844e20e50ed64f478866e50d8ea863bf">lck_lock</a> </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>l</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get lock (from local or remote) corresponding to address. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">l</td><td>the address to lock, cannot be NULL </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>&lt;=0 on success, EDEADLCK when already locked, otherwise an errno. When locking fails, the lock is probably in an unknown and unrecovereable state. When result &lt; 0: LR_LOCAL: lock is lock, relocked LR_STOLEN: lock is stolen, request remote LR_UNKNOWN: lock is not here, ask lock server LR_NEW: new lock (after asking lock server) LR_FREE: we stole lock LR_LOCKED: lock was remote and locked possible combinations: LR_LOCAL || ((LR_STOLEN||LR_UNKNOWN) | (LR_NEW||LR_FREE||LR_LOCKED)) </dd></dl>

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00674">674</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>References <a class="el" href="lock_8cc_source.html#l00686">lck_pass_p()</a>.</p>

<p>Referenced by <a class="el" href="pmc_8h_source.html#l00067">PMC_NS::Location&lt; T &gt;::acquire()</a>, <a class="el" href="mc_8h_source.html#l00145">mc_nullify_()</a>, <a class="el" href="mutex_8cc_source.html#l00381">pthread_mutex_lock()</a>, and <a class="el" href="mutex_8cc_source.html#l00313">pthread_mutex_protect()</a>.</p>

</div>
</div>
<a class="anchor" id="a48afcf8ffd11c108a3af32f5a9aabf8f"></a><!-- doxytag: member="lock.cc::lck_lock_p" ref="a48afcf8ffd11c108a3af32f5a9aabf8f" args="(void *l, void *protectee, size_t sprotectee)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="lock_8cc.html#a48afcf8ffd11c108a3af32f5a9aabf8f">lck_lock_p</a> </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>l</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>protectee</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>sprotectee</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00678">678</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>References <a class="el" href="lock_8cc_source.html#l00686">lck_pass_p()</a>.</p>

<p>Referenced by <a class="el" href="mc_8h_source.html#l00117">mc_acquire_()</a>, <a class="el" href="barrier_8cc_source.html#l00212">pthread_barrier_wait()</a>, <a class="el" href="mutex_8cc_source.html#l00381">pthread_mutex_lock()</a>, and <a class="el" href="rc_8cc_source.html#l00019">rc_entry_x_()</a>.</p>

</div>
</div>
<a class="anchor" id="ac4d2c3c2c40793523de7b4257878d811"></a><!-- doxytag: member="lock.cc::lck_migrate" ref="ac4d2c3c2c40793523de7b4257878d811" args="(lck_my_lock_t *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int <a class="el" href="lock_8cc.html#ac4d2c3c2c40793523de7b4257878d811">lck_migrate</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lock_8h.html#a6320862fdb4e8813ad219d1a7dfbaa3e">lck_my_lock_t</a> *&#160;</td>
          <td class="paramname"><em>lock</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00645">645</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>References <a class="el" href="lock_8cc_source.html#l00039">DEBUG</a>, <a class="el" href="lock_8cc_source.html#l00042">DEBUGC</a>, <a class="el" href="api_8cc_source.html#l00024">getgpid()</a>, <a class="el" href="api_8cc_source.html#l00050">getgpidproc()</a>, <a class="el" href="lock_8cc_source.html#l00043">LASSERT</a>, <a class="el" href="lock_8h_source.html#l00043">_lck_my_lock_t::lock</a>, <a class="el" href="lock_8cc_source.html#l00511">mc_unprotect</a>, <a class="el" href="lock_8h_source.html#l00054">_lck_my_lock_t::pid</a>, <a class="el" href="pthread_8cc_source.html#l00224">pthread_kill()</a>, and <a class="el" href="signal_8h_source.html#l00032">SIGLCK</a>.</p>

<p>Referenced by <a class="el" href="lock_8cc_source.html#l00906">lck_destroy()</a>, and <a class="el" href="lock_8cc_source.html#l00831">lck_unlock()</a>.</p>

</div>
</div>
<a class="anchor" id="a79e5a0ddb6b500a2ee1b68200dc3c39b"></a><!-- doxytag: member="lock.cc::lck_pass" ref="a79e5a0ddb6b500a2ee1b68200dc3c39b" args="(void *ul, void *l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="lock_8cc.html#a79e5a0ddb6b500a2ee1b68200dc3c39b">lck_pass</a> </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ul</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>l</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00682">682</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>References <a class="el" href="lock_8cc_source.html#l00686">lck_pass_p()</a>.</p>

<p>Referenced by <a class="el" href="barrier_8cc_source.html#l00212">pthread_barrier_wait()</a>.</p>

</div>
</div>
<a class="anchor" id="adf3a67de113b7e9d240f61d004d987cf"></a><!-- doxytag: member="lock.cc::lck_pass_p" ref="adf3a67de113b7e9d240f61d004d987cf" args="(void *ul, void *l, void *protectee=NULL, size_t sprotectee=0, bool only_try_local=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int <a class="el" href="lock_8cc.html#adf3a67de113b7e9d240f61d004d987cf">lck_pass_p</a> </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ul</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>l</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>protectee</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>sprotectee</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>only_try_local</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00686">686</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>References <a class="el" href="lock_8cc_source.html#l00044">CHECK_NON_SIGHANDLER</a>, <a class="el" href="lock_8cc_source.html#l00039">DEBUG</a>, <a class="el" href="DefaultTaskDaemon_8cc_source.html#l01753">dLockAsk()</a>, <a class="el" href="DefaultTaskDaemon_8cc_source.html#l01725">dLockRegister()</a>, <a class="el" href="DefaultTaskDaemon_8cc_source.html#l01739">dLockRequest()</a>, <a class="el" href="api_8cc_source.html#l00024">getgpid()</a>, <a class="el" href="syscall_8h.html#a8f8f8cfcfa6c1855a3b9d47669f39df3">getpid()</a>, <a class="el" href="lock_8cc_source.html#l00043">LASSERT</a>, <a class="el" href="lock_8cc_source.html#l00615">LCK_ADMIN</a>, <a class="el" href="lock_8cc_source.html#l00617">lck_cleanup()</a>, <a class="el" href="lock_8h_source.html#l00032">LCK_DESTROYED</a>, <a class="el" href="lock_8h_source.html#l00032">LCK_FREE</a>, <a class="el" href="lock_8cc_source.html#l00348">lck_list_add()</a>, <a class="el" href="lock_8cc_source.html#l00284">lck_list_find()</a>, <a class="el" href="lock_8cc_source.html#l00312">lck_list_use()</a>, <a class="el" href="lock_8h_source.html#l00032">LCK_LOCKED</a>, <a class="el" href="lock_8h_source.html#l00032">LCK_MIGRATED</a>, <a class="el" href="lock_8h_source.html#l00033">LCK_MINE</a>, <a class="el" href="lock_8h_source.html#l00032">LCK_STOLEN</a>, <a class="el" href="lock_8cc_source.html#l00831">lck_unlock()</a>, <a class="el" href="api_8h_source.html#l00007">likely</a>, <a class="el" href="cheap_8cc_source.html#l00279">lock()</a>, <a class="el" href="lock_8h_source.html#l00128">LR_FREE</a>, <a class="el" href="lock_8h_source.html#l00124">LR_LOCAL</a>, <a class="el" href="lock_8h_source.html#l00129">LR_LOCKED</a>, <a class="el" href="lock_8h_source.html#l00127">LR_NEW</a>, <a class="el" href="lock_8h_source.html#l00125">LR_STOLEN</a>, <a class="el" href="lock_8h_source.html#l00126">LR_UNKNOWN</a>, <a class="el" href="lock_8cc_source.html#l00510">mc_protect</a>, <a class="el" href="lock_8cc_source.html#l00512">mc_reprotect</a>, <a class="el" href="lock_8h_source.html#l00051">_lck_my_lock_t::own</a>, <a class="el" href="lock_8h_source.html#l00062">lck_my_locks_t::root</a>, <a class="el" href="signal_8h_source.html#l00099">sigaddset()</a>, <a class="el" href="signal_8h_source.html#l00097">sigemptyset()</a>, <a class="el" href="signal_8h_source.html#l00032">SIGLCK</a>, <a class="el" href="lock_8h_source.html#l00063">lck_my_locks_t::spare</a>, <a class="el" href="lock_8h_source.html#l00047">_lck_my_lock_t::state</a>, <a class="el" href="lock_8h_source.html#l00048">_lck_my_lock_t::state_</a>, <a class="el" href="signal_8h.html#ae91b41765b4680e37983a4732567da37">Suspend()</a>, and <a class="el" href="api_8h_source.html#l00008">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lock_8cc_source.html#l00617">lck_cleanup()</a>, <a class="el" href="lock_8cc_source.html#l00674">lck_lock()</a>, <a class="el" href="lock_8cc_source.html#l00678">lck_lock_p()</a>, and <a class="el" href="lock_8cc_source.html#l00682">lck_pass()</a>.</p>

</div>
</div>
<a class="anchor" id="a38664c901386793e88b744df8df5058a"></a><!-- doxytag: member="lock.cc::lck_register" ref="a38664c901386793e88b744df8df5058a" args="(lck_my_locks_t *list, pid_t pid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="lock_8cc.html#a38664c901386793e88b744df8df5058a">lck_register</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlck__my__locks__t.html">lck_my_locks_t</a> *&#160;</td>
          <td class="paramname"><em>list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>pid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Register the lock list of a process. </p>
<p>Should be done before using locks by every process. </p>

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00520">520</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>References <a class="el" href="graphix_8h_source.html#l00126">a</a>, <a class="el" href="lock_8cc_source.html#l00039">DEBUG</a>, <a class="el" href="syscall_8h.html#a8f8f8cfcfa6c1855a3b9d47669f39df3">getpid()</a>, <a class="el" href="lock_8cc_source.html#l00043">LASSERT</a>, <a class="el" href="malloc_8h_source.html#l00095">lcalloc</a>, <a class="el" href="lock_8cc_source.html#l00615">LCK_ADMIN</a>, <a class="el" href="lock_8h_source.html#l00092">lck_daemon_admin_t::lists</a>, <a class="el" href="helix__config_8h_source.html#l00129">MAX_PROCESSES</a>, and <a class="el" href="api_8h_source.html#l00008">unlikely</a>.</p>

</div>
</div>
<a class="anchor" id="a31ab9f196f0c01410fea5391e3a51f93"></a><!-- doxytag: member="lock.cc::lck_request" ref="a31ab9f196f0c01410fea5391e3a51f93" args="(void *l, int requester)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="lock_8cc.html#a31ab9f196f0c01410fea5391e3a51f93">lck_request</a> </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>l</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>requester</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Request lock ownage by lock daemon. </p>

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00419">419</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>References <a class="el" href="graphix_8h_source.html#l00126">a</a>, <a class="el" href="lock_8h_source.html#l00081">_lck_daemon_lock_t::count_migrated</a>, <a class="el" href="lock_8cc_source.html#l00042">DEBUGC</a>, <a class="el" href="lock_8cc_source.html#l00040">DEBUGS</a>, <a class="el" href="syscall_8h.html#a8f8f8cfcfa6c1855a3b9d47669f39df3">getpid()</a>, <a class="el" href="device_8h_source.html#l00196">GetProcID()</a>, <a class="el" href="lock_8cc_source.html#l00043">LASSERT</a>, <a class="el" href="lock_8cc_source.html#l00615">LCK_ADMIN</a>, <a class="el" href="lock_8cc_source.html#l00348">lck_list_add()</a>, <a class="el" href="lock_8cc_source.html#l00284">lck_list_find()</a>, <a class="el" href="lock_8h_source.html#l00034">LCK_NEW</a>, <a class="el" href="lock_8h_source.html#l00034">LCK_OWNED</a>, <a class="el" href="cheap_8cc_source.html#l00279">lock()</a>, <a class="el" href="lock_8h_source.html#l00017">LOCK_DAEMON_CORE</a>, <a class="el" href="lock_8h_source.html#l00091">lck_daemon_admin_t::locks</a>, <a class="el" href="helix__config_8h_source.html#l00129">MAX_PROCESSES</a>, <a class="el" href="lock_8h_source.html#l00079">_lck_daemon_lock_t::owner</a>, <a class="el" href="lock_8h_source.html#l00078">_lck_daemon_lock_t::state</a>, and <a class="el" href="api_8h_source.html#l00008">unlikely</a>.</p>

<p>Referenced by <a class="el" href="DefaultTaskDaemon_8cc_source.html#l00601">ProcessRequest()</a>.</p>

</div>
</div>
<a class="anchor" id="a22dba9286913fe6f5d9781baaa83d78e"></a><!-- doxytag: member="lock.cc::lck_tree_add" ref="a22dba9286913fe6f5d9781baaa83d78e" args="(lt_t *tree, void *value, size_t elem_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="lock_8cc.html#a7e84f96ee39885f85fdaffdd95cd9438">le_t</a>* <a class="el" href="lock_8cc.html#a22dba9286913fe6f5d9781baaa83d78e">lck_tree_add</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlt__t.html">lt_t</a> *&#160;</td>
          <td class="paramname"><em>tree</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>elem_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00246">246</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>References <a class="el" href="lock_8cc_source.html#l00052">BULK_RECORDS</a>, <a class="el" href="lock_8cc_source.html#l00039">DEBUG</a>, <a class="el" href="lock_8cc_source.html#l00043">LASSERT</a>, <a class="el" href="lock_8cc_source.html#l00227">lck_tree_insert()</a>, <a class="el" href="lock_8cc_source.html#l00124">lck_tree_validate</a>, <a class="el" href="malloc_8h_source.html#l00093">lmalloc</a>, <a class="el" href="lock_8cc_source.html#l00059">_le_t::next</a>, <a class="el" href="lock_8cc_source.html#l00071">lt_t::root</a>, <a class="el" href="lock_8cc_source.html#l00072">lt_t::spare</a>, <a class="el" href="api_8h_source.html#l00008">unlikely</a>, and <a class="el" href="lock_8cc_source.html#l00067">_le_t::value</a>.</p>

<p>Referenced by <a class="el" href="lock_8cc_source.html#l00348">lck_list_add()</a>.</p>

</div>
</div>
<a class="anchor" id="a76ce97571fba8e809a8e1d885cbc0214"></a><!-- doxytag: member="lock.cc::lck_tree_declevel" ref="a76ce97571fba8e809a8e1d885cbc0214" args="(le_t *t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="lock_8cc.html#a76ce97571fba8e809a8e1d885cbc0214">lck_tree_declevel</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lock_8cc.html#a7e84f96ee39885f85fdaffdd95cd9438">le_t</a> *&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00159">159</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>References <a class="el" href="lock_8cc_source.html#l00043">LASSERT</a>, <a class="el" href="lock_8cc_source.html#l00060">_le_t::left</a>, <a class="el" href="lock_8cc_source.html#l00066">_le_t::level</a>, and <a class="el" href="lock_8cc_source.html#l00064">_le_t::right</a>.</p>

<p>Referenced by <a class="el" href="lock_8cc_source.html#l00172">lck_tree_delete()</a>.</p>

</div>
</div>
<a class="anchor" id="ade0712088379e9f0edb115e5ad3ff2ac"></a><!-- doxytag: member="lock.cc::lck_tree_delete" ref="ade0712088379e9f0edb115e5ad3ff2ac" args="(le_t *root, le_t *elem)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="lock_8cc.html#a7e84f96ee39885f85fdaffdd95cd9438">le_t</a>* <a class="el" href="lock_8cc.html#ade0712088379e9f0edb115e5ad3ff2ac">lck_tree_delete</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lock_8cc.html#a7e84f96ee39885f85fdaffdd95cd9438">le_t</a> *&#160;</td>
          <td class="paramname"><em>root</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lock_8cc.html#a7e84f96ee39885f85fdaffdd95cd9438">le_t</a> *&#160;</td>
          <td class="paramname"><em>elem</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00172">172</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>References <a class="el" href="lock_8cc_source.html#l00043">LASSERT</a>, <a class="el" href="lock_8cc_source.html#l00159">lck_tree_declevel()</a>, <a class="el" href="lock_8cc_source.html#l00136">lck_tree_skew()</a>, <a class="el" href="lock_8cc_source.html#l00148">lck_tree_split()</a>, <a class="el" href="lock_8cc_source.html#l00060">_le_t::left</a>, <a class="el" href="lock_8cc_source.html#l00066">_le_t::level</a>, <a class="el" href="lock_8cc_source.html#l00064">_le_t::right</a>, and <a class="el" href="lock_8cc_source.html#l00067">_le_t::value</a>.</p>

<p>Referenced by <a class="el" href="lock_8cc_source.html#l00220">lck_tree_remove()</a>.</p>

</div>
</div>
<a class="anchor" id="a955afb3e6b0d27d946cbf4a7b53e4072"></a><!-- doxytag: member="lock.cc::lck_tree_find" ref="a955afb3e6b0d27d946cbf4a7b53e4072" args="(le_t *root, void *value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="lock_8cc.html#a7e84f96ee39885f85fdaffdd95cd9438">le_t</a>* <a class="el" href="lock_8cc.html#a955afb3e6b0d27d946cbf4a7b53e4072">lck_tree_find</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lock_8cc.html#a7e84f96ee39885f85fdaffdd95cd9438">le_t</a> *&#160;</td>
          <td class="paramname"><em>root</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00129">129</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>References <a class="el" href="lock_8cc_source.html#l00060">_le_t::left</a>, <a class="el" href="lock_8cc_source.html#l00064">_le_t::right</a>, and <a class="el" href="lock_8cc_source.html#l00067">_le_t::value</a>.</p>

<p>Referenced by <a class="el" href="lock_8cc_source.html#l00284">lck_list_find()</a>.</p>

</div>
</div>
<a class="anchor" id="a278eb1d2877b327f78a86db80e93560e"></a><!-- doxytag: member="lock.cc::lck_tree_insert" ref="a278eb1d2877b327f78a86db80e93560e" args="(le_t *t, le_t *x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="lock_8cc.html#a7e84f96ee39885f85fdaffdd95cd9438">le_t</a>* <a class="el" href="lock_8cc.html#a278eb1d2877b327f78a86db80e93560e">lck_tree_insert</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lock_8cc.html#a7e84f96ee39885f85fdaffdd95cd9438">le_t</a> *&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lock_8cc.html#a7e84f96ee39885f85fdaffdd95cd9438">le_t</a> *&#160;</td>
          <td class="paramname"><em>x</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00227">227</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>References <a class="el" href="lock_8cc_source.html#l00043">LASSERT</a>, <a class="el" href="lock_8cc_source.html#l00136">lck_tree_skew()</a>, <a class="el" href="lock_8cc_source.html#l00148">lck_tree_split()</a>, <a class="el" href="lock_8cc_source.html#l00060">_le_t::left</a>, <a class="el" href="lock_8cc_source.html#l00066">_le_t::level</a>, <a class="el" href="lock_8cc_source.html#l00064">_le_t::right</a>, and <a class="el" href="lock_8cc_source.html#l00067">_le_t::value</a>.</p>

<p>Referenced by <a class="el" href="lock_8cc_source.html#l00246">lck_tree_add()</a>.</p>

</div>
</div>
<a class="anchor" id="a82f5b14373294dcd4e37036ce45f3fa3"></a><!-- doxytag: member="lock.cc::lck_tree_remove" ref="a82f5b14373294dcd4e37036ce45f3fa3" args="(lt_t *tree, le_t *elem)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="lock_8cc.html#a82f5b14373294dcd4e37036ce45f3fa3">lck_tree_remove</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlt__t.html">lt_t</a> *&#160;</td>
          <td class="paramname"><em>tree</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lock_8cc.html#a7e84f96ee39885f85fdaffdd95cd9438">le_t</a> *&#160;</td>
          <td class="paramname"><em>elem</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00220">220</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>References <a class="el" href="lock_8cc_source.html#l00172">lck_tree_delete()</a>, <a class="el" href="lock_8cc_source.html#l00059">_le_t::next</a>, <a class="el" href="lock_8cc_source.html#l00071">lt_t::root</a>, and <a class="el" href="lock_8cc_source.html#l00072">lt_t::spare</a>.</p>

<p>Referenced by <a class="el" href="lock_8cc_source.html#l00339">lck_list_remove()</a>.</p>

</div>
</div>
<a class="anchor" id="a869b68428b57fa351c57b7dbb7474242"></a><!-- doxytag: member="lock.cc::lck_tree_skew" ref="a869b68428b57fa351c57b7dbb7474242" args="(le_t *t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="lock_8cc.html#a7e84f96ee39885f85fdaffdd95cd9438">le_t</a>* <a class="el" href="lock_8cc.html#a869b68428b57fa351c57b7dbb7474242">lck_tree_skew</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lock_8cc.html#a7e84f96ee39885f85fdaffdd95cd9438">le_t</a> *&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00136">136</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>References <a class="el" href="lock_8cc_source.html#l00060">_le_t::left</a>, <a class="el" href="lock_8cc_source.html#l00066">_le_t::level</a>, and <a class="el" href="lock_8cc_source.html#l00064">_le_t::right</a>.</p>

<p>Referenced by <a class="el" href="lock_8cc_source.html#l00172">lck_tree_delete()</a>, and <a class="el" href="lock_8cc_source.html#l00227">lck_tree_insert()</a>.</p>

</div>
</div>
<a class="anchor" id="a53bcb584dfe085013d0bf51ab17a4719"></a><!-- doxytag: member="lock.cc::lck_tree_split" ref="a53bcb584dfe085013d0bf51ab17a4719" args="(le_t *t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="lock_8cc.html#a7e84f96ee39885f85fdaffdd95cd9438">le_t</a>* <a class="el" href="lock_8cc.html#a53bcb584dfe085013d0bf51ab17a4719">lck_tree_split</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lock_8cc.html#a7e84f96ee39885f85fdaffdd95cd9438">le_t</a> *&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00148">148</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>References <a class="el" href="lock_8cc_source.html#l00060">_le_t::left</a>, <a class="el" href="lock_8cc_source.html#l00066">_le_t::level</a>, <a class="el" href="graphix_8h_source.html#l00123">r</a>, and <a class="el" href="lock_8cc_source.html#l00064">_le_t::right</a>.</p>

<p>Referenced by <a class="el" href="lock_8cc_source.html#l00172">lck_tree_delete()</a>, and <a class="el" href="lock_8cc_source.html#l00227">lck_tree_insert()</a>.</p>

</div>
</div>
<a class="anchor" id="a042da57fa7339d470fd6759c9a020737"></a><!-- doxytag: member="lock.cc::lck_unlock" ref="a042da57fa7339d470fd6759c9a020737" args="(void *l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="lock_8cc.html#a042da57fa7339d470fd6759c9a020737">lck_unlock</a> </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>l</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Unlock an address Does not communicate with lock daemon, unless old lock is destroyed. </p>
<p>When result &lt; 0: LR_LOCAL: we owned the lock LR_LOCKED: lock was locked LR_FULL: too many free locks, destroyed oldest one LR_MIGRATED: lock was migrated immediately and or'ed with <a class="el" href="lock_8h.html#aa1f74dde05eda1bb3e922623237cbf88" title="Unlock and give back to server When result &lt; 0: LR_LOCAL: lock was local LR_STOLEN: already stolen be...">lck_destroy()</a> possible combinations: LR_LOCAL|LR_LOCKED| ((LR_FULL|lck_destroy) || LR_MIGRATED)? </p>

<p>Definition at line <a class="el" href="lock_8cc_source.html#l00831">831</a> of file <a class="el" href="lock_8cc_source.html">lock.cc</a>.</p>

<p>References <a class="el" href="lock_8cc_source.html#l00044">CHECK_NON_SIGHANDLER</a>, <a class="el" href="lock_8cc_source.html#l00039">DEBUG</a>, <a class="el" href="lock_8cc_source.html#l00042">DEBUGC</a>, <a class="el" href="lock_8h_source.html#l00066">lck_my_locks_t::free</a>, <a class="el" href="lock_8h_source.html#l00065">lck_my_locks_t::free_last</a>, <a class="el" href="api_8cc_source.html#l00024">getgpid()</a>, <a class="el" href="syscall_8h.html#a8f8f8cfcfa6c1855a3b9d47669f39df3">getpid()</a>, <a class="el" href="lock_8cc_source.html#l00043">LASSERT</a>, <a class="el" href="lock_8cc_source.html#l00615">LCK_ADMIN</a>, <a class="el" href="lock_8cc_source.html#l00906">lck_destroy()</a>, <a class="el" href="lock_8h_source.html#l00032">LCK_DESTROYED</a>, <a class="el" href="lock_8h_source.html#l00032">LCK_FREE</a>, <a class="el" href="lock_8cc_source.html#l00284">lck_list_find()</a>, <a class="el" href="lock_8cc_source.html#l00289">lck_list_free()</a>, <a class="el" href="lock_8cc_source.html#l00339">lck_list_remove()</a>, <a class="el" href="lock_8h_source.html#l00032">LCK_LOCKED</a>, <a class="el" href="lock_8cc_source.html#l00645">lck_migrate()</a>, <a class="el" href="lock_8h_source.html#l00032">LCK_MIGRATED</a>, <a class="el" href="lock_8h_source.html#l00033">LCK_MINE</a>, <a class="el" href="lock_8h_source.html#l00033">LCK_REQUEST</a>, <a class="el" href="lock_8h_source.html#l00032">LCK_STOLEN</a>, <a class="el" href="api_8h_source.html#l00007">likely</a>, <a class="el" href="lock_8h_source.html#l00043">_lck_my_lock_t::lock</a>, <a class="el" href="cheap_8cc_source.html#l00279">lock()</a>, <a class="el" href="lock_8h_source.html#l00130">LR_FULL</a>, <a class="el" href="lock_8h_source.html#l00124">LR_LOCAL</a>, <a class="el" href="lock_8h_source.html#l00129">LR_LOCKED</a>, <a class="el" href="lock_8h_source.html#l00131">LR_MIGRATED</a>, <a class="el" href="lock_8cc_source.html#l00010">MAX_FREE_LOCKS</a>, <a class="el" href="helix__config_8h_source.html#l00129">MAX_PROCESSES</a>, <a class="el" href="lock_8cc_source.html#l00813">MEM_SYNC</a>, <a class="el" href="lock_8h_source.html#l00052">_lck_my_lock_t::own_</a>, <a class="el" href="lock_8h_source.html#l00062">lck_my_locks_t::root</a>, <a class="el" href="lock_8h_source.html#l00047">_lck_my_lock_t::state</a>, and <a class="el" href="lock_8h_source.html#l00048">_lck_my_lock_t::state_</a>.</p>

<p>Referenced by <a class="el" href="lock_8cc_source.html#l00686">lck_pass_p()</a>, <a class="el" href="mc_8h_source.html#l00153">mc_constantize_()</a>, <a class="el" href="mc_8h_source.html#l00125">mc_release_()</a>, <a class="el" href="barrier_8cc_source.html#l00212">pthread_barrier_wait()</a>, <a class="el" href="mutex_8cc_source.html#l00423">pthread_mutex_unlock()</a>, <a class="el" href="rc_8cc_source.html#l00025">rc_exit_x_()</a>, and <a class="el" href="pmc_8h_source.html#l00072">PMC_NS::Location&lt; T &gt;::release()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="lock_8cc.html">lock.cc</a>      </li>

    <li class="footer">Generated on Tue Apr 28 2015 16:39:19 for Starburst by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
