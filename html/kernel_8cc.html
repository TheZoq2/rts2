<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Starburst: kernel/kernel.cc File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Starburst
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('kernel_8cc.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">kernel/kernel.cc File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Implementation of all kernel functions.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;errno.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="helix__config_8h_source.html">sys/helix_config.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="kernel_8h_source.html">sys/kernel.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="io_8h_source.html">sys/io.h</a>&gt;</code><br/>
<code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="malloc_8h_source.html">malloc.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="daemons_8h_source.html">daemons.h</a>&gt;</code><br/>
<code>#include &lt;sys/time.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="signal_8h_source.html">signal.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="pthread_8h_source.html">pthread.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="stdlib_8h_source.html">stdlib.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="trace_8h_source.html">trace.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="mc_8h_source.html">mc.h</a>&gt;</code><br/>
<code>#include &lt;reent.h&gt;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for kernel.cc:</div>
<div class="dyncontent">
<div class="center"><img src="kernel_8cc__incl.png" border="0" usemap="#kernel_2kernel_8cc" alt=""/></div>
<map name="kernel_2kernel_8cc" id="kernel_2kernel_8cc">
<area shape="rect" id="node5" href="helix__config_8h.html" title="Configuration of the OS." alt="" coords="1327,646,1455,677"/><area shape="rect" id="node7" href="kernel_8h.html" title="Declaration of all kernel functions." alt="" coords="800,326,893,357"/><area shape="rect" id="node25" href="pthread_8h.html" title="POSIX Pthread standard implementation." alt="" coords="477,406,555,437"/><area shape="rect" id="node32" href="signal_8h.html" title="signal.h" alt="" coords="336,486,403,517"/><area shape="rect" id="node47" href="io_8h.html" title="Declaration of all I/O function, types and address macros." alt="" coords="1332,86,1399,117"/><area shape="rect" id="node57" href="stdlib_8h.html" title="stdlib.h" alt="" coords="1380,326,1441,357"/><area shape="rect" id="node59" href="malloc_8h.html" title="malloc.h" alt="" coords="1443,406,1515,437"/><area shape="rect" id="node94" href="daemons_8h.html" title="All daemon definitions." alt="" coords="803,246,891,277"/><area shape="rect" id="node108" href="trace_8h.html" title="Tracing of process execution and phases." alt="" coords="2024,486,2085,517"/><area shape="rect" id="node126" href="mc_8h.html" title="Implementation of a memory consistency model." alt="" coords="731,406,781,437"/><area shape="rect" id="node12" href="device_8h.html" title="Declaration of functions that gives information about the hardware platform." alt="" coords="1477,486,1576,517"/><area shape="rect" id="node15" href="kernel__types_8h.html" title="sys/kernel_types.h" alt="" coords="1208,566,1341,597"/><area shape="rect" id="node23" href="hooks_8h.html" title="Hooks in kernel, to get specific call&#45;backs or information." alt="" coords="1008,406,1101,437"/><area shape="rect" id="node40" href="lock_8h.html" title="lock.h" alt="" coords="1075,486,1131,517"/><area shape="rect" id="node45" href="mail_8h.html" title="Mailboxes: a simple system to pass integer values around." alt="" coords="296,406,352,437"/><area shape="rect" id="node50" href="api_8h.html" title="Global header file that includes all functions of the OS." alt="" coords="1328,166,1403,197"/><area shape="rect" id="node53" href="autoret_8h.html" title="autoret.h" alt="" coords="1755,246,1827,277"/><area shape="rect" id="node73" href="unistd_8h.html" title="unistd.h" alt="" coords="1584,326,1651,357"/><area shape="rect" id="node87" href="syscall_8h.html" title="System calls to kernel functions." alt="" coords="680,246,779,277"/><area shape="rect" id="node69" href="ttypes_8h.html" title="ttypes.h" alt="" coords="984,486,1051,517"/><area shape="rect" id="node98" href="fifo_8h.html" title="C&#45;HEAP kind of FIFO implementation using FIFO memories or shared heap." alt="" coords="1193,326,1241,357"/></map>
</div>
</div>
<p><a href="kernel_8cc_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsch__t.html">sch_t</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Flags to influence scheduling.  <a href="structsch__t.html#details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#acd9f0f58b087afb077290bd73ef4c648">DBLED_ALIVE</a>&#160;&#160;&#160;0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#ae209adfd4a579b0314c1eeef436d22a4">DBLED_INIT</a>&#160;&#160;&#160;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#aa28741aad188fa566e089c3ea540a906">DBLED_SCHEDULE</a>&#160;&#160;&#160;2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a38a287b0851d123e1e31072fcd03008d">DBLED_PANIC</a>&#160;&#160;&#160;3</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a669e9dd46ec1bdacc6cd2fbd9b530a70">DBLED_NEWPROC</a>&#160;&#160;&#160;4</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#aafee7403c191c45dd3a07b64954f828a">DEBUG_ON</a>(led)&#160;&#160;&#160;<a class="el" href="leds_8cc.html#a6a4bc26a21ab305b8080a6d37726955f">led_on</a>(led)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#ad7b6b6cb649dc9d9560c68b1d94464f9">DEBUG_OFF</a>(led)&#160;&#160;&#160;<a class="el" href="leds_8cc.html#a332be2958bf709819b7853ee7fe9372e">led_off</a>(led)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a3920226e3e0e7a84cd56680e03f96b94">DEBUG_ALLOFF</a>()&#160;&#160;&#160;<a class="el" href="leds_8cc.html#a48ba324aa46df0782b8cb32c5012430e">leds_value</a>(0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#aa814952312a46824ecd43f85b6d45157">DEBUG</a>(str, a...)&#160;&#160;&#160;<a class="el" href="kernel_8h.html#a92c0fd9bbafd520c7435afb41b1f1e65">printk</a>(&quot;KERNEL %d: &quot; str &quot;\n&quot;,GetProcID(),##<a class="el" href="graphix_8h.html#a6585d26329c5e71ae768be0be86a7cea">a</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#abf55d0a7851b10bdb091a9bef8dac51e">DEBUG0</a>(a...)&#160;&#160;&#160;do{if(<a class="el" href="device_8h.html#a03019be38c75a4741a5351cff1776f64">GetProcID</a>()==0)<a class="el" href="trace_8cc.html#a96dd473db0b3d10bd43390cdacb00120">DEBUG</a>(<a class="el" href="graphix_8h.html#a6585d26329c5e71ae768be0be86a7cea">a</a>);}while(0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a5918a433e654d957a62f8f9d0839d0b5">TDEBUG_SIZE</a>&#160;&#160;&#160;13</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a77b4d1550e6990d959376de008f509ed">TDEBUG</a>(a...)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#aa8b6587dc9889f468208812250aaa8a7">ASSIGN_CONST_PTR</a>(type, var, val)&#160;&#160;&#160;*(type**)&amp;(var)=(val)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a017d3e8af0a7f0e5266f61ac26fadd66">kSetOSState</a>(state)&#160;&#160;&#160;*(<a class="el" href="kernel_8h.html#a377ea6c9edb9a0cb4c553bd158580fbe">os_state_t</a>*)&amp;<a class="el" href="kernel_8h.html#a947c0bc119bba11ab8af50f94b3c474d">os_state</a>=state</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a0d73b8a648a1501b4a09c11bfd9c819c">kIsInSigHandler</a>(pt)&#160;&#160;&#160;(pt-&gt;sig_havetriggered!=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#ac626325ceddb5d49a930f1b435af28b4">td_proc</a>&#160;&#160;&#160;(&amp;<a class="el" href="kernel_8h.html#a7b21412447a44f3594e1eac57cda11c3">kernel_context</a>-&gt;proc_table[0])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a84f421f490b8753b261209ac5b8485de">IS_VALID_DDR_PTR</a>(p)&#160;&#160;&#160;((uintptr_t)(p)&gt;=(uintptr_t)(&amp;<a class="el" href="profiling_8cc.html#a2979da41734d1ea92d850b7cc25c52b5">_ddrbase</a>)&amp;&amp;(uintptr_t)(p)&lt;(uintptr_t)(&amp;<a class="el" href="kernel_8cc.html#aa3dffd73b983369f8f6e4b0ac7bb22d0">_ddrend</a>))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#adb8d91529f94de9573a88c3b8514ac6f">STACK_PROTECTION_VALUE</a>&#160;&#160;&#160;0xdeadbeef</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a6646eba88004157f0b0e52925526488d">DID_WORK_NO</a>&#160;&#160;&#160;0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a2c73da0c8100fb61b4e9ed91ec30134d">DID_WORK_MAYBE</a>&#160;&#160;&#160;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a0fe06b0e857323e5b5ff653b84fbb271">DID_WORK_YES</a>&#160;&#160;&#160;2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#aad9cc64d45a76ba0d37c00f8cd9caa37">TRACE</a>&#160;&#160;&#160;((<a class="el" href="structtrace__t.html">trace_t</a>*)<a class="el" href="kernel_8cc.html#a889b2a9246fc945ee2c48e771895cf2f">kGetHookTable</a>()[<a class="el" href="hooks_8h.html#ae38205ed3b6b9c9204abaaf9bca135f2">HOOK_TRACE</a>])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a4c740f9487e37f58a981720fcff694f0">__sf_fake_stdio</a>&#160;&#160;&#160;__sf_fake_stdin</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a9847e8795839bc38fb1308084adcbfa8">KERNEL_PRINT_PROGRESS</a>&#160;&#160;&#160;if(<a class="el" href="device_8h.html#a03019be38c75a4741a5351cff1776f64">GetProcID</a>()==0)<a class="el" href="uart_8cc.html#a5852913b23040578c4017c1be1dcf0fc">outbyte</a>(kernel_name[init_progress++])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a0630a11dd00b48b8d2b1d2a4a1dfa9de">KERNEL_PRINT_PROGRESS_END</a>&#160;&#160;&#160;if(<a class="el" href="device_8h.html#a03019be38c75a4741a5351cff1776f64">GetProcID</a>()==0)do{<a class="el" href="kernel_8h.html#a92c0fd9bbafd520c7435afb41b1f1e65">printk</a>(&quot;%s\n&quot;,&amp;kernel_name[init_progress]); if(<a class="el" href="device_8h.html#a03019be38c75a4741a5351cff1776f64">GetProcID</a>()==0)<a class="el" href="kernel_8cc.html#adbd61a5fbc35c76f4bcf9eccb289d2ee">Disclaimer</a>();}while(0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#aad9cc64d45a76ba0d37c00f8cd9caa37">TRACE</a>&#160;&#160;&#160;((<a class="el" href="structtrace__t.html">trace_t</a>*)<a class="el" href="kernel_8h.html#a7b21412447a44f3594e1eac57cda11c3">kernel_context</a>-&gt;hooks[<a class="el" href="hooks_8h.html#ae38205ed3b6b9c9204abaaf9bca135f2">HOOK_TRACE</a>])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a73d4f21ad937dbc50a0c0538c78fd4f9">ASSERT</a>(expr, msg)&#160;&#160;&#160;do{if(<a class="el" href="api_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(!(expr)))<a class="el" href="kernel_8cc.html#a721cb139f6072c92a9d3b678b2f00184">kPanic</a>(msg);}while(0)</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a5eda2256972d4e67ab045cb3ebfa4ecf">kInitSignalContext</a> (<a class="el" href="structproc__context__t.html">proc_context_t</a> *sig_context, <a class="el" href="structproc__context__t.html">proc_context_t</a> *proc_context, char *triggered, int *havetriggered)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a623caf4cba9f8fe345d3412fe457908a">kResetSignalContext</a> (<a class="el" href="structproc__context__t.html">proc_context_t</a> *sig_context)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a7b094927158396795fa3d560753d02b6">kInitKernel</a> (<a class="el" href="structkernel__boot__param__t.html">kernel_boot_param_t</a> *param)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Basic initialization of the kernel.  <a href="#a7b094927158396795fa3d560753d02b6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#ac684d34fd7c17e04891439d2d179c78e">kStartTaskDaemon</a> (<a class="el" href="structkernel__boot__param__t.html">kernel_boot_param_t</a> *param)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts the task daemon.  <a href="#ac684d34fd7c17e04891439d2d179c78e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a6e5acd9d66f11151cbc5a843583cf9e7">kStartScheduling</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the scheduler and start scheduling.  <a href="#a6e5acd9d66f11151cbc5a843583cf9e7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structkernel__context__t.html">kernel_context_t</a> <br class="typebreak"/>
kernel_contexts[NUM_PROCESSORS]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a569d2cd3b33cb894564b004d068afcf4">__attribute__</a> ((section(&quot;.bss.kcontext&quot;), aligned(<a class="el" href="helix__config_8h.html#ac946bd02ab86555c1a7700dbfd9d30bf">CACHELINE_ALIGN</a>)))</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">All kernel contexts, located in shared memory.  <a href="#a569d2cd3b33cb894564b004d068afcf4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="device_8h.html#a4588b12eae6951d9c976a65d6869b47f">const</a> char *kernel_name&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a4214514f92047dc88393f89ddb14f5a3">__attribute__</a> ((unused))</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The name of the kernel to print during boot.  <a href="#a4214514f92047dc88393f89ddb14f5a3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct _reent kernel_impure_data&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a2356995c26d349e69bec98eb8c70cf77">__attribute__</a> ((section(&quot;.bss.proc&quot;)))</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">All impure data (as defined by newlib), reserved for kernel.  <a href="#a2356995c26d349e69bec98eb8c70cf77"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a0ec6a8880bbbb1ea06e2fe706e0243e5">kBoot</a> (<a class="el" href="structkernel__boot__param__t.html">kernel_boot_param_t</a> *arg) <a class="el" href="struct____attribute____.html">__attribute__</a>((noreturn))</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Entry point of C-code of the kernel.  <a href="#a0ec6a8880bbbb1ea06e2fe706e0243e5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#adbd61a5fbc35c76f4bcf9eccb289d2ee">Disclaimer</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a721cb139f6072c92a9d3b678b2f00184">kPanic</a> (<a class="el" href="device_8h.html#a4588b12eae6951d9c976a65d6869b47f">const</a> char *msg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints coredump and halts kernel, in case of emergency.  <a href="#a721cb139f6072c92a9d3b678b2f00184"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a6b46db337054df057344ae05e29b43db">kShutdown</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Shuts down kernel and return to bootloader.  <a href="#a6b46db337054df057344ae05e29b43db"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">pid_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#ac15d916c2ab5a6adfa64f13f43050266">kGetPid</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the process id of the current process.  <a href="#ac15d916c2ab5a6adfa64f13f43050266"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#ab02050bfd20dee07ad5c48dc98018540">kCreateProcess</a> (pid_t &amp;<a class="el" href="trace_8cc.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, void *(*<a class="el" href="group__app.html#ga3c04138a5bfe5d72780bb7e82a18e627">main</a>)(void *), void *arg, <a class="el" href="kernel__types_8h.html#aab831218703b6d40fa14bd6ec1d2fcac">timems_t</a> slicelength, unsigned int stack)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new process.  <a href="#ab02050bfd20dee07ad5c48dc98018540"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#ab96af073ecdd6f0a8f2bc25176901778">ProcessEntry</a> (void *(*<a class="el" href="group__app.html#ga3c04138a5bfe5d72780bb7e82a18e627">main</a>)(void *), void *arg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Entry point of a process.  <a href="#ab96af073ecdd6f0a8f2bc25176901778"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a300b853030c48858f0eced0d188612c8">kSetProcessFlags</a> (pid_t <a class="el" href="trace_8cc.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, int flags)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets specific process flags.  <a href="#a300b853030c48858f0eced0d188612c8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#ae0c79c082c04ae29f52e53ea5a5d9c9c">kGetProcessFlags</a> (pid_t <a class="el" href="trace_8cc.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, int *flags)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the process flags.  <a href="#ae0c79c082c04ae29f52e53ea5a5d9c9c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#abcef60d3ef2cf168ced79ec4f9ed4782">kGetProcessState</a> (pid_t <a class="el" href="trace_8cc.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, <a class="el" href="kernel_8h.html#a59775280f5f039f80ce5d63993e40484">proc_state_t</a> *state, bool *sighandling)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the state of a process.  <a href="#abcef60d3ef2cf168ced79ec4f9ed4782"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a0c8b0ba864ea12f0559c61874036795f">kSetProcessTimeslice</a> (pid_t <a class="el" href="trace_8cc.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, <a class="el" href="kernel__types_8h.html#aab831218703b6d40fa14bd6ec1d2fcac">timems_t</a> slicelength)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Changes the length of the timeslice of an existing process.  <a href="#a0c8b0ba864ea12f0559c61874036795f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="kernel__types_8h.html#a77e49d03a1e611dab893961ac9886155">timeslice_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#ae741e6ffe8b7b61c49654c7410f7a868">GetRemainingTimeslice</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the remaining clock ticks before the end of the current timeslice.  <a href="#ae741e6ffe8b7b61c49654c7410f7a868"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a82ebacc8496cf56e9df915b1103222f5">kStartProcess</a> (pid_t <a class="el" href="trace_8cc.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts a process that has been created using <a class="el" href="kernel_8h.html#a71c6699c46b8ad0a1de3766cdf988ffe" title="Creates a new process.">kCreateProcess()</a>.  <a href="#a82ebacc8496cf56e9df915b1103222f5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a505234ecb7b50794d55df4e59f5326df">kYield</a> (bool havework)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Forcably ends the timeslice of the current process.  <a href="#a505234ecb7b50794d55df4e59f5326df"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a3eb42bba3fa00f76d1a1b1ac584cfea7">kSuspend</a> (<a class="el" href="device_8h.html#a4588b12eae6951d9c976a65d6869b47f">const</a> <a class="el" href="signal_8h.html#a2ff4a1e7ebbf06b18271000ab5d1f095">sigset_t</a> *mask, <a class="el" href="device_8h.html#a4588b12eae6951d9c976a65d6869b47f">const</a> <a class="el" href="signal_8h.html#a2ff4a1e7ebbf06b18271000ab5d1f095">sigset_t</a> *wait_sticky)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Suspends current process until one of the non-masked signals occur.  <a href="#a3eb42bba3fa00f76d1a1b1ac584cfea7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a4a51a3c1e9b2168b41774cb8d58dfe19">kEndProcess</a> (void *ret)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Ends the current process.  <a href="#a4a51a3c1e9b2168b41774cb8d58dfe19"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a69abcace8557e0ed8d087fe69b218894">kJoinProcess</a> (pid_t <a class="el" href="trace_8cc.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, void **ret)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Joins a <a class="el" href="kernel_8h.html#a59775280f5f039f80ce5d63993e40484a95e3221d7fa874623eb789940f39c932" title="process has ended, but waits until kJoinProcess() is called">JOINABLE</a> process.  <a href="#a69abcace8557e0ed8d087fe69b218894"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a0384b3a8ec4a91e91895ae9c44b24c56">kDestroyProcess</a> (pid_t <a class="el" href="trace_8cc.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, void **ret)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys and clean up a process.  <a href="#a0384b3a8ec4a91e91895ae9c44b24c56"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a0e8f4c610eb9ed8186e3bbf84b22ccc2">kGetZombie</a> (pid_t *<a class="el" href="trace_8cc.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, void **ret)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Looks for a <a class="el" href="kernel_8h.html#a59775280f5f039f80ce5d63993e40484a5dfb36109b24f39d54d5c3f48f53def8" title="process has ended, but not cleaned up">ZOMBIE</a> process and destroys it.  <a href="#a0e8f4c610eb9ed8186e3bbf84b22ccc2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#aef090d8ae57af08c116c6ef8a94e5747">kGetProcessStats</a> (pid_t <a class="el" href="trace_8cc.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, <a class="el" href="structproc__stats__t.html">proc_stats_t</a> *stats)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Collects statistics of the specified process.  <a href="#aef090d8ae57af08c116c6ef8a94e5747"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a80bee10ed63d2e9e67b09f4a9ef17d09">kCoreDump</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints complete state of the current process and the kernel.  <a href="#a80bee10ed63d2e9e67b09f4a9ef17d09"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#ad231b0c7ac743c5863b33833aa1f38d1">kGetProcLocal</a> (<a class="el" href="structproc__local__t.html">proc_local_t</a> **p)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#aec8e991b381e779071c8d296db5a5215">kGetChannelCount</a> (pid_t <a class="el" href="trace_8cc.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the number of allocated channels.  <a href="#aec8e991b381e779071c8d296db5a5215"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#ad6c2311446d5297aea2a63ebfead05c4">kAllocChannels</a> (pid_t <a class="el" href="trace_8cc.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, int num_chan)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates memory for channels.  <a href="#ad6c2311446d5297aea2a63ebfead05c4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a398cae67ec6b117dfd86abaa6f9575fe">kAssignChannel</a> (pid_t <a class="el" href="trace_8cc.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, int chan_id, void *channel, int label)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Assigns a pointer to a channel.  <a href="#a398cae67ec6b117dfd86abaa6f9575fe"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a7f1df01f20303d8868e74f0989e719a8">kSetChannelLabel</a> (pid_t <a class="el" href="trace_8cc.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, int chan_id, int label)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets a new label to an existing channel.  <a href="#a7f1df01f20303d8868e74f0989e719a8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a211a73673db6a85dbf71f70c0354674a">kFindChannel</a> (int label)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Looks for a channel with the specified label.  <a href="#a211a73673db6a85dbf71f70c0354674a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#aa7eb958b6e300d661ca0ba06328505c8">kOpenChannel</a> (int channel)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the pointer corresponding to the given channel of the current process.  <a href="#aa7eb958b6e300d661ca0ba06328505c8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="hooks_8h.html#a60608a6e577367c4f9928747aea95b56">hook_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a889b2a9246fc945ee2c48e771895cf2f">kGetHookTable</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the pointer to the hook table.  <a href="#a889b2a9246fc945ee2c48e771895cf2f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#ad4c9248a1cdf947f15fff528dea46898">kSetSignalHandler</a> (int signum, <a class="el" href="device_8h.html#a4588b12eae6951d9c976a65d6869b47f">const</a> struct <a class="el" href="structsigaction.html">sigaction</a> *act)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#aaefc9f16b529add9146a5b17115b0469">kClearSignal</a> (int signum, struct <a class="el" href="structsigaction.html">sigaction</a> *sa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a3d153b50a65f33fd6307427861e74d88">kSendSignal</a> (pid_t <a class="el" href="trace_8cc.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, int sig, union <a class="el" href="unionsigval.html">sigval</a> *sv)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Send signal to other process.  <a href="#a3d153b50a65f33fd6307427861e74d88"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#abe73a763cb52339e69b69097e01118a7">kMaskSignal</a> (int how, <a class="el" href="device_8h.html#a4588b12eae6951d9c976a65d6869b47f">const</a> <a class="el" href="signal_8h.html#a2ff4a1e7ebbf06b18271000ab5d1f095">sigset_t</a> *set, <a class="el" href="signal_8h.html#a2ff4a1e7ebbf06b18271000ab5d1f095">sigset_t</a> *oldset)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structsync__event__entry__t.html">sync_event_entry_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#ae5dfcd55ef79bb8e64c97d366bc6a94c">kFindEventEntry</a> (<a class="el" href="kernel_8h.html#a151ec501a2523f8a434c7b259d96151b">proc_table_t</a> *proc, void *event)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a4a0a27df3e770e1c8888fae620cf0087">kSyncEventHit</a> (pid_t <a class="el" href="trace_8cc.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, void *event)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Marks specified event as hit.  <a href="#a4a0a27df3e770e1c8888fae620cf0087"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a9311ebfad1bae5efed571b7103e33df4">kSyncEventWait</a> (void *event, int count)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Blocks until a given event has occured.  <a href="#a9311ebfad1bae5efed571b7103e33df4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#ae44c134486402440002d11a9ba8304af">kCheckFreeStack</a> () <a class="el" href="struct____attribute____.html">__attribute__</a>((unused))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#aab817c9b0bf11c52dfaf813910e31720">kCheckStackOverflow</a> () <a class="el" href="struct____attribute____.html">__attribute__</a>((unused))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a0f8a6392225c4e8fe2d9e6a6eee7811d">kScheduleProcess</a> (<a class="el" href="kernel_8h.html#a151ec501a2523f8a434c7b259d96151b">proc_table_t</a> *next, bool continue_slice)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#ab49fec041d944bc5bb7038104cd65709">kScheduleNext</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines the next process to schedule.  <a href="#ab49fec041d944bc5bb7038104cd65709"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a1de4c077d031ef840643d2158c3d649c">_text_schedule</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a8154b4c44de671f04c932bcb760ee158">_text_schedule_end</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#ac0f851485b54bb272ad50cb7564d700b">_text_schedule_base</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a2979da41734d1ea92d850b7cc25c52b5">_ddrbase</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#aa3dffd73b983369f8f6e4b0ac7bb22d0">_ddrend</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structsch__t.html">sch_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#a6afe81513cad22ce2ec248b31fbf5f41">sch</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct _reent *_CONST <br class="typebreak"/>
__ATTRIBUTE_IMPURE_PTR__&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_8cc.html#aea5a41e11c90591e0e82309d15680c19">_kernel_impure_ptr</a> = &amp;kernel_impure_data</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to global_impure_data.  <a href="#aea5a41e11c90591e0e82309d15680c19"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Implementation of all kernel functions. </p>
<p>Note that all function starting with k should only be called from within the kernel context: priviledged mode, in a syscall. Do not do a syscall from within a syscall. </p>

<p>Definition in file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>
</div><hr/><h2>Define Documentation</h2>
<a class="anchor" id="a4c740f9487e37f58a981720fcff694f0"></a><!-- doxytag: member="kernel.cc::__sf_fake_stdio" ref="a4c740f9487e37f58a981720fcff694f0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="kernel_8cc.html#a4c740f9487e37f58a981720fcff694f0">__sf_fake_stdio</a>&#160;&#160;&#160;__sf_fake_stdin</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00132">132</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a73d4f21ad937dbc50a0c0538c78fd4f9"></a><!-- doxytag: member="kernel.cc::ASSERT" ref="a73d4f21ad937dbc50a0c0538c78fd4f9" args="(expr, msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="kernel_8cc.html#a73d4f21ad937dbc50a0c0538c78fd4f9">ASSERT</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">expr, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">msg&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;do{if(<a class="el" href="api_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(!(expr)))<a class="el" href="kernel_8cc.html#a721cb139f6072c92a9d3b678b2f00184">kPanic</a>(msg);}while(0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l01584">1584</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l01449">kFindEventEntry()</a>, <a class="el" href="kernel_8cc_source.html#l00260">kInitKernel()</a>, <a class="el" href="kernel_8cc_source.html#l01679">kScheduleNext()</a>, <a class="el" href="kernel_8cc_source.html#l01622">kScheduleProcess()</a>, <a class="el" href="kernel_8cc_source.html#l00892">kSuspend()</a>, and <a class="el" href="kernel_8cc_source.html#l00814">kYield()</a>.</p>

</div>
</div>
<a class="anchor" id="aa8b6587dc9889f468208812250aaa8a7"></a><!-- doxytag: member="kernel.cc::ASSIGN_CONST_PTR" ref="aa8b6587dc9889f468208812250aaa8a7" args="(type, var, val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="kernel_8cc.html#aa8b6587dc9889f468208812250aaa8a7">ASSIGN_CONST_PTR</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">type, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">var, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">val&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;*(type**)&amp;(var)=(val)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00053">53</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l00260">kInitKernel()</a>, and <a class="el" href="kernel_8cc_source.html#l01622">kScheduleProcess()</a>.</p>

</div>
</div>
<a class="anchor" id="acd9f0f58b087afb077290bd73ef4c648"></a><!-- doxytag: member="kernel.cc::DBLED_ALIVE" ref="acd9f0f58b087afb077290bd73ef4c648" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="kernel_8cc.html#acd9f0f58b087afb077290bd73ef4c648">DBLED_ALIVE</a>&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00022">22</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l00159">kBoot()</a>.</p>

</div>
</div>
<a class="anchor" id="ae209adfd4a579b0314c1eeef436d22a4"></a><!-- doxytag: member="kernel.cc::DBLED_INIT" ref="ae209adfd4a579b0314c1eeef436d22a4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="kernel_8cc.html#ae209adfd4a579b0314c1eeef436d22a4">DBLED_INIT</a>&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00023">23</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l00159">kBoot()</a>.</p>

</div>
</div>
<a class="anchor" id="a669e9dd46ec1bdacc6cd2fbd9b530a70"></a><!-- doxytag: member="kernel.cc::DBLED_NEWPROC" ref="a669e9dd46ec1bdacc6cd2fbd9b530a70" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="kernel_8cc.html#a669e9dd46ec1bdacc6cd2fbd9b530a70">DBLED_NEWPROC</a>&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00026">26</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l00545">kCreateProcess()</a>, and <a class="el" href="kernel_8cc_source.html#l00779">kStartProcess()</a>.</p>

</div>
</div>
<a class="anchor" id="a38a287b0851d123e1e31072fcd03008d"></a><!-- doxytag: member="kernel.cc::DBLED_PANIC" ref="a38a287b0851d123e1e31072fcd03008d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="kernel_8cc.html#a38a287b0851d123e1e31072fcd03008d">DBLED_PANIC</a>&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00025">25</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l00468">kPanic()</a>.</p>

</div>
</div>
<a class="anchor" id="aa28741aad188fa566e089c3ea540a906"></a><!-- doxytag: member="kernel.cc::DBLED_SCHEDULE" ref="aa28741aad188fa566e089c3ea540a906" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="kernel_8cc.html#aa28741aad188fa566e089c3ea540a906">DBLED_SCHEDULE</a>&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00024">24</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l01679">kScheduleNext()</a>.</p>

</div>
</div>
<a class="anchor" id="aa814952312a46824ecd43f85b6d45157"></a><!-- doxytag: member="kernel.cc::DEBUG" ref="aa814952312a46824ecd43f85b6d45157" args="(str, a...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="trace_8cc.html#a96dd473db0b3d10bd43390cdacb00120">DEBUG</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">str, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">a...&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="kernel_8h.html#a92c0fd9bbafd520c7435afb41b1f1e65">printk</a>(&quot;KERNEL %d: &quot; str &quot;\n&quot;,GetProcID(),##<a class="el" href="graphix_8h.html#a6585d26329c5e71ae768be0be86a7cea">a</a>)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00032">32</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l00260">kInitKernel()</a>, and <a class="el" href="kernel_8cc_source.html#l00640">ProcessEntry()</a>.</p>

</div>
</div>
<a class="anchor" id="abf55d0a7851b10bdb091a9bef8dac51e"></a><!-- doxytag: member="kernel.cc::DEBUG0" ref="abf55d0a7851b10bdb091a9bef8dac51e" args="(a...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="kernel_8cc.html#abf55d0a7851b10bdb091a9bef8dac51e">DEBUG0</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">a...</td><td>)</td>
          <td>&#160;&#160;&#160;do{if(<a class="el" href="device_8h.html#a03019be38c75a4741a5351cff1776f64">GetProcID</a>()==0)<a class="el" href="trace_8cc.html#a96dd473db0b3d10bd43390cdacb00120">DEBUG</a>(<a class="el" href="graphix_8h.html#a6585d26329c5e71ae768be0be86a7cea">a</a>);}while(0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00033">33</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l00260">kInitKernel()</a>, <a class="el" href="kernel_8cc_source.html#l01561">kStartScheduling()</a>, and <a class="el" href="kernel_8cc_source.html#l00446">kStartTaskDaemon()</a>.</p>

</div>
</div>
<a class="anchor" id="a3920226e3e0e7a84cd56680e03f96b94"></a><!-- doxytag: member="kernel.cc::DEBUG_ALLOFF" ref="a3920226e3e0e7a84cd56680e03f96b94" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="kernel_8cc.html#a3920226e3e0e7a84cd56680e03f96b94">DEBUG_ALLOFF</a></td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="leds_8cc.html#a48ba324aa46df0782b8cb32c5012430e">leds_value</a>(0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00031">31</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l00159">kBoot()</a>.</p>

</div>
</div>
<a class="anchor" id="ad7b6b6cb649dc9d9560c68b1d94464f9"></a><!-- doxytag: member="kernel.cc::DEBUG_OFF" ref="ad7b6b6cb649dc9d9560c68b1d94464f9" args="(led)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="kernel_8cc.html#ad7b6b6cb649dc9d9560c68b1d94464f9">DEBUG_OFF</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">led</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="leds_8cc.html#a332be2958bf709819b7853ee7fe9372e">led_off</a>(led)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00030">30</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l00159">kBoot()</a>, <a class="el" href="kernel_8cc_source.html#l01679">kScheduleNext()</a>, and <a class="el" href="kernel_8cc_source.html#l00779">kStartProcess()</a>.</p>

</div>
</div>
<a class="anchor" id="aafee7403c191c45dd3a07b64954f828a"></a><!-- doxytag: member="kernel.cc::DEBUG_ON" ref="aafee7403c191c45dd3a07b64954f828a" args="(led)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="kernel_8cc.html#aafee7403c191c45dd3a07b64954f828a">DEBUG_ON</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">led</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="leds_8cc.html#a6a4bc26a21ab305b8080a6d37726955f">led_on</a>(led)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00029">29</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l00159">kBoot()</a>, <a class="el" href="kernel_8cc_source.html#l00545">kCreateProcess()</a>, <a class="el" href="kernel_8cc_source.html#l00468">kPanic()</a>, and <a class="el" href="kernel_8cc_source.html#l01679">kScheduleNext()</a>.</p>

</div>
</div>
<a class="anchor" id="a2c73da0c8100fb61b4e9ed91ec30134d"></a><!-- doxytag: member="kernel.cc::DID_WORK_MAYBE" ref="a2c73da0c8100fb61b4e9ed91ec30134d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="kernel_8cc.html#a2c73da0c8100fb61b4e9ed91ec30134d">DID_WORK_MAYBE</a>&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00121">121</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l01622">kScheduleProcess()</a>, and <a class="el" href="kernel_8cc_source.html#l00814">kYield()</a>.</p>

</div>
</div>
<a class="anchor" id="a6646eba88004157f0b0e52925526488d"></a><!-- doxytag: member="kernel.cc::DID_WORK_NO" ref="a6646eba88004157f0b0e52925526488d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="kernel_8cc.html#a6646eba88004157f0b0e52925526488d">DID_WORK_NO</a>&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00120">120</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l01679">kScheduleNext()</a>, and <a class="el" href="kernel_8cc_source.html#l00814">kYield()</a>.</p>

</div>
</div>
<a class="anchor" id="a0fe06b0e857323e5b5ff653b84fbb271"></a><!-- doxytag: member="kernel.cc::DID_WORK_YES" ref="a0fe06b0e857323e5b5ff653b84fbb271" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="kernel_8cc.html#a0fe06b0e857323e5b5ff653b84fbb271">DID_WORK_YES</a>&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00122">122</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l01226">kAssignChannel()</a>, <a class="el" href="kernel_8cc_source.html#l01679">kScheduleNext()</a>, <a class="el" href="kernel_8cc_source.html#l01365">kSendSignal()</a>, <a class="el" href="kernel_8cc_source.html#l00779">kStartProcess()</a>, <a class="el" href="kernel_8cc_source.html#l01561">kStartScheduling()</a>, and <a class="el" href="kernel_8cc_source.html#l00814">kYield()</a>.</p>

</div>
</div>
<a class="anchor" id="a84f421f490b8753b261209ac5b8485de"></a><!-- doxytag: member="kernel.cc::IS_VALID_DDR_PTR" ref="a84f421f490b8753b261209ac5b8485de" args="(p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="kernel_8cc.html#a84f421f490b8753b261209ac5b8485de">IS_VALID_DDR_PTR</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">p</td><td>)</td>
          <td>&#160;&#160;&#160;((uintptr_t)(p)&gt;=(uintptr_t)(&amp;<a class="el" href="profiling_8cc.html#a2979da41734d1ea92d850b7cc25c52b5">_ddrbase</a>)&amp;&amp;(uintptr_t)(p)&lt;(uintptr_t)(&amp;<a class="el" href="kernel_8cc.html#aa3dffd73b983369f8f6e4b0ac7bb22d0">_ddrend</a>))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00087">87</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l01123">kCoreDump()</a>.</p>

</div>
</div>
<a class="anchor" id="a9847e8795839bc38fb1308084adcbfa8"></a><!-- doxytag: member="kernel.cc::KERNEL_PRINT_PROGRESS" ref="a9847e8795839bc38fb1308084adcbfa8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="kernel_8cc.html#a9847e8795839bc38fb1308084adcbfa8">KERNEL_PRINT_PROGRESS</a>&#160;&#160;&#160;if(<a class="el" href="device_8h.html#a03019be38c75a4741a5351cff1776f64">GetProcID</a>()==0)<a class="el" href="uart_8cc.html#a5852913b23040578c4017c1be1dcf0fc">outbyte</a>(kernel_name[init_progress++])</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00246">246</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l00260">kInitKernel()</a>.</p>

</div>
</div>
<a class="anchor" id="a0630a11dd00b48b8d2b1d2a4a1dfa9de"></a><!-- doxytag: member="kernel.cc::KERNEL_PRINT_PROGRESS_END" ref="a0630a11dd00b48b8d2b1d2a4a1dfa9de" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="kernel_8cc.html#a0630a11dd00b48b8d2b1d2a4a1dfa9de">KERNEL_PRINT_PROGRESS_END</a>&#160;&#160;&#160;if(<a class="el" href="device_8h.html#a03019be38c75a4741a5351cff1776f64">GetProcID</a>()==0)do{<a class="el" href="kernel_8h.html#a92c0fd9bbafd520c7435afb41b1f1e65">printk</a>(&quot;%s\n&quot;,&amp;kernel_name[init_progress]); if(<a class="el" href="device_8h.html#a03019be38c75a4741a5351cff1776f64">GetProcID</a>()==0)<a class="el" href="kernel_8cc.html#adbd61a5fbc35c76f4bcf9eccb289d2ee">Disclaimer</a>();}while(0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00247">247</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l00260">kInitKernel()</a>.</p>

</div>
</div>
<a class="anchor" id="a0d73b8a648a1501b4a09c11bfd9c819c"></a><!-- doxytag: member="kernel.cc::kIsInSigHandler" ref="a0d73b8a648a1501b4a09c11bfd9c819c" args="(pt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="kernel_8cc.html#a0d73b8a648a1501b4a09c11bfd9c819c">kIsInSigHandler</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">pt</td><td>)</td>
          <td>&#160;&#160;&#160;(pt-&gt;sig_havetriggered!=0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00057">57</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l00706">kGetProcessState()</a>, <a class="el" href="kernel_8cc_source.html#l01087">kGetProcessStats()</a>, and <a class="el" href="kernel_8cc_source.html#l00892">kSuspend()</a>.</p>

</div>
</div>
<a class="anchor" id="a017d3e8af0a7f0e5266f61ac26fadd66"></a><!-- doxytag: member="kernel.cc::kSetOSState" ref="a017d3e8af0a7f0e5266f61ac26fadd66" args="(state)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="kernel_8cc.html#a017d3e8af0a7f0e5266f61ac26fadd66">kSetOSState</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">state</td><td>)</td>
          <td>&#160;&#160;&#160;*(<a class="el" href="kernel_8h.html#a377ea6c9edb9a0cb4c553bd158580fbe">os_state_t</a>*)&amp;<a class="el" href="kernel_8h.html#a947c0bc119bba11ab8af50f94b3c474d">os_state</a>=state</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00054">54</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l00159">kBoot()</a>, <a class="el" href="kernel_8cc_source.html#l00260">kInitKernel()</a>, <a class="el" href="kernel_8cc_source.html#l00468">kPanic()</a>, and <a class="el" href="kernel_8cc_source.html#l01561">kStartScheduling()</a>.</p>

</div>
</div>
<a class="anchor" id="adb8d91529f94de9573a88c3b8514ac6f"></a><!-- doxytag: member="kernel.cc::STACK_PROTECTION_VALUE" ref="adb8d91529f94de9573a88c3b8514ac6f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="kernel_8cc.html#adb8d91529f94de9573a88c3b8514ac6f">STACK_PROTECTION_VALUE</a>&#160;&#160;&#160;0xdeadbeef</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00093">93</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l01603">kCheckStackOverflow()</a>, <a class="el" href="kernel_8cc_source.html#l00545">kCreateProcess()</a>, and <a class="el" href="kernel_8cc_source.html#l00944">kEndProcess()</a>.</p>

</div>
</div>
<a class="anchor" id="ac626325ceddb5d49a930f1b435af28b4"></a><!-- doxytag: member="kernel.cc::td_proc" ref="ac626325ceddb5d49a930f1b435af28b4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="kernel_8cc.html#ac626325ceddb5d49a930f1b435af28b4">td_proc</a>&#160;&#160;&#160;(&amp;<a class="el" href="kernel_8h.html#a7b21412447a44f3594e1eac57cda11c3">kernel_context</a>-&gt;proc_table[0])</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00062">62</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l01017">kDestroyProcess()</a>, <a class="el" href="kernel_8cc_source.html#l00260">kInitKernel()</a>, <a class="el" href="kernel_8cc_source.html#l01679">kScheduleNext()</a>, <a class="el" href="kernel_8cc_source.html#l00779">kStartProcess()</a>, and <a class="el" href="kernel_8cc_source.html#l01561">kStartScheduling()</a>.</p>

</div>
</div>
<a class="anchor" id="a77b4d1550e6990d959376de008f509ed"></a><!-- doxytag: member="kernel.cc::TDEBUG" ref="a77b4d1550e6990d959376de008f509ed" args="(a...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="kernel_8cc.html#a77b4d1550e6990d959376de008f509ed">TDEBUG</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">a...</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span>{                                                                                             \
        struct timeval now;                                                                         \
        const <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>  ts=(1&lt;&lt;<a class="code" href="kernel_8cc.html#a5918a433e654d957a62f8f9d0839d0b5">TDEBUG_SIZE</a>)*<a class="code" href="device_8h.html#a03019be38c75a4741a5351cff1776f64">GetProcID</a>(),                                        \
                            ts_mask=((1&lt;&lt;<a class="code" href="kernel_8cc.html#a5918a433e654d957a62f8f9d0839d0b5">TDEBUG_SIZE</a>)*NUM_PROCESSORS-1)&amp;~((1&lt;&lt;<a class="code" href="kernel_8cc.html#a5918a433e654d957a62f8f9d0839d0b5">TDEBUG_SIZE</a>)-1);      \
        while(<a class="code" href="newlibstubs_8cc.html#aaf2d0a99430a6d5253b8c395c30ca7e3" title="newlib syscall: returns the current time.">gettimeofday</a>(&amp;now,NULL)==0&amp;&amp;(now.tv_usec&amp;ts_mask)!=ts);                               \
        DEBUG(<a class="code" href="graphix_8h.html#a6585d26329c5e71ae768be0be86a7cea">a</a>);                                                                                   \
    }<span class="keywordflow">while</span>(0)
</pre></div>
<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00035">35</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l00260">kInitKernel()</a>, and <a class="el" href="kernel_8cc_source.html#l00509">kShutdown()</a>.</p>

</div>
</div>
<a class="anchor" id="a5918a433e654d957a62f8f9d0839d0b5"></a><!-- doxytag: member="kernel.cc::TDEBUG_SIZE" ref="a5918a433e654d957a62f8f9d0839d0b5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="kernel_8cc.html#a5918a433e654d957a62f8f9d0839d0b5">TDEBUG_SIZE</a>&#160;&#160;&#160;13</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00034">34</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

</div>
</div>
<a class="anchor" id="aad9cc64d45a76ba0d37c00f8cd9caa37"></a><!-- doxytag: member="kernel.cc::TRACE" ref="aad9cc64d45a76ba0d37c00f8cd9caa37" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="kernel_8cc.html#aad9cc64d45a76ba0d37c00f8cd9caa37">TRACE</a>&#160;&#160;&#160;((<a class="el" href="structtrace__t.html">trace_t</a>*)<a class="el" href="kernel_8cc.html#a889b2a9246fc945ee2c48e771895cf2f">kGetHookTable</a>()[<a class="el" href="hooks_8h.html#ae38205ed3b6b9c9204abaaf9bca135f2">HOOK_TRACE</a>])</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l01555">1555</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l01017">kDestroyProcess()</a>, <a class="el" href="kernel_8cc_source.html#l01679">kScheduleNext()</a>, <a class="el" href="kernel_8cc_source.html#l01622">kScheduleProcess()</a>, <a class="el" href="kernel_8cc_source.html#l00732">kSetProcessTimeslice()</a>, and <a class="el" href="kernel_8cc_source.html#l00814">kYield()</a>.</p>

</div>
</div>
<a class="anchor" id="aad9cc64d45a76ba0d37c00f8cd9caa37"></a><!-- doxytag: member="kernel.cc::TRACE" ref="aad9cc64d45a76ba0d37c00f8cd9caa37" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="kernel_8cc.html#aad9cc64d45a76ba0d37c00f8cd9caa37">TRACE</a>&#160;&#160;&#160;((<a class="el" href="structtrace__t.html">trace_t</a>*)<a class="el" href="kernel_8h.html#a7b21412447a44f3594e1eac57cda11c3">kernel_context</a>-&gt;hooks[<a class="el" href="hooks_8h.html#ae38205ed3b6b9c9204abaaf9bca135f2">HOOK_TRACE</a>])</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l01555">1555</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a569d2cd3b33cb894564b004d068afcf4"></a><!-- doxytag: member="kernel.cc::__attribute__" ref="a569d2cd3b33cb894564b004d068afcf4" args="((section(&quot;.bss.kcontext&quot;), aligned(CACHELINE_ALIGN)))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structkernel__context__t.html">kernel_context_t</a> kernel_contexts [NUM_PROCESSORS] <a class="el" href="struct____attribute____.html">__attribute__</a> </td>
          <td>(</td>
          <td class="paramtype">(section(&quot;.bss.kcontext&quot;), aligned(<a class="el" href="helix__config_8h.html#ac946bd02ab86555c1a7700dbfd9d30bf">CACHELINE_ALIGN</a>))&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>All kernel contexts, located in shared memory. </p>

</div>
</div>
<a class="anchor" id="a4214514f92047dc88393f89ddb14f5a3"></a><!-- doxytag: member="kernel.cc::__attribute__" ref="a4214514f92047dc88393f89ddb14f5a3" args="((unused))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="device_8h.html#a4588b12eae6951d9c976a65d6869b47f">const</a> char* kernel_name <a class="el" href="struct____attribute____.html">__attribute__</a> </td>
          <td>(</td>
          <td class="paramtype">(unused)&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The name of the kernel to print during boot. </p>

</div>
</div>
<a class="anchor" id="a2356995c26d349e69bec98eb8c70cf77"></a><!-- doxytag: member="kernel.cc::__attribute__" ref="a2356995c26d349e69bec98eb8c70cf77" args="((section(&quot;.bss.proc&quot;)))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct _reent kernel_impure_data <a class="el" href="struct____attribute____.html">__attribute__</a> </td>
          <td>(</td>
          <td class="paramtype">(section(&quot;.bss.proc&quot;))&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>All impure data (as defined by newlib), reserved for kernel. </p>

</div>
</div>
<a class="anchor" id="adbd61a5fbc35c76f4bcf9eccb289d2ee"></a><!-- doxytag: member="kernel.cc::Disclaimer" ref="adbd61a5fbc35c76f4bcf9eccb289d2ee" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="kernel_8cc.html#adbd61a5fbc35c76f4bcf9eccb289d2ee">Disclaimer</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00183">183</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="helix__config_8h_source.html#l00129">MAX_PROCESSES</a>, <a class="el" href="kernel_8h_source.html#l00262">printk</a>, and <a class="el" href="api_8h_source.html#l00011">STRINGIFY</a>.</p>

</div>
</div>
<a class="anchor" id="ae741e6ffe8b7b61c49654c7410f7a868"></a><!-- doxytag: member="kernel.cc::GetRemainingTimeslice" ref="ae741e6ffe8b7b61c49654c7410f7a868" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="kernel__types_8h.html#a77e49d03a1e611dab893961ac9886155">timeslice_t</a> <a class="el" href="kernel_8cc.html#ae741e6ffe8b7b61c49654c7410f7a868">GetRemainingTimeslice</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the remaining clock ticks before the end of the current timeslice. </p>
<p>When interrupted by the timer, race conditions can occur, which result in a reported timeslice that is too high.</p>
<p>Call from user space, does not need a syscall. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>the number of remaining clock cycles. </dd></dl>

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00763">763</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="kernel_8h.html#afa048712e8a413863369b93c18956d9b">current_proc</a>, <a class="el" href="timer_8cc_source.html#l00068">kGetTimer()</a>, <a class="el" href="kernel_8cc_source.html#l00114">sch_t::remaining_slots</a>, <a class="el" href="helix__config_8h_source.html#l00188">SCHEDULE_SLOTS</a>, and <a class="el" href="kernel_8h_source.html#l00129">_proc_table_t::time_yielded</a>.</p>

<p>Referenced by <a class="el" href="trace_8cc_source.html#l00139">TraceRelTime()</a>.</p>

</div>
</div>
<a class="anchor" id="ad6c2311446d5297aea2a63ebfead05c4"></a><!-- doxytag: member="kernel.cc::kAllocChannels" ref="ad6c2311446d5297aea2a63ebfead05c4" args="(pid_t pid, int num_chan)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="kernel_8cc.html#ad6c2311446d5297aea2a63ebfead05c4">kAllocChannels</a> </td>
          <td>(</td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_chan</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Allocates memory for channels. </p>
<p>When called multiple times, the allocated memory will be resized. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pid</td><td>process to allocate channel memory for </td></tr>
    <tr><td class="paramname">num_chan</td><td>number of channels to allocate, will be initialized to NULL </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, otherwise an errno </dd></dl>

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l01198">1198</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="kernel_8h_source.html#l00068">channel_t::channel</a>, <a class="el" href="kernel_8h_source.html#l00141">_proc_table_t::channels</a>, <a class="el" href="api_8h_source.html#l00067">ESUCCESS</a>, <a class="el" href="kernel_8h.html#a7b21412447a44f3594e1eac57cda11c3">kernel_context</a>, <a class="el" href="kernel_8h_source.html#l00069">channel_t::label</a>, <a class="el" href="helix__config_8h_source.html#l00129">MAX_PROCESSES</a>, <a class="el" href="kernel_8h_source.html#l00140">_proc_table_t::num_channels</a>, <a class="el" href="malloc_8cc_source.html#l00336">orealloc()</a>, <a class="el" href="trace_8cc_source.html#l00250">pid</a>, and <a class="el" href="kernel_8h_source.html#l00159">kernel_context_t::proc_table</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l01226">kAssignChannel()</a>.</p>

</div>
</div>
<a class="anchor" id="a398cae67ec6b117dfd86abaa6f9575fe"></a><!-- doxytag: member="kernel.cc::kAssignChannel" ref="a398cae67ec6b117dfd86abaa6f9575fe" args="(pid_t pid, int chan_id, void *channel, int label)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="kernel_8cc.html#a398cae67ec6b117dfd86abaa6f9575fe">kAssignChannel</a> </td>
          <td>(</td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>chan_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>label</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Assigns a pointer to a channel. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pid</td><td>process to assign a channel to </td></tr>
    <tr><td class="paramname">chan_id</td><td>channel to assign the pointer to, must be less than num_chan of a previous <a class="el" href="kernel_8h.html#ab14b01d3c15d03ac0ec949540990b638" title="Allocates memory for channels.">kAllocChannels()</a> call, when set to -1, a new channel is allocated at the end of the list </td></tr>
    <tr><td class="paramname">channel</td><td>to store in the channel list </td></tr>
    <tr><td class="paramname">label</td><td>an alternative label of the channel (set to 0 for no label, all negative labels are reserved by the kernel) </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, otherwise an errno </dd></dl>

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l01226">1226</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="kernel_8h_source.html#l00068">channel_t::channel</a>, <a class="el" href="kernel_8h_source.html#l00141">_proc_table_t::channels</a>, <a class="el" href="kernel_8cc_source.html#l00122">DID_WORK_YES</a>, <a class="el" href="api_8h_source.html#l00067">ESUCCESS</a>, <a class="el" href="kernel_8cc_source.html#l00109">sch_t::just_did_work</a>, <a class="el" href="kernel_8cc_source.html#l01198">kAllocChannels()</a>, <a class="el" href="kernel_8h.html#a7b21412447a44f3594e1eac57cda11c3">kernel_context</a>, <a class="el" href="kernel_8h_source.html#l00069">channel_t::label</a>, <a class="el" href="helix__config_8h_source.html#l00129">MAX_PROCESSES</a>, <a class="el" href="kernel_8h_source.html#l00140">_proc_table_t::num_channels</a>, <a class="el" href="trace_8cc_source.html#l00250">pid</a>, and <a class="el" href="kernel_8h_source.html#l00159">kernel_context_t::proc_table</a>.</p>

</div>
</div>
<a class="anchor" id="a0ec6a8880bbbb1ea06e2fe706e0243e5"></a><!-- doxytag: member="kernel.cc::kBoot" ref="a0ec6a8880bbbb1ea06e2fe706e0243e5" args="(kernel_boot_param_t *arg) __attribute__((noreturn))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="kernel_8cc.html#a0ec6a8880bbbb1ea06e2fe706e0243e5">kBoot</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structkernel__boot__param__t.html">kernel_boot_param_t</a> *&#160;</td>
          <td class="paramname"><em>arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Entry point of C-code of the kernel. </p>
<p>After initialization of crt0.S and crtbegin.S, this function is called. It will handle all initialization routines of the kernel and will eventually start the task daemon.</p>
<p>The master core will usually be invoked without additional arguments, a slave core will receive a <a class="el" href="structkernel__boot__param__t.html" title="The optional parameter to main(int,char**) when the kernel boots.">kernel_boot_param_t</a>* that contains a reference to a mailbox to notify a successful boot.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">arg</td><td>NULL or <a class="el" href="structkernel__boot__param__t.html" title="The optional parameter to main(int,char**) when the kernel boots.">kernel_boot_param_t</a>* </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00159">159</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="kernel_8h_source.html#l00185">kernel_boot_param_t::arg</a>, <a class="el" href="kernel_8cc_source.html#l00022">DBLED_ALIVE</a>, <a class="el" href="kernel_8cc_source.html#l00023">DBLED_INIT</a>, <a class="el" href="kernel_8cc_source.html#l00031">DEBUG_ALLOFF</a>, <a class="el" href="kernel_8cc_source.html#l00030">DEBUG_OFF</a>, <a class="el" href="kernel_8cc_source.html#l00029">DEBUG_ON</a>, <a class="el" href="InitHardware_8cc_source.html#l00010">InitHardware()</a>, <a class="el" href="kernel_8cc_source.html#l00260">kInitKernel()</a>, <a class="el" href="kernel_8cc_source.html#l00054">kSetOSState</a>, <a class="el" href="kernel_8cc_source.html#l01561">kStartScheduling()</a>, <a class="el" href="kernel_8cc_source.html#l00446">kStartTaskDaemon()</a>, <a class="el" href="kernel_8h_source.html#l00183">kernel_boot_param_t::notify_booted</a>, and <a class="el" href="kernel_8h_source.html#l00019">OS_BOOT</a>.</p>

</div>
</div>
<a class="anchor" id="ae44c134486402440002d11a9ba8304af"></a><!-- doxytag: member="kernel.cc::kCheckFreeStack" ref="ae44c134486402440002d11a9ba8304af" args="() __attribute__((unused))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="kernel_8cc.html#ae44c134486402440002d11a9ba8304af">kCheckFreeStack</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l01588">1588</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="kernel_8h_source.html#l00134">_proc_table_t::context_switches</a>, <a class="el" href="kernel_8h.html#a5517ad3b74016925c521c71812d11aea">current_context</a>, <a class="el" href="kernel_8h.html#afa048712e8a413863369b93c18956d9b">current_proc</a>, <a class="el" href="api_8h_source.html#l00007">likely</a>, <a class="el" href="kernel_8h_source.html#l00133">_proc_table_t::min_stack</a>, <a class="el" href="kernel_8h_source.html#l00061">proc_context_t::regs</a>, <a class="el" href="kernel_8h_source.html#l00148">_proc_table_t::stack</a>, and <a class="el" href="api_8h_source.html#l00008">unlikely</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l01679">kScheduleNext()</a>.</p>

</div>
</div>
<a class="anchor" id="aab817c9b0bf11c52dfaf813910e31720"></a><!-- doxytag: member="kernel.cc::kCheckStackOverflow" ref="aab817c9b0bf11c52dfaf813910e31720" args="() __attribute__((unused))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="kernel_8cc.html#aab817c9b0bf11c52dfaf813910e31720">kCheckStackOverflow</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l01603">1603</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="kernel_8h.html#a69471a3ff8b448af4172f71d74bed723">_impure_ptr</a>, <a class="el" href="kernel_8cc_source.html#l00137">_kernel_impure_ptr</a>, <a class="el" href="kernel_8h.html#a5517ad3b74016925c521c71812d11aea">current_context</a>, <a class="el" href="kernel_8h.html#afa048712e8a413863369b93c18956d9b">current_proc</a>, <a class="el" href="kernel_8cc_source.html#l00530">kGetPid()</a>, <a class="el" href="kernel_8cc_source.html#l00468">kPanic()</a>, <a class="el" href="kernel_8h_source.html#l00061">proc_context_t::regs</a>, <a class="el" href="kernel_8h_source.html#l00148">_proc_table_t::stack</a>, <a class="el" href="kernel_8cc_source.html#l00093">STACK_PROTECTION_VALUE</a>, and <a class="el" href="api_8h_source.html#l00008">unlikely</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l01679">kScheduleNext()</a>.</p>

</div>
</div>
<a class="anchor" id="aaefc9f16b529add9146a5b17115b0469"></a><!-- doxytag: member="kernel.cc::kClearSignal" ref="aaefc9f16b529add9146a5b17115b0469" args="(int signum, struct sigaction *sa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="kernel_8cc.html#aaefc9f16b529add9146a5b17115b0469">kClearSignal</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>signum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structsigaction.html">sigaction</a> *&#160;</td>
          <td class="paramname"><em>sa</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l01325">1325</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="kernel_2signal_8cc_source.html#l00067">_sig_def_func</a>, <a class="el" href="kernel_8h.html#afa048712e8a413863369b93c18956d9b">current_proc</a>, <a class="el" href="api_8h_source.html#l00067">ESUCCESS</a>, <a class="el" href="kernel_8cc_source.html#l01416">kMaskSignal()</a>, <a class="el" href="signal_8h_source.html#l00038">NSIG</a>, <a class="el" href="signal_8h_source.html#l00075">sigaction::sa_flags</a>, <a class="el" href="signal_8h_source.html#l00079">sigaction::sa_handler</a>, <a class="el" href="signal_8h_source.html#l00076">sigaction::sa_mask</a>, <a class="el" href="signal_8h_source.html#l00123">SA_RESETHAND</a>, <a class="el" href="kernel_8h_source.html#l00115">_proc_table_t::sig_action</a>, <a class="el" href="signal_8h_source.html#l00107">SIG_BLOCK</a>, <a class="el" href="kernel_8h_source.html#l00116">_proc_table_t::sig_enabled</a>, <a class="el" href="kernel_8h_source.html#l00117">_proc_table_t::sig_triggered</a>, and <a class="el" href="signal_8h_source.html#l00099">sigaddset()</a>.</p>

</div>
</div>
<a class="anchor" id="a80bee10ed63d2e9e67b09f4a9ef17d09"></a><!-- doxytag: member="kernel.cc::kCoreDump" ref="a80bee10ed63d2e9e67b09f4a9ef17d09" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="kernel_8cc.html#a80bee10ed63d2e9e67b09f4a9ef17d09">kCoreDump</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Prints complete state of the current process and the kernel. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, otherwise an errno </dd></dl>

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l01123">1123</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="kernel_8h.html#a5517ad3b74016925c521c71812d11aea">current_context</a>, <a class="el" href="kernel_8h.html#afa048712e8a413863369b93c18956d9b">current_proc</a>, <a class="el" href="api_8h_source.html#l00067">ESUCCESS</a>, <a class="el" href="kernel_8h_source.html#l00142">_proc_table_t::flags</a>, <a class="el" href="kernel_8h_source.html#l00063">proc_context_t::fsr</a>, <a class="el" href="device_8h.html#a849ce054a843c28398da5b40f0918e77">GetClockFreq()</a>, <a class="el" href="kernel_8h_source.html#l00028">GetOSState</a>, <a class="el" href="device_8h_source.html#l00196">GetProcID()</a>, <a class="el" href="kernel_8cc_source.html#l00087">IS_VALID_DDR_PTR</a>, <a class="el" href="kernel_8h.html#a7b21412447a44f3594e1eac57cda11c3">kernel_context</a>, <a class="el" href="kernel_8h_source.html#l00126">_proc_table_t::main</a>, <a class="el" href="helix__config_8h_source.html#l00129">MAX_PROCESSES</a>, <a class="el" href="kernel_8h_source.html#l00133">_proc_table_t::min_stack</a>, <a class="el" href="kernel_8h_source.html#l00062">proc_context_t::msr</a>, <a class="el" href="kernel_8h_source.html#l00108">_proc_table_t::pid</a>, <a class="el" href="kernel_8h_source.html#l00262">printk</a>, <a class="el" href="kernel_8h_source.html#l00159">kernel_context_t::proc_table</a>, <a class="el" href="kernel_8h_source.html#l00061">proc_context_t::regs</a>, <a class="el" href="kernel_8h_source.html#l00148">_proc_table_t::stack</a>, <a class="el" href="kernel_8h_source.html#l00125">_proc_table_t::state</a>, <a class="el" href="kernel_8h_source.html#l00128">_proc_table_t::time</a>, and <a class="el" href="kernel_8h_source.html#l00129">_proc_table_t::time_yielded</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l00468">kPanic()</a>.</p>

</div>
</div>
<a class="anchor" id="ab02050bfd20dee07ad5c48dc98018540"></a><!-- doxytag: member="kernel.cc::kCreateProcess" ref="ab02050bfd20dee07ad5c48dc98018540" args="(pid_t &amp;pid, void *(*main)(void *), void *arg, timems_t slicelength, unsigned int stack)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="kernel_8cc.html#ab02050bfd20dee07ad5c48dc98018540">kCreateProcess</a> </td>
          <td>(</td>
          <td class="paramtype">pid_t &amp;&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *(*)(void *)&#160;</td>
          <td class="paramname"><em>main</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="kernel__types_8h.html#aab831218703b6d40fa14bd6ec1d2fcac">timems_t</a>&#160;</td>
          <td class="paramname"><em>slicelength</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>stack</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates a new process. </p>
<p>By default, a process is created detached.</p>
<p>Only the task daemon is allowed to start new processes. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pid</td><td>the new process id will be written to the pointer supplied </td></tr>
    <tr><td class="paramname">main</td><td>the main function of this process </td></tr>
    <tr><td class="paramname">arg</td><td>an optional argument to main, can be NULL </td></tr>
    <tr><td class="paramname">slicelength</td><td>the length of the allocated time slice in ms </td></tr>
    <tr><td class="paramname">stack</td><td>the size of the stack in words </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, otherwise an errno </dd></dl>

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00545">545</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="kernel_8cc_source.html#l00026">DBLED_NEWPROC</a>, <a class="el" href="kernel_8cc_source.html#l00029">DEBUG_ON</a>, <a class="el" href="api_8h_source.html#l00067">ESUCCESS</a>, <a class="el" href="kernel_2signal_8cc_source.html#l00030">InitSignalList()</a>, <a class="el" href="kernel_8cc_source.html#l01017">kDestroyProcess()</a>, <a class="el" href="kernel_8h.html#a7b21412447a44f3594e1eac57cda11c3">kernel_context</a>, <a class="el" href="kernel_8cc_source.html#l00530">kGetPid()</a>, <a class="el" href="kernel_8h.html#a4f2533d3d9b2c62657a9d722a6c4a329">kInitContext()</a>, <a class="el" href="kernel_8cc.html#a5eda2256972d4e67ab045cb3ebfa4ecf">kInitSignalContext()</a>, <a class="el" href="kernel_8cc_source.html#l00732">kSetProcessTimeslice()</a>, <a class="el" href="trace_8cc_source.html#l00253">main</a>, <a class="el" href="helix__config_8h_source.html#l00129">MAX_PROCESSES</a>, <a class="el" href="mc_8h_source.html#l00230">mc_apply</a>, <a class="el" href="helix__config_8h_source.html#l00136">MEASURE_STACK_USAGE</a>, <a class="el" href="kernel_8h_source.html#l00048">NEW</a>, <a class="el" href="kernel_8h_source.html#l00047">NOPROC</a>, <a class="el" href="malloc_8cc_source.html#l00152">omalloc()</a>, <a class="el" href="trace_8cc_source.html#l00250">pid</a>, <a class="el" href="kernel__types_8h_source.html#l00041">PROC_FLAG_DETACHED</a>, <a class="el" href="kernel_8h_source.html#l00159">kernel_context_t::proc_table</a>, <a class="el" href="pthread_8h_source.html#l00096">pthread_sch_t::processes</a>, <a class="el" href="kernel_8cc_source.html#l00108">sch_t::pthread_sch</a>, <a class="el" href="signal_8h_source.html#l00097">sigemptyset()</a>, <a class="el" href="signal_8h_source.html#l00098">sigfillset()</a>, and <a class="el" href="kernel_8cc_source.html#l00093">STACK_PROTECTION_VALUE</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l00446">kStartTaskDaemon()</a>.</p>

</div>
</div>
<a class="anchor" id="a0384b3a8ec4a91e91895ae9c44b24c56"></a><!-- doxytag: member="kernel.cc::kDestroyProcess" ref="a0384b3a8ec4a91e91895ae9c44b24c56" args="(pid_t pid, void **ret)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="kernel_8cc.html#a0384b3a8ec4a91e91895ae9c44b24c56">kDestroyProcess</a> </td>
          <td>(</td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>ret</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Destroys and clean up a process. </p>
<p>Only the task daemon is allowed to destroy processes. All allocated memory will be freeed. Process statistics is not deleted, so after destroying a process, <a class="el" href="kernel_8h.html#a4a36797d67315bf7782dd5a6fbffabb8" title="Collects statistics of the specified process.">kGetProcessStats()</a> can be called. A process cannot destroy itself.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pid</td><td>process to destroy </td></tr>
    <tr><td class="paramname">ret</td><td>a pointer to store the return value of the process, can be NULL, holds unknown data when a non-<a class="el" href="kernel_8h.html#a59775280f5f039f80ce5d63993e40484a5dfb36109b24f39d54d5c3f48f53def8" title="process has ended, but not cleaned up">ZOMBIE</a> process is destroyed </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, otherwise an errno </dd></dl>

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l01017">1017</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="api_8h_source.html#l00067">ESUCCESS</a>, <a class="el" href="malloc_8cc_source.html#l00509">ffreeAll()</a>, <a class="el" href="malloc_8cc_source.html#l00496">freeAll()</a>, <a class="el" href="kernel_8h.html#a7b21412447a44f3594e1eac57cda11c3">kernel_context</a>, <a class="el" href="kernel_8cc_source.html#l00530">kGetPid()</a>, <a class="el" href="trace_8cc_source.html#l00258">kTraceProcChange()</a>, <a class="el" href="helix__config_8h_source.html#l00129">MAX_PROCESSES</a>, <a class="el" href="mc_8h_source.html#l00230">mc_apply</a>, <a class="el" href="kernel_8h_source.html#l00109">_proc_table_t::next_entry</a>, <a class="el" href="kernel_8h_source.html#l00047">NOPROC</a>, <a class="el" href="trace_8cc_source.html#l00250">pid</a>, <a class="el" href="kernel_8h_source.html#l00110">_proc_table_t::prev_entry</a>, <a class="el" href="kernel_8h_source.html#l00159">kernel_context_t::proc_table</a>, <a class="el" href="pthread_8h_source.html#l00096">pthread_sch_t::processes</a>, <a class="el" href="kernel_8cc_source.html#l00108">sch_t::pthread_sch</a>, <a class="el" href="kernel_8h_source.html#l00127">_proc_table_t::ret</a>, <a class="el" href="kernel_8h_source.html#l00125">_proc_table_t::state</a>, <a class="el" href="kernel_8cc_source.html#l00062">td_proc</a>, <a class="el" href="kernel_8cc_source.html#l01555">TRACE</a>, and <a class="el" href="kernel_8h_source.html#l00054">ZOMBIE</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l00545">kCreateProcess()</a>, and <a class="el" href="kernel_8cc_source.html#l01066">kGetZombie()</a>.</p>

</div>
</div>
<a class="anchor" id="a4a51a3c1e9b2168b41774cb8d58dfe19"></a><!-- doxytag: member="kernel.cc::kEndProcess" ref="a4a51a3c1e9b2168b41774cb8d58dfe19" args="(void *ret)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="kernel_8cc.html#a4a51a3c1e9b2168b41774cb8d58dfe19">kEndProcess</a> </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ret</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Ends the current process. </p>
<p>Will be called automatically when the main function of a process returns. The timeslice will always be ended by a call to <a class="el" href="kernel_8h.html#ab91f44b41a9180f07267ac1ead6dfdbd" title="Forcably ends the timeslice of the current process.">kYield()</a>. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ret</td><td>the value returned by the main of the process, which can be retrieved using <a class="el" href="kernel_8h.html#a4fbbe789408d7257af2f3b0bd73bf9ef" title="Joins a JOINABLE process.">kJoinProcess()</a> and <a class="el" href="kernel_8h.html#a847a95e0b86135a016db40def9286aa4" title="Destroys and clean up a process.">kDestroyProcess()</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>never </dd></dl>

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00944">944</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="kernel_8h.html#a69471a3ff8b448af4172f71d74bed723">_impure_ptr</a>, <a class="el" href="kernel_8cc_source.html#l00137">_kernel_impure_ptr</a>, <a class="el" href="kernel_8h.html#a5517ad3b74016925c521c71812d11aea">current_context</a>, <a class="el" href="kernel_8h.html#afa048712e8a413863369b93c18956d9b">current_proc</a>, <a class="el" href="kernel_8h_source.html#l00142">_proc_table_t::flags</a>, <a class="el" href="device_8h_source.html#l00196">GetProcID()</a>, <a class="el" href="kernel_8h_source.html#l00053">JOINABLE</a>, <a class="el" href="kernel_8cc_source.html#l00530">kGetPid()</a>, <a class="el" href="kernel_8cc_source.html#l00468">kPanic()</a>, <a class="el" href="kernel_8cc_source.html#l00814">kYield()</a>, <a class="el" href="kernel_8h_source.html#l00126">_proc_table_t::main</a>, <a class="el" href="kernel_8h_source.html#l00133">_proc_table_t::min_stack</a>, <a class="el" href="kernel_8h_source.html#l00262">printk</a>, <a class="el" href="kernel__types_8h_source.html#l00040">PROC_FLAG_JOINABLE</a>, <a class="el" href="kernel_8h_source.html#l00127">_proc_table_t::ret</a>, <a class="el" href="kernel_8h_source.html#l00148">_proc_table_t::stack</a>, <a class="el" href="kernel_8cc_source.html#l00093">STACK_PROTECTION_VALUE</a>, <a class="el" href="kernel_8h_source.html#l00125">_proc_table_t::state</a>, and <a class="el" href="kernel_8h_source.html#l00054">ZOMBIE</a>.</p>

</div>
</div>
<a class="anchor" id="a211a73673db6a85dbf71f70c0354674a"></a><!-- doxytag: member="kernel.cc::kFindChannel" ref="a211a73673db6a85dbf71f70c0354674a" args="(int label)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="kernel_8cc.html#a211a73673db6a85dbf71f70c0354674a">kFindChannel</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>label</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Looks for a channel with the specified label. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">label</td><td>the label to look for </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the channel id of the channel with the specified label, or -1 when not found </dd></dl>

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l01271">1271</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="kernel_8h_source.html#l00141">_proc_table_t::channels</a>, <a class="el" href="kernel_8h.html#afa048712e8a413863369b93c18956d9b">current_proc</a>, <a class="el" href="kernel_8h_source.html#l00069">channel_t::label</a>, and <a class="el" href="kernel_8h_source.html#l00140">_proc_table_t::num_channels</a>.</p>

</div>
</div>
<a class="anchor" id="ae5dfcd55ef79bb8e64c97d366bc6a94c"></a><!-- doxytag: member="kernel.cc::kFindEventEntry" ref="ae5dfcd55ef79bb8e64c97d366bc6a94c" args="(proc_table_t *proc, void *event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structsync__event__entry__t.html">sync_event_entry_t</a>* <a class="el" href="kernel_8cc.html#ae5dfcd55ef79bb8e64c97d366bc6a94c">kFindEventEntry</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="kernel_8h.html#a151ec501a2523f8a434c7b259d96151b">proc_table_t</a> *&#160;</td>
          <td class="paramname"><em>proc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>event</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l01449">1449</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="kernel_8cc_source.html#l01584">ASSERT</a>, <a class="el" href="kernel_8h_source.html#l00074">sync_event_entry_t::event</a>, <a class="el" href="kernel_8h_source.html#l00075">sync_event_entry_t::hit</a>, <a class="el" href="helix__config_8h_source.html#l00122">KERNEL_SYNC_EVENTS</a>, <a class="el" href="kernel_8h_source.html#l00138">_proc_table_t::sync_event</a>, and <a class="el" href="kernel_8h_source.html#l00076">sync_event_entry_t::wait</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l01483">kSyncEventHit()</a>, and <a class="el" href="kernel_8cc_source.html#l01524">kSyncEventWait()</a>.</p>

</div>
</div>
<a class="anchor" id="aec8e991b381e779071c8d296db5a5215"></a><!-- doxytag: member="kernel.cc::kGetChannelCount" ref="aec8e991b381e779071c8d296db5a5215" args="(pid_t pid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="kernel_8cc.html#aec8e991b381e779071c8d296db5a5215">kGetChannelCount</a> </td>
          <td>(</td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>pid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the number of allocated channels. </p>
<p>This does not indicate whether channels are assigned or in use. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pid</td><td>the process to get the information of </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The channel count or -1 when an invalid pid is supplied </dd></dl>

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l01179">1179</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="kernel_8h_source.html#l00141">_proc_table_t::channels</a>, <a class="el" href="kernel_8h.html#a7b21412447a44f3594e1eac57cda11c3">kernel_context</a>, <a class="el" href="helix__config_8h_source.html#l00129">MAX_PROCESSES</a>, <a class="el" href="kernel_8h_source.html#l00047">NOPROC</a>, <a class="el" href="kernel_8h_source.html#l00140">_proc_table_t::num_channels</a>, <a class="el" href="trace_8cc_source.html#l00250">pid</a>, <a class="el" href="kernel_8h_source.html#l00159">kernel_context_t::proc_table</a>, and <a class="el" href="kernel_8h_source.html#l00125">_proc_table_t::state</a>.</p>

</div>
</div>
<a class="anchor" id="a889b2a9246fc945ee2c48e771895cf2f"></a><!-- doxytag: member="kernel.cc::kGetHookTable" ref="a889b2a9246fc945ee2c48e771895cf2f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="hooks_8h.html#a60608a6e577367c4f9928747aea95b56">hook_t</a>* <a class="el" href="kernel_8cc.html#a889b2a9246fc945ee2c48e771895cf2f">kGetHookTable</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the pointer to the hook table. </p>
<p>The memory region of the hook table is owned by the TaskDaemon (pid 0). </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>cannot be NULL during normal operation (it can be null during kernel initialization, just before the table is initialized) </dd></dl>

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l01301">1301</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="kernel_8h.html#a7b21412447a44f3594e1eac57cda11c3">kernel_context</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l00260">kInitKernel()</a>.</p>

</div>
</div>
<a class="anchor" id="ac15d916c2ab5a6adfa64f13f43050266"></a><!-- doxytag: member="kernel.cc::kGetPid" ref="ac15d916c2ab5a6adfa64f13f43050266" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pid_t <a class="el" href="kernel_8cc.html#ac15d916c2ab5a6adfa64f13f43050266">kGetPid</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the process id of the current process. </p>

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00530">530</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="kernel_8h.html#afa048712e8a413863369b93c18956d9b">current_proc</a>, and <a class="el" href="kernel_8h_source.html#l00108">_proc_table_t::pid</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l01603">kCheckStackOverflow()</a>, <a class="el" href="kernel_8cc_source.html#l00545">kCreateProcess()</a>, <a class="el" href="kernel_8cc_source.html#l01017">kDestroyProcess()</a>, <a class="el" href="kernel_8cc_source.html#l00944">kEndProcess()</a>, <a class="el" href="kernel_8cc_source.html#l00706">kGetProcessState()</a>, <a class="el" href="kernel_8cc_source.html#l01066">kGetZombie()</a>, <a class="el" href="kernel_8cc_source.html#l00509">kShutdown()</a>, <a class="el" href="kernel_8cc_source.html#l00779">kStartProcess()</a>, <a class="el" href="kernel_8cc_source.html#l01483">kSyncEventHit()</a>, <a class="el" href="kernel_8cc_source.html#l00814">kYield()</a>, and <a class="el" href="kernel_8cc_source.html#l00640">ProcessEntry()</a>.</p>

</div>
</div>
<a class="anchor" id="ae0c79c082c04ae29f52e53ea5a5d9c9c"></a><!-- doxytag: member="kernel.cc::kGetProcessFlags" ref="ae0c79c082c04ae29f52e53ea5a5d9c9c" args="(pid_t pid, int *flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="kernel_8cc.html#ae0c79c082c04ae29f52e53ea5a5d9c9c">kGetProcessFlags</a> </td>
          <td>(</td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gets the process flags. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pid</td><td>the process to retrieve the flags of </td></tr>
    <tr><td class="paramname">flags</td><td>will receive the flags of the process, cannot be NULL </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, otherwise an errno </dd></dl>

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00687">687</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="api_8h_source.html#l00067">ESUCCESS</a>, <a class="el" href="kernel_8h_source.html#l00142">_proc_table_t::flags</a>, <a class="el" href="kernel_8h.html#a7b21412447a44f3594e1eac57cda11c3">kernel_context</a>, <a class="el" href="helix__config_8h_source.html#l00129">MAX_PROCESSES</a>, <a class="el" href="kernel_8h_source.html#l00047">NOPROC</a>, <a class="el" href="trace_8cc_source.html#l00250">pid</a>, <a class="el" href="kernel_8h_source.html#l00159">kernel_context_t::proc_table</a>, and <a class="el" href="kernel_8h_source.html#l00125">_proc_table_t::state</a>.</p>

</div>
</div>
<a class="anchor" id="abcef60d3ef2cf168ced79ec4f9ed4782"></a><!-- doxytag: member="kernel.cc::kGetProcessState" ref="abcef60d3ef2cf168ced79ec4f9ed4782" args="(pid_t pid, proc_state_t *state, bool *sighandling)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="kernel_8cc.html#abcef60d3ef2cf168ced79ec4f9ed4782">kGetProcessState</a> </td>
          <td>(</td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="kernel_8h.html#a59775280f5f039f80ce5d63993e40484">proc_state_t</a> *&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>sighandling</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the state of a process. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pid</td><td>the process to retrieve the state of, -1 means myself </td></tr>
    <tr><td class="paramname">state</td><td>will receive the state of the process </td></tr>
    <tr><td class="paramname">sighandling</td><td>will set to true when the process is currently handling signals </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, otherwise an errno </dd></dl>

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00706">706</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="kernel_8h.html#afa048712e8a413863369b93c18956d9b">current_proc</a>, <a class="el" href="api_8h_source.html#l00067">ESUCCESS</a>, <a class="el" href="kernel_8h.html#a7b21412447a44f3594e1eac57cda11c3">kernel_context</a>, <a class="el" href="kernel_8cc_source.html#l00530">kGetPid()</a>, <a class="el" href="kernel_8cc_source.html#l00057">kIsInSigHandler</a>, <a class="el" href="helix__config_8h_source.html#l00129">MAX_PROCESSES</a>, <a class="el" href="kernel_8h_source.html#l00047">NOPROC</a>, <a class="el" href="trace_8cc_source.html#l00250">pid</a>, <a class="el" href="kernel_8h_source.html#l00159">kernel_context_t::proc_table</a>, <a class="el" href="kernel_8h_source.html#l00125">_proc_table_t::state</a>, and <a class="el" href="api_8h_source.html#l00008">unlikely</a>.</p>

</div>
</div>
<a class="anchor" id="aef090d8ae57af08c116c6ef8a94e5747"></a><!-- doxytag: member="kernel.cc::kGetProcessStats" ref="aef090d8ae57af08c116c6ef8a94e5747" args="(pid_t pid, proc_stats_t *stats)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="kernel_8cc.html#aef090d8ae57af08c116c6ef8a94e5747">kGetProcessStats</a> </td>
          <td>(</td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structproc__stats__t.html">proc_stats_t</a> *&#160;</td>
          <td class="paramname"><em>stats</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Collects statistics of the specified process. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pid</td><td>the process to collect statistics of (can be an non-existing process) </td></tr>
    <tr><td class="paramname">stats</td><td>pointer to struct to write statistics to </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, otherwise an errno </dd></dl>

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l01087">1087</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="kernel_8h_source.html#l00111">_proc_table_t::context</a>, <a class="el" href="kernel_8h_source.html#l00170">proc_stats_t::context</a>, <a class="el" href="kernel_8h_source.html#l00134">_proc_table_t::context_switches</a>, <a class="el" href="kernel_8h_source.html#l00175">proc_stats_t::context_switches</a>, <a class="el" href="api_8h_source.html#l00067">ESUCCESS</a>, <a class="el" href="kernel_8h_source.html#l00142">_proc_table_t::flags</a>, <a class="el" href="kernel_8h_source.html#l00168">proc_stats_t::flags</a>, <a class="el" href="device_8h.html#a849ce054a843c28398da5b40f0918e77">GetClockFreq()</a>, <a class="el" href="kernel_8h_source.html#l00167">proc_stats_t::insighandler</a>, <a class="el" href="kernel_8h.html#a7b21412447a44f3594e1eac57cda11c3">kernel_context</a>, <a class="el" href="kernel_8cc_source.html#l00057">kIsInSigHandler</a>, <a class="el" href="kernel_8h_source.html#l00126">_proc_table_t::main</a>, <a class="el" href="kernel_8h_source.html#l00169">proc_stats_t::main</a>, <a class="el" href="helix__config_8h_source.html#l00129">MAX_PROCESSES</a>, <a class="el" href="kernel_8h_source.html#l00133">_proc_table_t::min_stack</a>, <a class="el" href="kernel_8h_source.html#l00174">proc_stats_t::min_stack</a>, <a class="el" href="kernel_8h_source.html#l00165">proc_stats_t::pid</a>, <a class="el" href="trace_8cc_source.html#l00250">pid</a>, <a class="el" href="kernel_8h_source.html#l00159">kernel_context_t::proc_table</a>, <a class="el" href="helix__config_8h_source.html#l00188">SCHEDULE_SLOTS</a>, <a class="el" href="kernel_8h_source.html#l00132">_proc_table_t::slack</a>, <a class="el" href="kernel_8h_source.html#l00171">proc_stats_t::slice_length</a>, <a class="el" href="kernel_8h_source.html#l00173">proc_stats_t::slice_slack</a>, <a class="el" href="kernel_8h_source.html#l00172">proc_stats_t::slice_used</a>, <a class="el" href="kernel_8h_source.html#l00125">_proc_table_t::state</a>, <a class="el" href="kernel_8h_source.html#l00166">proc_stats_t::state</a>, <a class="el" href="kernel_8h_source.html#l00128">_proc_table_t::time</a>, <a class="el" href="kernel_8h_source.html#l00131">_proc_table_t::time_alloc</a>, <a class="el" href="kernel_8h_source.html#l00135">_proc_table_t::yields</a>, and <a class="el" href="kernel_8h_source.html#l00176">proc_stats_t::yields</a>.</p>

</div>
</div>
<a class="anchor" id="ad231b0c7ac743c5863b33833aa1f38d1"></a><!-- doxytag: member="kernel.cc::kGetProcLocal" ref="ad231b0c7ac743c5863b33833aa1f38d1" args="(proc_local_t **p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="kernel_8cc.html#ad231b0c7ac743c5863b33833aa1f38d1">kGetProcLocal</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structproc__local__t.html">proc_local_t</a> **&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l01160">1160</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="kernel_8h.html#afa048712e8a413863369b93c18956d9b">current_proc</a>, <a class="el" href="api_8h_source.html#l00067">ESUCCESS</a>, and <a class="el" href="kernel_8h_source.html#l00143">_proc_table_t::proc_local</a>.</p>

</div>
</div>
<a class="anchor" id="a0e8f4c610eb9ed8186e3bbf84b22ccc2"></a><!-- doxytag: member="kernel.cc::kGetZombie" ref="a0e8f4c610eb9ed8186e3bbf84b22ccc2" args="(pid_t *pid, void **ret)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="kernel_8cc.html#a0e8f4c610eb9ed8186e3bbf84b22ccc2">kGetZombie</a> </td>
          <td>(</td>
          <td class="paramtype">pid_t *&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>ret</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Looks for a <a class="el" href="kernel_8h.html#a59775280f5f039f80ce5d63993e40484a5dfb36109b24f39d54d5c3f48f53def8" title="process has ended, but not cleaned up">ZOMBIE</a> process and destroys it. </p>
<p>Walks over all processes and cleans up the first <a class="el" href="kernel_8h.html#a59775280f5f039f80ce5d63993e40484a5dfb36109b24f39d54d5c3f48f53def8" title="process has ended, but not cleaned up">ZOMBIE</a> process it can find. Only the task daemon is allowed to call the function.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pid</td><td>the process that has been cleaned up, can be NULL </td></tr>
    <tr><td class="paramname">ret</td><td>pointer to store the return value of the process in, can be NULL </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, EAGAIN when no ZOMBIEs has been found, otherwise an appropriate errno </dd></dl>

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l01066">1066</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="kernel_8cc_source.html#l01017">kDestroyProcess()</a>, <a class="el" href="kernel_8h.html#a7b21412447a44f3594e1eac57cda11c3">kernel_context</a>, <a class="el" href="kernel_8cc_source.html#l00530">kGetPid()</a>, <a class="el" href="helix__config_8h_source.html#l00129">MAX_PROCESSES</a>, <a class="el" href="kernel_8h_source.html#l00159">kernel_context_t::proc_table</a>, <a class="el" href="kernel_8h_source.html#l00125">_proc_table_t::state</a>, and <a class="el" href="kernel_8h_source.html#l00054">ZOMBIE</a>.</p>

</div>
</div>
<a class="anchor" id="a7b094927158396795fa3d560753d02b6"></a><!-- doxytag: member="kernel.cc::kInitKernel" ref="a7b094927158396795fa3d560753d02b6" args="(kernel_boot_param_t *param)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="kernel_8cc.html#a7b094927158396795fa3d560753d02b6">kInitKernel</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structkernel__boot__param__t.html">kernel_boot_param_t</a> *&#160;</td>
          <td class="paramname"><em>param</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Basic initialization of the kernel. </p>
<p>It will initialize the heaps, kernel context, and process table.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">param</td><td>the same argument as the one <a class="el" href="group__app.html#ga3c04138a5bfe5d72780bb7e82a18e627" title="Entry point of your application.">main(int,char**)</a> got </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00260">260</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="info__app_8h.html#aeab68f17dc686a2f7dc72ab2b712e464">__attribute__</a>, <a class="el" href="kernel_8h_source.html#l00202">_fifomem</a>, <a class="el" href="kernel_8h.html#a69471a3ff8b448af4172f71d74bed723">_impure_ptr</a>, <a class="el" href="kernel_8cc_source.html#l00137">_kernel_impure_ptr</a>, <a class="el" href="kernel_8cc_source.html#l01584">ASSERT</a>, <a class="el" href="kernel_8cc_source.html#l00053">ASSIGN_CONST_PTR</a>, <a class="el" href="helix__config_8h_source.html#l00088">CACHELINE_ALIGN</a>, <a class="el" href="kernel_8h_source.html#l00111">_proc_table_t::context</a>, <a class="el" href="kernel_8h.html#a5517ad3b74016925c521c71812d11aea">current_context</a>, <a class="el" href="kernel_8h.html#afa048712e8a413863369b93c18956d9b">current_proc</a>, <a class="el" href="kernel_8cc_source.html#l00032">DEBUG</a>, <a class="el" href="kernel_8cc_source.html#l00033">DEBUG0</a>, <a class="el" href="kernel_8h_source.html#l00064">proc_context_t::donttouch</a>, <a class="el" href="api_8cc_source.html#l00283">DumpConfig()</a>, <a class="el" href="device_8h.html#a104a9ba7c2ecfa8d246e29a4a4f711da">GetDCacheSize()</a>, <a class="el" href="device_8h.html#a055cc88594a49f5142b9c870c16b45d9">GetFifoMemSize()</a>, <a class="el" href="device_8h.html#a67f1f67e3ff3283ca7e487c6aa3489af">GetICacheSize()</a>, <a class="el" href="device_8h.html#a9a3bbe67a3a5b97327af7305f27c4d85">GetLocalMemSize()</a>, <a class="el" href="device_8h.html#a11624488cf36fd92f24933fdadd2001a">GetMBFlags()</a>, <a class="el" href="device_8h_source.html#l00196">GetProcID()</a>, <a class="el" href="device_8h.html#a93e7f372ca638643179112c5975e02c1">GetSoCCores()</a>, <a class="el" href="newlibstubs_8cc_source.html#l00266">gettimeofday()</a>, <a class="el" href="kernel_8h_source.html#l00160">kernel_context_t::heap</a>, <a class="el" href="hooks_8h_source.html#l00016">HOOK_SCHEDULER</a>, <a class="el" href="hooks_8h_source.html#l00011">HOOKS</a>, <a class="el" href="device_8h.html#a82137fc09a1632b76b3c0347f4c2d436">InitDCache()</a>, <a class="el" href="device_8h.html#abf308c1fbd801fa34a582467dd4ea88c">InitICache()</a>, <a class="el" href="device_8h.html#ac7d3ef26cf6337259a14014836c0b189">InvalidateDCache()</a>, <a class="el" href="kernel_8h.html#a7b21412447a44f3594e1eac57cda11c3">kernel_context</a>, <a class="el" href="kernel_8cc_source.html#l00246">KERNEL_PRINT_PROGRESS</a>, <a class="el" href="kernel_8cc_source.html#l00247">KERNEL_PRINT_PROGRESS_END</a>, <a class="el" href="kernel_8h.html#a05299296d8d9b39b4fff86d127f226de">kernel_stack</a>, <a class="el" href="helix__config_8h_source.html#l00130">KERNEL_STACK_SIZE</a>, <a class="el" href="kernel_8cc_source.html#l01301">kGetHookTable()</a>, <a class="el" href="kernel_8cc_source.html#l00468">kPanic()</a>, <a class="el" href="kernel_8cc_source.html#l00054">kSetOSState</a>, <a class="el" href="timer_8cc_source.html#l00076">kStopTimer()</a>, <a class="el" href="trace_8cc_source.html#l00098">kTraceInit()</a>, <a class="el" href="malloc_8h_source.html#l00095">lcalloc</a>, <a class="el" href="malloc_8cc_source.html#l00679">malloc_dump()</a>, <a class="el" href="malloc_8cc_source.html#l00084">malloc_init()</a>, <a class="el" href="helix__config_8h_source.html#l00129">MAX_PROCESSES</a>, <a class="el" href="device_8h_source.html#l00044">MB_FLAG_DCACHE_WRITEBACK</a>, <a class="el" href="device_8h_source.html#l00050">MB_FLAG_SHARED_HEAP_CACHED</a>, <a class="el" href="kernel_8h_source.html#l00109">_proc_table_t::next_entry</a>, <a class="el" href="kernel_8h_source.html#l00047">NOPROC</a>, <a class="el" href="kernel_8h_source.html#l00183">kernel_boot_param_t::notify_booted</a>, <a class="el" href="kernel_8h_source.html#l00020">OS_INIT</a>, <a class="el" href="kernel_8h_source.html#l00021">OS_SINGLE</a>, <a class="el" href="kernel_8h_source.html#l00108">_proc_table_t::pid</a>, <a class="el" href="kernel_8h_source.html#l00110">_proc_table_t::prev_entry</a>, <a class="el" href="kernel_8h_source.html#l00262">printk</a>, <a class="el" href="helix__config_8h_source.html#l00131">PROC_HEAP</a>, <a class="el" href="kernel_8h_source.html#l00159">kernel_context_t::proc_table</a>, <a class="el" href="pthread_8cc_source.html#l00239">pthread_global_init()</a>, <a class="el" href="pthread_8cc_source.html#l00273">pthread_local_init()</a>, <a class="el" href="kernel_8cc_source.html#l00108">sch_t::pthread_sch</a>, <a class="el" href="helix__config_8h_source.html#l00167">RING_CONSISTENCY_SIZE</a>, <a class="el" href="kernel_8h_source.html#l00161">kernel_context_t::stack</a>, <a class="el" href="kernel_8h_source.html#l00125">_proc_table_t::state</a>, <a class="el" href="daemons_8h_source.html#l00122">TASK_DAEMON_FIFO_SIZE</a>, <a class="el" href="kernel_8cc_source.html#l00062">td_proc</a>, and <a class="el" href="kernel_8cc_source.html#l00035">TDEBUG</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l00159">kBoot()</a>.</p>

</div>
</div>
<a class="anchor" id="a5eda2256972d4e67ab045cb3ebfa4ecf"></a><!-- doxytag: member="kernel.cc::kInitSignalContext" ref="a5eda2256972d4e67ab045cb3ebfa4ecf" args="(proc_context_t *sig_context, proc_context_t *proc_context, char *triggered, int *havetriggered)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="kernel_8cc.html#a5eda2256972d4e67ab045cb3ebfa4ecf">kInitSignalContext</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structproc__context__t.html">proc_context_t</a> *&#160;</td>
          <td class="paramname"><em>sig_context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structproc__context__t.html">proc_context_t</a> *&#160;</td>
          <td class="paramname"><em>proc_context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>triggered</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>havetriggered</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l00545">kCreateProcess()</a>.</p>

</div>
</div>
<a class="anchor" id="a69abcace8557e0ed8d087fe69b218894"></a><!-- doxytag: member="kernel.cc::kJoinProcess" ref="a69abcace8557e0ed8d087fe69b218894" args="(pid_t pid, void **ret)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="kernel_8cc.html#a69abcace8557e0ed8d087fe69b218894">kJoinProcess</a> </td>
          <td>(</td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>ret</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Joins a <a class="el" href="kernel_8h.html#a59775280f5f039f80ce5d63993e40484a95e3221d7fa874623eb789940f39c932" title="process has ended, but waits until kJoinProcess() is called">JOINABLE</a> process. </p>
<p>Gets the return value of the process to join. Never blocks, so wrap in a loop when it is intended to wait until the process finishes. A <a class="el" href="kernel_8h.html#a59775280f5f039f80ce5d63993e40484a95e3221d7fa874623eb789940f39c932" title="process has ended, but waits until kJoinProcess() is called">JOINABLE</a> process will become a <a class="el" href="kernel_8h.html#a59775280f5f039f80ce5d63993e40484a5dfb36109b24f39d54d5c3f48f53def8" title="process has ended, but not cleaned up">ZOMBIE</a> when the join is successful. The function is not thread-safe.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pid</td><td>process to join </td></tr>
    <tr><td class="paramname">ret</td><td>pointer to store the return value of the process to join, can be NULL </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, EAGAIN when pid was not <a class="el" href="kernel_8h.html#a59775280f5f039f80ce5d63993e40484a95e3221d7fa874623eb789940f39c932" title="process has ended, but waits until kJoinProcess() is called">JOINABLE</a>, otherwise an appropiate errno </dd></dl>

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00982">982</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="api_8h_source.html#l00067">ESUCCESS</a>, <a class="el" href="kernel_8h_source.html#l00142">_proc_table_t::flags</a>, <a class="el" href="kernel_8h_source.html#l00053">JOINABLE</a>, <a class="el" href="kernel_8h.html#a7b21412447a44f3594e1eac57cda11c3">kernel_context</a>, <a class="el" href="helix__config_8h_source.html#l00129">MAX_PROCESSES</a>, <a class="el" href="kernel_8h_source.html#l00047">NOPROC</a>, <a class="el" href="trace_8cc_source.html#l00250">pid</a>, <a class="el" href="kernel__types_8h_source.html#l00040">PROC_FLAG_JOINABLE</a>, <a class="el" href="kernel_8h_source.html#l00159">kernel_context_t::proc_table</a>, <a class="el" href="kernel_8h_source.html#l00127">_proc_table_t::ret</a>, <a class="el" href="kernel_8h_source.html#l00125">_proc_table_t::state</a>, and <a class="el" href="kernel_8h_source.html#l00054">ZOMBIE</a>.</p>

</div>
</div>
<a class="anchor" id="abe73a763cb52339e69b69097e01118a7"></a><!-- doxytag: member="kernel.cc::kMaskSignal" ref="abe73a763cb52339e69b69097e01118a7" args="(int how, const sigset_t *set, sigset_t *oldset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="kernel_8cc.html#abe73a763cb52339e69b69097e01118a7">kMaskSignal</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>how</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="device_8h.html#a4588b12eae6951d9c976a65d6869b47f">const</a> <a class="el" href="signal_8h.html#a2ff4a1e7ebbf06b18271000ab5d1f095">sigset_t</a> *&#160;</td>
          <td class="paramname"><em>set</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="signal_8h.html#a2ff4a1e7ebbf06b18271000ab5d1f095">sigset_t</a> *&#160;</td>
          <td class="paramname"><em>oldset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l01416">1416</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="kernel_8h.html#afa048712e8a413863369b93c18956d9b">current_proc</a>, <a class="el" href="api_8h_source.html#l00067">ESUCCESS</a>, <a class="el" href="signal_8h_source.html#l00107">SIG_BLOCK</a>, <a class="el" href="signal_8h_source.html#l00126">SIG_BLOCKABLE</a>, <a class="el" href="kernel_8h_source.html#l00122">_proc_table_t::sig_mask</a>, <a class="el" href="signal_8h_source.html#l00106">SIG_SETMASK</a>, <a class="el" href="signal_8h_source.html#l00108">SIG_UNBLOCK</a>, <a class="el" href="signal_8h_source.html#l00104">sigandset()</a>, and <a class="el" href="signal_8h_source.html#l00103">sigorset()</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l01325">kClearSignal()</a>, and <a class="el" href="kernel_8cc_source.html#l00892">kSuspend()</a>.</p>

</div>
</div>
<a class="anchor" id="aa7eb958b6e300d661ca0ba06328505c8"></a><!-- doxytag: member="kernel.cc::kOpenChannel" ref="aa7eb958b6e300d661ca0ba06328505c8" args="(int channel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* <a class="el" href="kernel_8cc.html#aa7eb958b6e300d661ca0ba06328505c8">kOpenChannel</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the pointer corresponding to the given channel of the current process. </p>
<p>Blocks and <a class="el" href="kernel_8h.html#ab91f44b41a9180f07267ac1ead6dfdbd" title="Forcably ends the timeslice of the current process.">kYield()</a>s until the given channel is not NULL. Note that the specified channel is not checked for validity. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>channel to open </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>pointer corresponding to the channel, cannot be NULL </dd></dl>

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l01289">1289</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="kernel_8h_source.html#l00068">channel_t::channel</a>, <a class="el" href="kernel_8h_source.html#l00141">_proc_table_t::channels</a>, <a class="el" href="kernel_8h.html#afa048712e8a413863369b93c18956d9b">current_proc</a>, <a class="el" href="kernel_8cc_source.html#l00814">kYield()</a>, and <a class="el" href="kernel_8h_source.html#l00140">_proc_table_t::num_channels</a>.</p>

</div>
</div>
<a class="anchor" id="a721cb139f6072c92a9d3b678b2f00184"></a><!-- doxytag: member="kernel.cc::kPanic" ref="a721cb139f6072c92a9d3b678b2f00184" args="(const char *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="kernel_8cc.html#a721cb139f6072c92a9d3b678b2f00184">kPanic</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="device_8h.html#a4588b12eae6951d9c976a65d6869b47f">const</a> char *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Prints coredump and halts kernel, in case of emergency. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>message to be printed, which indicates the reason of the core dump. Can be NULL. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00468">468</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="kernel_8h_source.html#l00202">_fifomem</a>, <a class="el" href="uart_8cc_source.html#l00073">_puts()</a>, <a class="el" href="kernel_8cc_source.html#l00025">DBLED_PANIC</a>, <a class="el" href="kernel_8cc_source.html#l00029">DEBUG_ON</a>, <a class="el" href="device_8h.html#a4686cd354d0395599259d7c512391cad">DisableDCache()</a>, <a class="el" href="device_8h.html#a9f82096fc6ab61162aef822a86c9a7b6">DisableICache()</a>, <a class="el" href="device_8h.html#a561b9d014956c94fc705826f9d78710f">FlushDCache()</a>, <a class="el" href="device_8h_source.html#l00196">GetProcID()</a>, <a class="el" href="newlibstubs_8cc_source.html#l00266">gettimeofday()</a>, <a class="el" href="kernel_8h_source.html#l00160">kernel_context_t::heap</a>, <a class="el" href="kernel_8cc_source.html#l01123">kCoreDump()</a>, <a class="el" href="kernel_8h.html#a6957c5970a115b6423dd285e22b96aa0">kDisableInterrupt()</a>, <a class="el" href="kernel_8h.html#a7b21412447a44f3594e1eac57cda11c3">kernel_context</a>, <a class="el" href="kernel_8h.html#a07f2e6566f212b6272752685f3579ff4">kReset()</a>, <a class="el" href="kernel_8cc_source.html#l00054">kSetOSState</a>, <a class="el" href="timer_8cc_source.html#l00076">kStopTimer()</a>, <a class="el" href="malloc_8cc_source.html#l00679">malloc_dump()</a>, <a class="el" href="kernel_8h_source.html#l00019">OS_BOOT</a>, and <a class="el" href="kernel_8h_source.html#l00262">printk</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l01603">kCheckStackOverflow()</a>, <a class="el" href="kernel_8cc_source.html#l00944">kEndProcess()</a>, <a class="el" href="kernel_8cc_source.html#l00260">kInitKernel()</a>, and <a class="el" href="kernel_8cc_source.html#l00446">kStartTaskDaemon()</a>.</p>

</div>
</div>
<a class="anchor" id="a623caf4cba9f8fe345d3412fe457908a"></a><!-- doxytag: member="kernel.cc::kResetSignalContext" ref="a623caf4cba9f8fe345d3412fe457908a" args="(proc_context_t *sig_context)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="kernel_8cc.html#a623caf4cba9f8fe345d3412fe457908a">kResetSignalContext</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structproc__context__t.html">proc_context_t</a> *&#160;</td>
          <td class="paramname"><em>sig_context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l01622">kScheduleProcess()</a>.</p>

</div>
</div>
<a class="anchor" id="ab49fec041d944bc5bb7038104cd65709"></a><!-- doxytag: member="kernel.cc::kScheduleNext" ref="ab49fec041d944bc5bb7038104cd65709" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="kernel_8cc.html#ab49fec041d944bc5bb7038104cd65709">kScheduleNext</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Determines the next process to schedule. </p>
<p>This function is called by entry.S after an interrupt. </p>

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l01679">1679</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="kernel_8cc_source.html#l01584">ASSERT</a>, <a class="el" href="kernel_8h.html#afa048712e8a413863369b93c18956d9b">current_proc</a>, <a class="el" href="kernel_8cc_source.html#l00024">DBLED_SCHEDULE</a>, <a class="el" href="kernel_8cc_source.html#l00030">DEBUG_OFF</a>, <a class="el" href="kernel_8cc_source.html#l00029">DEBUG_ON</a>, <a class="el" href="kernel_8cc_source.html#l00120">DID_WORK_NO</a>, <a class="el" href="kernel_8cc_source.html#l00122">DID_WORK_YES</a>, <a class="el" href="kernel_8cc_source.html#l00110">sch_t::have_work</a>, <a class="el" href="kernel_8cc_source.html#l00109">sch_t::just_did_work</a>, <a class="el" href="kernel_8cc_source.html#l01588">kCheckFreeStack()</a>, <a class="el" href="kernel_8cc_source.html#l01603">kCheckStackOverflow()</a>, <a class="el" href="kernel_8cc_source.html#l01622">kScheduleProcess()</a>, <a class="el" href="trace_8cc_source.html#l00402">kTraceClose()</a>, <a class="el" href="trace_8cc_source.html#l00327">kTraceScheduleYield()</a>, <a class="el" href="api_8h_source.html#l00007">likely</a>, <a class="el" href="kernel_8h_source.html#l00109">_proc_table_t::next_entry</a>, <a class="el" href="kernel_8h_source.html#l00110">_proc_table_t::prev_entry</a>, <a class="el" href="kernel_8cc_source.html#l00114">sch_t::remaining_slots</a>, <a class="el" href="kernel_8h_source.html#l00049">RUNNING</a>, <a class="el" href="helix__config_8h_source.html#l00188">SCHEDULE_SLOTS</a>, <a class="el" href="kernel_8h_source.html#l00119">_proc_table_t::sig_havetriggered</a>, <a class="el" href="kernel_8h_source.html#l00114">_proc_table_t::sig_ret</a>, <a class="el" href="kernel_8cc_source.html#l00113">sch_t::skip_taskdaemon</a>, <a class="el" href="kernel_8h_source.html#l00132">_proc_table_t::slack</a>, <a class="el" href="kernel_8h_source.html#l00125">_proc_table_t::state</a>, <a class="el" href="kernel_8h_source.html#l00051">SUSPENDED</a>, <a class="el" href="kernel_8cc_source.html#l00062">td_proc</a>, <a class="el" href="kernel_8h_source.html#l00129">_proc_table_t::time_yielded</a>, <a class="el" href="kernel_8cc_source.html#l01555">TRACE</a>, and <a class="el" href="api_8h_source.html#l00008">unlikely</a>.</p>

</div>
</div>
<a class="anchor" id="a0f8a6392225c4e8fe2d9e6a6eee7811d"></a><!-- doxytag: member="kernel.cc::kScheduleProcess" ref="a0f8a6392225c4e8fe2d9e6a6eee7811d" args="(proc_table_t *next, bool continue_slice)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="kernel_8cc.html#a0f8a6392225c4e8fe2d9e6a6eee7811d">kScheduleProcess</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="kernel_8h.html#a151ec501a2523f8a434c7b259d96151b">proc_table_t</a> *&#160;</td>
          <td class="paramname"><em>next</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>continue_slice</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l01622">1622</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="kernel_8h.html#a69471a3ff8b448af4172f71d74bed723">_impure_ptr</a>, <a class="el" href="kernel_8cc_source.html#l01584">ASSERT</a>, <a class="el" href="kernel_8cc_source.html#l00053">ASSIGN_CONST_PTR</a>, <a class="el" href="kernel_8h_source.html#l00111">_proc_table_t::context</a>, <a class="el" href="kernel_8h.html#a5517ad3b74016925c521c71812d11aea">current_context</a>, <a class="el" href="kernel_8h.html#afa048712e8a413863369b93c18956d9b">current_proc</a>, <a class="el" href="kernel_8cc_source.html#l00121">DID_WORK_MAYBE</a>, <a class="el" href="kernel_8h_source.html#l00144">_proc_table_t::impure_data</a>, <a class="el" href="kernel_8cc_source.html#l00109">sch_t::just_did_work</a>, <a class="el" href="io_8h_source.html#l00044">kClearIrq</a>, <a class="el" href="kernel_8cc.html#a623caf4cba9f8fe345d3412fe457908a">kResetSignalContext()</a>, <a class="el" href="timer_8cc_source.html#l00022">kSetTimer()</a>, <a class="el" href="trace_8cc_source.html#l00402">kTraceClose()</a>, <a class="el" href="trace_8cc_source.html#l00304">kTraceSchedule()</a>, <a class="el" href="kernel_8h_source.html#l00108">_proc_table_t::pid</a>, <a class="el" href="kernel_8h_source.html#l00143">_proc_table_t::proc_local</a>, <a class="el" href="kernel_8h.html#a1352c7443011d705fb6866ce18de5766">proc_local</a>, <a class="el" href="kernel_8cc_source.html#l00114">sch_t::remaining_slots</a>, <a class="el" href="helix__config_8h_source.html#l00188">SCHEDULE_SLOTS</a>, <a class="el" href="kernel_8h_source.html#l00113">_proc_table_t::sig_context</a>, <a class="el" href="kernel_8h_source.html#l00119">_proc_table_t::sig_havetriggered</a>, <a class="el" href="kernel_8h_source.html#l00114">_proc_table_t::sig_ret</a>, <a class="el" href="kernel_8h_source.html#l00120">_proc_table_t::sig_trig_handling</a>, <a class="el" href="kernel_8h_source.html#l00154">SIG_TRIG_HANDLING_ABRT</a>, <a class="el" href="kernel_8h_source.html#l00152">SIG_TRIG_HANDLING_CONT</a>, <a class="el" href="kernel_8h_source.html#l00153">SIG_TRIG_HANDLING_HAND</a>, <a class="el" href="kernel_8h_source.html#l00148">_proc_table_t::stack</a>, <a class="el" href="kernel_8h.html#a4291870e45a9a554746c5d7dc5ba43c2">thread_local</a>, <a class="el" href="kernel_8h_source.html#l00128">_proc_table_t::time</a>, <a class="el" href="kernel_8h_source.html#l00131">_proc_table_t::time_alloc</a>, <a class="el" href="kernel_8h_source.html#l00129">_proc_table_t::time_yielded</a>, <a class="el" href="trace_8cc_source.html#l00251">timeslice</a>, <a class="el" href="kernel_8cc_source.html#l01555">TRACE</a>, <a class="el" href="api_8h_source.html#l00008">unlikely</a>, and <a class="el" href="kernel_8h_source.html#l00101">proc_local_t::user</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l01679">kScheduleNext()</a>.</p>

</div>
</div>
<a class="anchor" id="a3d153b50a65f33fd6307427861e74d88"></a><!-- doxytag: member="kernel.cc::kSendSignal" ref="a3d153b50a65f33fd6307427861e74d88" args="(pid_t pid, int sig, union sigval *sv)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="kernel_8cc.html#a3d153b50a65f33fd6307427861e74d88">kSendSignal</a> </td>
          <td>(</td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">union <a class="el" href="unionsigval.html">sigval</a> *&#160;</td>
          <td class="paramname"><em>sv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Send signal to other process. </p>
<p>A signal will only be triggered (and thus handled) once.</p>
<p>When the signal was already triggered, the previous sv will be overwritten. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pid</td><td>the process to send to </td></tr>
    <tr><td class="paramname">sig</td><td>the signal number to send </td></tr>
    <tr><td class="paramname">sv</td><td>value to pass to the handler by <a class="el" href="structsiginfo__t.html">siginfo_t</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>ESRCH when the process does not exist (anymore), ENOENT when the signal was disabled, EAGAIN when masked, 0 on accept, otherwise another errno </dd></dl>

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l01365">1365</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="kernel_8cc_source.html#l00122">DID_WORK_YES</a>, <a class="el" href="api_8h_source.html#l00067">ESUCCESS</a>, <a class="el" href="kernel_8cc_source.html#l00109">sch_t::just_did_work</a>, <a class="el" href="kernel_8h.html#a7b21412447a44f3594e1eac57cda11c3">kernel_context</a>, <a class="el" href="device_8h_source.html#l00312">laset</a>, <a class="el" href="helix__config_8h_source.html#l00129">MAX_PROCESSES</a>, <a class="el" href="signal_8h_source.html#l00038">NSIG</a>, <a class="el" href="trace_8cc_source.html#l00250">pid</a>, <a class="el" href="kernel_8h_source.html#l00159">kernel_context_t::proc_table</a>, <a class="el" href="kernel_8h_source.html#l00049">RUNNING</a>, <a class="el" href="kernel_8h_source.html#l00115">_proc_table_t::sig_action</a>, <a class="el" href="kernel_8h_source.html#l00116">_proc_table_t::sig_enabled</a>, <a class="el" href="kernel_8h_source.html#l00122">_proc_table_t::sig_mask</a>, <a class="el" href="kernel_8h_source.html#l00123">_proc_table_t::sig_sticky</a>, <a class="el" href="signal_8h_source.html#l00128">SIG_STICKY</a>, <a class="el" href="kernel_8h_source.html#l00120">_proc_table_t::sig_trig_handling</a>, <a class="el" href="kernel_8h_source.html#l00152">SIG_TRIG_HANDLING_CONT</a>, <a class="el" href="kernel_8h_source.html#l00151">SIG_TRIG_HANDLING_SEND</a>, <a class="el" href="kernel_8h_source.html#l00117">_proc_table_t::sig_triggered</a>, <a class="el" href="signal_8h_source.html#l00024">SIGCONT</a>, <a class="el" href="signal_8h_source.html#l00101">sigismember()</a>, <a class="el" href="kernel_8h_source.html#l00125">_proc_table_t::state</a>, <a class="el" href="kernel_8h_source.html#l00051">SUSPENDED</a>, and <a class="el" href="signal_8h_source.html#l00082">sigaction::sv</a>.</p>

</div>
</div>
<a class="anchor" id="a7f1df01f20303d8868e74f0989e719a8"></a><!-- doxytag: member="kernel.cc::kSetChannelLabel" ref="a7f1df01f20303d8868e74f0989e719a8" args="(pid_t pid, int chan_id, int label)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="kernel_8cc.html#a7f1df01f20303d8868e74f0989e719a8">kSetChannelLabel</a> </td>
          <td>(</td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>chan_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>label</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets a new label to an existing channel. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pid</td><td>process that has the channel to change the label of </td></tr>
    <tr><td class="paramname">chan_id</td><td>the channel to change the label of </td></tr>
    <tr><td class="paramname">label</td><td>the new label, where 0 means 'no label' </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, otherwise an errno </dd></dl>

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l01256">1256</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="kernel_8h_source.html#l00141">_proc_table_t::channels</a>, <a class="el" href="api_8h_source.html#l00067">ESUCCESS</a>, <a class="el" href="kernel_8h.html#a7b21412447a44f3594e1eac57cda11c3">kernel_context</a>, <a class="el" href="kernel_8h_source.html#l00069">channel_t::label</a>, <a class="el" href="helix__config_8h_source.html#l00129">MAX_PROCESSES</a>, <a class="el" href="kernel_8h_source.html#l00140">_proc_table_t::num_channels</a>, <a class="el" href="trace_8cc_source.html#l00250">pid</a>, and <a class="el" href="kernel_8h_source.html#l00159">kernel_context_t::proc_table</a>.</p>

</div>
</div>
<a class="anchor" id="a300b853030c48858f0eced0d188612c8"></a><!-- doxytag: member="kernel.cc::kSetProcessFlags" ref="a300b853030c48858f0eced0d188612c8" args="(pid_t pid, int flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="kernel_8cc.html#a300b853030c48858f0eced0d188612c8">kSetProcessFlags</a> </td>
          <td>(</td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets specific process flags. </p>
<p>It is not safe to set the flags and join/destroy the process concurrent.</p>
<p>So, do process management of a single process in a safe manner. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, otherwise an errno </dd></dl>

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00662">662</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="api_8h_source.html#l00067">ESUCCESS</a>, <a class="el" href="kernel_8h_source.html#l00142">_proc_table_t::flags</a>, <a class="el" href="kernel_8h_source.html#l00053">JOINABLE</a>, <a class="el" href="kernel_8h.html#a7b21412447a44f3594e1eac57cda11c3">kernel_context</a>, <a class="el" href="helix__config_8h_source.html#l00129">MAX_PROCESSES</a>, <a class="el" href="kernel_8h_source.html#l00047">NOPROC</a>, <a class="el" href="trace_8cc_source.html#l00250">pid</a>, <a class="el" href="kernel__types_8h_source.html#l00041">PROC_FLAG_DETACHED</a>, <a class="el" href="kernel_8h_source.html#l00159">kernel_context_t::proc_table</a>, <a class="el" href="kernel_8h_source.html#l00125">_proc_table_t::state</a>, and <a class="el" href="kernel_8h_source.html#l00054">ZOMBIE</a>.</p>

</div>
</div>
<a class="anchor" id="a0c8b0ba864ea12f0559c61874036795f"></a><!-- doxytag: member="kernel.cc::kSetProcessTimeslice" ref="a0c8b0ba864ea12f0559c61874036795f" args="(pid_t pid, timems_t slicelength)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="kernel_8cc.html#a0c8b0ba864ea12f0559c61874036795f">kSetProcessTimeslice</a> </td>
          <td>(</td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="kernel__types_8h.html#aab831218703b6d40fa14bd6ec1d2fcac">timems_t</a>&#160;</td>
          <td class="paramname"><em>slicelength</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Changes the length of the timeslice of an existing process. </p>
<p>When pid is the current process, the new time is effective after the next context switch </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pid</td><td>the process to change the timeslice of, which must exist </td></tr>
    <tr><td class="paramname">slicelength</td><td>the length of the allocated time slice in ms </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, otherwise an errno </dd></dl>

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00732">732</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="api_8h_source.html#l00067">ESUCCESS</a>, <a class="el" href="device_8h.html#a849ce054a843c28398da5b40f0918e77">GetClockFreq()</a>, <a class="el" href="kernel_8h.html#a7b21412447a44f3594e1eac57cda11c3">kernel_context</a>, <a class="el" href="trace_8cc_source.html#l00258">kTraceProcChange()</a>, <a class="el" href="kernel_8h_source.html#l00126">_proc_table_t::main</a>, <a class="el" href="helix__config_8h_source.html#l00129">MAX_PROCESSES</a>, <a class="el" href="kernel_8h_source.html#l00047">NOPROC</a>, <a class="el" href="trace_8cc_source.html#l00250">pid</a>, <a class="el" href="kernel_8h_source.html#l00159">kernel_context_t::proc_table</a>, <a class="el" href="kernel_8h_source.html#l00125">_proc_table_t::state</a>, <a class="el" href="kernel_8h_source.html#l00128">_proc_table_t::time</a>, and <a class="el" href="kernel_8cc_source.html#l01555">TRACE</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l00545">kCreateProcess()</a>.</p>

</div>
</div>
<a class="anchor" id="ad4c9248a1cdf947f15fff528dea46898"></a><!-- doxytag: member="kernel.cc::kSetSignalHandler" ref="ad4c9248a1cdf947f15fff528dea46898" args="(int signum, const struct sigaction *act)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="kernel_8cc.html#ad4c9248a1cdf947f15fff528dea46898">kSetSignalHandler</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>signum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="device_8h.html#a4588b12eae6951d9c976a65d6869b47f">const</a> struct <a class="el" href="structsigaction.html">sigaction</a> *&#160;</td>
          <td class="paramname"><em>act</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l01305">1305</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="kernel_8h.html#afa048712e8a413863369b93c18956d9b">current_proc</a>, <a class="el" href="api_8h_source.html#l00067">ESUCCESS</a>, <a class="el" href="signal_8h_source.html#l00038">NSIG</a>, <a class="el" href="signal_8h_source.html#l00079">sigaction::sa_handler</a>, <a class="el" href="kernel_8h_source.html#l00115">_proc_table_t::sig_action</a>, <a class="el" href="kernel_8h_source.html#l00116">_proc_table_t::sig_enabled</a>, <a class="el" href="signal_8h_source.html#l00127">SIG_HANDLEABLE</a>, <a class="el" href="kernel_8h_source.html#l00117">_proc_table_t::sig_triggered</a>, <a class="el" href="signal_8h_source.html#l00099">sigaddset()</a>, <a class="el" href="signal_8h_source.html#l00024">SIGCONT</a>, and <a class="el" href="signal_8h_source.html#l00100">sigdelset()</a>.</p>

</div>
</div>
<a class="anchor" id="a6b46db337054df057344ae05e29b43db"></a><!-- doxytag: member="kernel.cc::kShutdown" ref="a6b46db337054df057344ae05e29b43db" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="kernel_8cc.html#a6b46db337054df057344ae05e29b43db">kShutdown</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Shuts down kernel and return to bootloader. </p>
<p>Not gracefull, no process termination, just reboot immediately. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>EPERM when another process than the task daemon tries to shutdown, otherwise never </dd></dl>

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00509">509</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="device_8h.html#a4686cd354d0395599259d7c512391cad">DisableDCache()</a>, <a class="el" href="device_8h.html#a9f82096fc6ab61162aef822a86c9a7b6">DisableICache()</a>, <a class="el" href="kernel_8h.html#a6957c5970a115b6423dd285e22b96aa0">kDisableInterrupt()</a>, <a class="el" href="kernel_8cc_source.html#l00530">kGetPid()</a>, <a class="el" href="kernel_8h.html#a07f2e6566f212b6272752685f3579ff4">kReset()</a>, and <a class="el" href="kernel_8cc_source.html#l00035">TDEBUG</a>.</p>

</div>
</div>
<a class="anchor" id="a82ebacc8496cf56e9df915b1103222f5"></a><!-- doxytag: member="kernel.cc::kStartProcess" ref="a82ebacc8496cf56e9df915b1103222f5" args="(pid_t pid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="kernel_8cc.html#a82ebacc8496cf56e9df915b1103222f5">kStartProcess</a> </td>
          <td>(</td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>pid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Starts a process that has been created using <a class="el" href="kernel_8h.html#a71c6699c46b8ad0a1de3766cdf988ffe" title="Creates a new process.">kCreateProcess()</a>. </p>
<p>Only the task daemon is allowed to start processes. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pid</td><td>the process to start </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, otherwise an errno </dd></dl>

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00779">779</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="kernel_8h.html#afa048712e8a413863369b93c18956d9b">current_proc</a>, <a class="el" href="kernel_8cc_source.html#l00026">DBLED_NEWPROC</a>, <a class="el" href="kernel_8cc_source.html#l00030">DEBUG_OFF</a>, <a class="el" href="kernel_8cc_source.html#l00122">DID_WORK_YES</a>, <a class="el" href="api_8h_source.html#l00067">ESUCCESS</a>, <a class="el" href="kernel_8cc_source.html#l00109">sch_t::just_did_work</a>, <a class="el" href="kernel_8h.html#a7b21412447a44f3594e1eac57cda11c3">kernel_context</a>, <a class="el" href="kernel_8cc_source.html#l00530">kGetPid()</a>, <a class="el" href="helix__config_8h_source.html#l00129">MAX_PROCESSES</a>, <a class="el" href="kernel_8h_source.html#l00048">NEW</a>, <a class="el" href="kernel_8h_source.html#l00109">_proc_table_t::next_entry</a>, <a class="el" href="trace_8cc_source.html#l00250">pid</a>, <a class="el" href="kernel_8h_source.html#l00110">_proc_table_t::prev_entry</a>, <a class="el" href="kernel_8h_source.html#l00159">kernel_context_t::proc_table</a>, <a class="el" href="kernel_8h_source.html#l00049">RUNNING</a>, <a class="el" href="kernel_8h_source.html#l00125">_proc_table_t::state</a>, and <a class="el" href="kernel_8cc_source.html#l00062">td_proc</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l00446">kStartTaskDaemon()</a>.</p>

</div>
</div>
<a class="anchor" id="a6e5acd9d66f11151cbc5a843583cf9e7"></a><!-- doxytag: member="kernel.cc::kStartScheduling" ref="a6e5acd9d66f11151cbc5a843583cf9e7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="kernel_8cc.html#a6e5acd9d66f11151cbc5a843583cf9e7">kStartScheduling</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes the scheduler and start scheduling. </p>
<p>Never returns. </p>

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l01561">1561</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="kernel_8cc_source.html#l00033">DEBUG0</a>, <a class="el" href="kernel_8cc_source.html#l00122">DID_WORK_YES</a>, <a class="el" href="kernel_8cc_source.html#l00110">sch_t::have_work</a>, <a class="el" href="kernel_8cc_source.html#l00109">sch_t::just_did_work</a>, <a class="el" href="kernel_8h.html#a39515156d59fe71794032535eb367786">kEnableInterrupt()</a>, <a class="el" href="io_8h_source.html#l00043">kInitIrq</a>, <a class="el" href="kernel_8cc_source.html#l00054">kSetOSState</a>, <a class="el" href="timer_8cc_source.html#l00022">kSetTimer()</a>, <a class="el" href="kernel_8h_source.html#l00022">OS_MULTI</a>, <a class="el" href="kernel_8cc_source.html#l00114">sch_t::remaining_slots</a>, <a class="el" href="helix__config_8h_source.html#l00188">SCHEDULE_SLOTS</a>, <a class="el" href="kernel_8cc_source.html#l00113">sch_t::skip_taskdaemon</a>, <a class="el" href="kernel_8cc_source.html#l00062">td_proc</a>, and <a class="el" href="kernel_8cc_source.html#l00111">sch_t::was_idle</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l00159">kBoot()</a>.</p>

</div>
</div>
<a class="anchor" id="ac684d34fd7c17e04891439d2d179c78e"></a><!-- doxytag: member="kernel.cc::kStartTaskDaemon" ref="ac684d34fd7c17e04891439d2d179c78e" args="(kernel_boot_param_t *param)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="kernel_8cc.html#ac684d34fd7c17e04891439d2d179c78e">kStartTaskDaemon</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structkernel__boot__param__t.html">kernel_boot_param_t</a> *&#160;</td>
          <td class="paramname"><em>param</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Starts the task daemon. </p>
<p>This is essentially a wrapper around <a class="el" href="kernel_8h.html#a71c6699c46b8ad0a1de3766cdf988ffe" title="Creates a new process.">kCreateProcess()</a> and <a class="el" href="kernel_8h.html#a042fff78c292d858b075822a528edaf9" title="Starts a process that has been created using kCreateProcess().">kStartProcess()</a>. It will call <a class="el" href="group__daemons.html#ga34c09be46a7e6c258ddc19a38b424d8d" title="Initializes the task daemon.">InitTaskDaemon()</a>, which should be implemented by the application.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">param</td><td>as received by <a class="el" href="group__app.html#ga3c04138a5bfe5d72780bb7e82a18e627" title="Entry point of your application.">main(int,char**)</a> </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00446">446</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="kernel_8cc_source.html#l00033">DEBUG0</a>, <a class="el" href="DefaultTaskDaemon_8cc_source.html#l00300">InitTaskDaemon()</a>, <a class="el" href="kernel_8cc_source.html#l00545">kCreateProcess()</a>, <a class="el" href="kernel_8cc_source.html#l00468">kPanic()</a>, <a class="el" href="kernel_8cc_source.html#l00779">kStartProcess()</a>, <a class="el" href="malloc_8cc_source.html#l00123">malloc()</a>, <a class="el" href="trace_8cc_source.html#l00250">pid</a>, <a class="el" href="daemons_8h_source.html#l00124">TASK_DAEMON_STACK</a>, and <a class="el" href="daemons_8h_source.html#l00123">TASK_DAEMON_TIMESLICE</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l00159">kBoot()</a>.</p>

</div>
</div>
<a class="anchor" id="a3eb42bba3fa00f76d1a1b1ac584cfea7"></a><!-- doxytag: member="kernel.cc::kSuspend" ref="a3eb42bba3fa00f76d1a1b1ac584cfea7" args="(const sigset_t *mask, const sigset_t *wait_sticky)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="kernel_8cc.html#a3eb42bba3fa00f76d1a1b1ac584cfea7">kSuspend</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="device_8h.html#a4588b12eae6951d9c976a65d6869b47f">const</a> <a class="el" href="signal_8h.html#a2ff4a1e7ebbf06b18271000ab5d1f095">sigset_t</a> *&#160;</td>
          <td class="paramname"><em>mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="device_8h.html#a4588b12eae6951d9c976a65d6869b47f">const</a> <a class="el" href="signal_8h.html#a2ff4a1e7ebbf06b18271000ab5d1f095">sigset_t</a> *&#160;</td>
          <td class="paramname"><em>wait_sticky</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Suspends current process until one of the non-masked signals occur. </p>
<p>Cannot be called from within a signal handler </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">mask</td><td>ignore all signals specified in this set (NULL=no mask) </td></tr>
    <tr><td class="paramname">wait_sticky</td><td>keep suspended until one of the wait_sticky sticky signals were triggered (NULL or none set=don't care; continue on any signal) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00892">892</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="kernel_8cc_source.html#l01584">ASSERT</a>, <a class="el" href="kernel_8h.html#afa048712e8a413863369b93c18956d9b">current_proc</a>, <a class="el" href="api_8h_source.html#l00067">ESUCCESS</a>, <a class="el" href="kernel_8cc_source.html#l00057">kIsInSigHandler</a>, <a class="el" href="kernel_8cc_source.html#l01416">kMaskSignal()</a>, <a class="el" href="kernel_8cc_source.html#l00814">kYield()</a>, <a class="el" href="device_8h_source.html#l00314">launset</a>, <a class="el" href="kernel_8h_source.html#l00049">RUNNING</a>, <a class="el" href="signal_8h_source.html#l00107">SIG_BLOCK</a>, <a class="el" href="signal_8h_source.html#l00106">SIG_SETMASK</a>, <a class="el" href="kernel_8h_source.html#l00123">_proc_table_t::sig_sticky</a>, <a class="el" href="signal_8h_source.html#l00128">SIG_STICKY</a>, <a class="el" href="kernel_8h_source.html#l00125">_proc_table_t::state</a>, and <a class="el" href="kernel_8h_source.html#l00051">SUSPENDED</a>.</p>

</div>
</div>
<a class="anchor" id="a4a0a27df3e770e1c8888fae620cf0087"></a><!-- doxytag: member="kernel.cc::kSyncEventHit" ref="a4a0a27df3e770e1c8888fae620cf0087" args="(pid_t pid, void *event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="kernel_8cc.html#a4a0a27df3e770e1c8888fae620cf0087">kSyncEventHit</a> </td>
          <td>(</td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>event</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Marks specified event as hit. </p>
<p>Increments hit counter corresponding to specified event.</p>
<p>Should only be called from the task daemon. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pid</td><td>the process to sent the hit to </td></tr>
    <tr><td class="paramname">event</td><td>the event that has been hit </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>ENOMEM when out of event records, 0 on success, otherwise an errno </dd></dl>

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l01483">1483</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="kernel_8h_source.html#l00074">sync_event_entry_t::event</a>, <a class="el" href="kernel_8h_source.html#l00075">sync_event_entry_t::hit</a>, <a class="el" href="kernel_8h.html#a7b21412447a44f3594e1eac57cda11c3">kernel_context</a>, <a class="el" href="kernel_8cc_source.html#l01449">kFindEventEntry()</a>, <a class="el" href="kernel_8cc_source.html#l00530">kGetPid()</a>, <a class="el" href="helix__config_8h_source.html#l00129">MAX_PROCESSES</a>, <a class="el" href="trace_8cc_source.html#l00250">pid</a>, <a class="el" href="kernel_8h_source.html#l00159">kernel_context_t::proc_table</a>, <a class="el" href="kernel_8h_source.html#l00049">RUNNING</a>, <a class="el" href="kernel_8h_source.html#l00125">_proc_table_t::state</a>, and <a class="el" href="kernel_8h_source.html#l00051">SUSPENDED</a>.</p>

</div>
</div>
<a class="anchor" id="a9311ebfad1bae5efed571b7103e33df4"></a><!-- doxytag: member="kernel.cc::kSyncEventWait" ref="a9311ebfad1bae5efed571b7103e33df4" args="(void *event, int count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="kernel_8cc.html#a9311ebfad1bae5efed571b7103e33df4">kSyncEventWait</a> </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Blocks until a given event has occured. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">event</td><td>the event to wait for </td></tr>
    <tr><td class="paramname">count</td><td>the number of hits to wait for </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>ENOMEM when out of empty event records, 0 on success, otherwise an errno </dd></dl>

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l01524">1524</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="kernel_8h.html#afa048712e8a413863369b93c18956d9b">current_proc</a>, <a class="el" href="kernel_8h_source.html#l00074">sync_event_entry_t::event</a>, <a class="el" href="kernel_8h_source.html#l00075">sync_event_entry_t::hit</a>, <a class="el" href="kernel_8cc_source.html#l01449">kFindEventEntry()</a>, <a class="el" href="kernel_8cc_source.html#l00814">kYield()</a>, and <a class="el" href="kernel_8h_source.html#l00076">sync_event_entry_t::wait</a>.</p>

</div>
</div>
<a class="anchor" id="a505234ecb7b50794d55df4e59f5326df"></a><!-- doxytag: member="kernel.cc::kYield" ref="a505234ecb7b50794d55df4e59f5326df" args="(bool havework)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="kernel_8cc.html#a505234ecb7b50794d55df4e59f5326df">kYield</a> </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>havework</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Forcably ends the timeslice of the current process. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000004">Todo:</a></b></dt><dd>fix, several race conditions exist! </dd></dl>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">havework</td><td>set to false when no work has been done and none is expected soon; this prevents rapid rescheduling </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, otherwise an errno </dd></dl>

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00814">814</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="kernel_8cc_source.html#l01584">ASSERT</a>, <a class="el" href="helix__config_8h_source.html#l00192">CONTEXT_SWITCH_CYCLE_PANELTY</a>, <a class="el" href="kernel_8h.html#afa048712e8a413863369b93c18956d9b">current_proc</a>, <a class="el" href="kernel_8cc_source.html#l00121">DID_WORK_MAYBE</a>, <a class="el" href="kernel_8cc_source.html#l00120">DID_WORK_NO</a>, <a class="el" href="kernel_8cc_source.html#l00122">DID_WORK_YES</a>, <a class="el" href="api_8h_source.html#l00067">ESUCCESS</a>, <a class="el" href="kernel_8cc_source.html#l00110">sch_t::have_work</a>, <a class="el" href="pthread_8h_source.html#l00095">pthread_sch_t::idle</a>, <a class="el" href="kernel_8cc_source.html#l00109">sch_t::just_did_work</a>, <a class="el" href="kernel_8cc_source.html#l00530">kGetPid()</a>, <a class="el" href="timer_8cc_source.html#l00068">kGetTimer()</a>, <a class="el" href="timer_8cc_source.html#l00022">kSetTimer()</a>, <a class="el" href="trace_8cc_source.html#l00283">kTraceYield()</a>, <a class="el" href="device_8h_source.html#l00348">laend()</a>, <a class="el" href="device_8h_source.html#l00339">lastart()</a>, <a class="el" href="mc_8h_source.html#l00221">mc_entry_wou</a>, <a class="el" href="mc_8h_source.html#l00222">mc_exit_wou</a>, <a class="el" href="kernel_8cc_source.html#l00108">sch_t::pthread_sch</a>, <a class="el" href="kernel_8cc_source.html#l00114">sch_t::remaining_slots</a>, <a class="el" href="helix__config_8h_source.html#l00188">SCHEDULE_SLOTS</a>, <a class="el" href="kernel_8h_source.html#l00132">_proc_table_t::slack</a>, <a class="el" href="kernel_8h_source.html#l00129">_proc_table_t::time_yielded</a>, <a class="el" href="kernel_8cc_source.html#l01555">TRACE</a>, <a class="el" href="kernel_8cc_source.html#l00111">sch_t::was_idle</a>, and <a class="el" href="kernel_8h_source.html#l00135">_proc_table_t::yields</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l00944">kEndProcess()</a>, <a class="el" href="kernel_8cc_source.html#l01289">kOpenChannel()</a>, <a class="el" href="kernel_8cc_source.html#l00892">kSuspend()</a>, and <a class="el" href="kernel_8cc_source.html#l01524">kSyncEventWait()</a>.</p>

</div>
</div>
<a class="anchor" id="ab96af073ecdd6f0a8f2bc25176901778"></a><!-- doxytag: member="kernel.cc::ProcessEntry" ref="ab96af073ecdd6f0a8f2bc25176901778" args="(void *(*main)(void *), void *arg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* <a class="el" href="kernel_8cc.html#ab96af073ecdd6f0a8f2bc25176901778">ProcessEntry</a> </td>
          <td>(</td>
          <td class="paramtype">void *(*)(void *)&#160;</td>
          <td class="paramname"><em>main</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Entry point of a process. </p>
<p>Initializes some stuff and calls the entry point as specified using <a class="el" href="kernel_8h.html#a71c6699c46b8ad0a1de3766cdf988ffe" title="Creates a new process.">kCreateProcess()</a>. </p>

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00640">640</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>References <a class="el" href="kernel_8cc_source.html#l00032">DEBUG</a>, <a class="el" href="ShutdownDaemon_8cc_source.html#l00034">do_gracefull_exit_funs()</a>, <a class="el" href="kernel_8cc_source.html#l00530">kGetPid()</a>, <a class="el" href="trace_8cc_source.html#l00253">main</a>, <a class="el" href="pthread_8cc_source.html#l00302">pthread_thread_cleanup()</a>, <a class="el" href="pthread_8cc_source.html#l00289">pthread_thread_init()</a>, <a class="el" href="trace_8h_source.html#l00035">TRACE_PHASE_RUNNING</a>, <a class="el" href="trace_8cc_source.html#l00556">TraceExitProc()</a>, and <a class="el" href="trace_8cc_source.html#l00210">TracePhaseChange()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a2979da41734d1ea92d850b7cc25c52b5"></a><!-- doxytag: member="kernel.cc::_ddrbase" ref="a2979da41734d1ea92d850b7cc25c52b5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="profiling_8cc.html#a2979da41734d1ea92d850b7cc25c52b5">_ddrbase</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aa3dffd73b983369f8f6e4b0ac7bb22d0"></a><!-- doxytag: member="kernel.cc::_ddrend" ref="aa3dffd73b983369f8f6e4b0ac7bb22d0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="kernel_8cc.html#aa3dffd73b983369f8f6e4b0ac7bb22d0">_ddrend</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aea5a41e11c90591e0e82309d15680c19"></a><!-- doxytag: member="kernel.cc::_kernel_impure_ptr" ref="aea5a41e11c90591e0e82309d15680c19" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct _reent* _CONST __ATTRIBUTE_IMPURE_PTR__ <a class="el" href="kernel_8cc.html#aea5a41e11c90591e0e82309d15680c19">_kernel_impure_ptr</a> = &amp;kernel_impure_data</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pointer to global_impure_data. </p>

<p>Definition at line <a class="el" href="kernel_8cc_source.html#l00137">137</a> of file <a class="el" href="kernel_8cc_source.html">kernel.cc</a>.</p>

<p>Referenced by <a class="el" href="kernel_8cc_source.html#l01603">kCheckStackOverflow()</a>, <a class="el" href="kernel_8cc_source.html#l00944">kEndProcess()</a>, and <a class="el" href="kernel_8cc_source.html#l00260">kInitKernel()</a>.</p>

</div>
</div>
<a class="anchor" id="a1de4c077d031ef840643d2158c3d649c"></a><!-- doxytag: member="kernel.cc::_text_schedule" ref="a1de4c077d031ef840643d2158c3d649c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* <a class="el" href="kernel_8cc.html#a1de4c077d031ef840643d2158c3d649c">_text_schedule</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ac0f851485b54bb272ad50cb7564d700b"></a><!-- doxytag: member="kernel.cc::_text_schedule_base" ref="ac0f851485b54bb272ad50cb7564d700b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* <a class="el" href="kernel_8cc.html#ac0f851485b54bb272ad50cb7564d700b">_text_schedule_base</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a8154b4c44de671f04c932bcb760ee158"></a><!-- doxytag: member="kernel.cc::_text_schedule_end" ref="a8154b4c44de671f04c932bcb760ee158" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* <a class="el" href="kernel_8cc.html#a8154b4c44de671f04c932bcb760ee158">_text_schedule_end</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a6afe81513cad22ce2ec248b31fbf5f41"></a><!-- doxytag: member="kernel.cc::sch" ref="a6afe81513cad22ce2ec248b31fbf5f41" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsch__t.html">sch_t</a> <a class="el" href="kernel_8cc.html#a6afe81513cad22ce2ec248b31fbf5f41">sch</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="kernel_8cc.html">kernel.cc</a>      </li>

    <li class="footer">Generated on Tue Apr 28 2015 16:39:19 for Starburst by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
